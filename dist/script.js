/*! For license information please see script.js.LICENSE.txt */
(()=>{"use strict";var t={"./src/CanvasManager.ts":(t,e,n)=>{n.r(e),n.d(e,{backgroundCanvas:()=>o,backgroundCanvasCtx:()=>c,clearCanvas:()=>u,foregroundCanvas:()=>r,foregroundCanvasCtx:()=>s,updateCanvasSize:()=>d});var i=n("./src/script.ts"),r=document.getElementById("foreground-canvas"),o=document.getElementById("background-canvas"),a=document.getElementById("webgl-canvas");r.width=r.getBoundingClientRect().width,r.height=r.getBoundingClientRect().height,o.width=o.getBoundingClientRect().width,o.height=o.getBoundingClientRect().height,a.width=a.getBoundingClientRect().width,a.height=a.getBoundingClientRect().height;var s=r.getContext("2d"),c=o.getContext("2d");function u(){s.clearRect(0,0,r.width,r.height)}function d(){r.width=r.getBoundingClientRect().width,r.height=r.getBoundingClientRect().height,o.width=o.getBoundingClientRect().width,o.height=o.getBoundingClientRect().height,a.width=a.getBoundingClientRect().width,a.height=a.getBoundingClientRect().height,i.grid.canvas=o,i.grid.updateSize(),i.grid.draw()}window.addEventListener("resize",d)},"./src/Config.ts":(t,e,n)=>{n.r(e),n.d(e,{getFieldSize:()=>p,getFieldStrength:()=>g,getGravityDirection:()=>h,getGridSize:()=>m,getParticleNumber:()=>v,getPhysicsSubstepsAmount:()=>f,getPointerFunction:()=>y,isGyroEnabled:()=>x,setFieldSize:()=>b,setFieldStrength:()=>P,setGravityDirection:()=>C,setIsGyroEnabled:()=>M,setParticleNumber:()=>S,setPhysicsSubstepsAmount:()=>w,setPointerFunction:()=>E});var i=n("./src/Vec2D.ts"),r=10,o=4,a=new i.default(0,1.2),s=250,c=400,u="field",d=26,l=!1;function h(){return a}function f(){return o}function g(){return r}function p(){return s}function v(){return c}function y(){return u}function m(){return d}function x(){return l}function C(t){a=t}function w(t){o=t}function P(t){r=t}function b(t){s=t}function S(t){c=t}function E(t){u=t}function M(t){l=t}},"./src/Grid.ts":(t,e,n)=>{n.r(e),n.d(e,{Grid:()=>r});var i=n("./src/Config.ts"),r=function(){function t(t,e){void 0===e&&(e=i.getGridSize()),this.pixelSize=e,this.canvas=t,this.columns=Math.ceil(this.canvas.width/this.pixelSize),this.rows=Math.ceil(this.canvas.height/this.pixelSize),this.cells=this.initialize(),this.canvasCtx=this.canvas.getContext("2d")}return t.prototype.initialize=function(){for(var t=[],e=0;e<this.columns;e++){t[e]=[];for(var n=0;n<this.rows;n++)t[e][n]=[]}return this.cells=t,t},t.prototype.removeAll=function(){for(var t=0;t<this.columns;t++)for(var e=0;e<this.rows&&null!=this.cells[t];e++)this.cells[t][e]=[]},t.prototype.put=function(t){var e=Math.floor(t.position.x/this.pixelSize),n=Math.floor(t.position.y/this.pixelSize);e>=0&&e<this.cells.length&&n>=0&&n<this.cells[e].length&&this.cells[e][n].push(t)},t.prototype.updateSize=function(){this.columns=Math.ceil(this.canvas.width/this.pixelSize),this.rows=Math.ceil(this.canvas.height/this.pixelSize),this.initialize()},t.prototype.draw=function(){this.canvasCtx.clearRect(0,0,this.canvas.width,this.canvas.height),this.canvasCtx.strokeStyle=getComputedStyle(document.documentElement).getPropertyValue("--grid-color"),this.canvasCtx.lineWidth=1;for(var t=this.pixelSize;t<this.canvas.width;t+=this.pixelSize)this.canvasCtx.beginPath(),this.canvasCtx.moveTo(t,0),this.canvasCtx.lineTo(t,this.canvas.height),this.canvasCtx.stroke();for(var e=this.pixelSize;e<this.canvas.height;e+=this.pixelSize)this.canvasCtx.beginPath(),this.canvasCtx.moveTo(0,e),this.canvasCtx.lineTo(this.canvas.width,e),this.canvasCtx.stroke()},t}()},"./src/InputHandler.ts":(t,e,n)=>{n.r(e),n.d(e,{InputHandler:()=>u});var i=n("./src/Vec2D.ts"),r=n("./src/Config.ts"),o=n("./src/MenuManager.ts"),a=n("./src/script.ts"),s=n("./src/Utils.ts"),c=n("./src/Particle.ts"),u=function(){function t(){this.clicked=!1,this.pointerPosition=new i.default(0,0),this.clickStartPosition=new i.default(0,0),this.pointerFunction="field"}return t.getInstance=function(){return t.instance||(t.instance=new t,t.instance.initializeEventListeners()),t.instance},t.prototype.initializeEventListeners=function(){var t=document.getElementById("main_container");t&&(t.addEventListener("mousedown",this.handleMouseDown.bind(this)),t.addEventListener("mouseup",this.handleMouseUp.bind(this)),t.addEventListener("mousemove",this.handleMoveEvent.bind(this)),t.addEventListener("touchstart",this.handleMouseDown.bind(this)),t.addEventListener("touchend",this.handleMouseUp.bind(this)),t.addEventListener("touchmove",this.handleMoveEvent.bind(this)),t.addEventListener("click",(function(t){t.stopPropagation(),(0,o.closeMenu)()})))},t.prototype.handleMouseDown=function(t){t.stopPropagation(),this.clicked=!0,t instanceof MouseEvent?(this.pointerPosition.x=t.clientX,this.pointerPosition.y=t.clientY):t instanceof TouchEvent&&(this.pointerPosition.x=t.touches[0].clientX,this.pointerPosition.y=t.touches[0].clientY),this.clickStartPosition.x=this.pointerPosition.x,this.clickStartPosition.y=this.pointerPosition.y},t.prototype.handleMouseUp=function(t){if(t.stopPropagation(),this.clicked=!1,"throw"==r.getPointerFunction()){var e=this.clickStartPosition.clone().difference(this.pointerPosition).multiply(.1);a.particles.push(new c.default(this.clickStartPosition.clone(),r.getGridSize()/2,e,(0,s.getRandomColor)(),a.grid))}},t.prototype.handleMoveEvent=function(t){t.stopPropagation(),this.clicked&&(t instanceof MouseEvent?(this.pointerPosition.x=t.clientX,this.pointerPosition.y=t.clientY):t instanceof TouchEvent&&(this.pointerPosition.x=t.touches[0].clientX,this.pointerPosition.y=t.touches[0].clientY))},t}()},"./src/MenuManager.ts":(t,e,n)=>{n.r(e),n.d(e,{closeMenu:()=>u,openMenu:()=>c,setGravityStrength:()=>x,updatePointerFunction:()=>m});var i=n("./src/Config.ts"),r=n("./src/Vec2D.ts"),o=n("./src/script.ts"),a=document.getElementById("menu-button"),s=document.querySelectorAll(".menu-element");function c(){"false"==a.getAttribute("open")&&(a.setAttribute("open","true"),a.style.cursor="auto",s.forEach((function(t){setTimeout((function(){t.style.display="block"}),300)})))}function u(){a.setAttribute("open","false"),a.style.cursor="pointer",s.forEach((function(t){t.style.display="none"}))}a.addEventListener("click",(function(t){t.stopPropagation(),c()})),document.querySelector("#theme-switch").addEventListener("click",(function(){var t,e=document.documentElement;t="light"===e.getAttribute("theme")?"dark":"light",e.setAttribute("theme",t),o.grid.draw()}));var d=document.getElementById("field-size-slider"),l=document.getElementById("field-strength-slider"),h=document.getElementById("gravity-strength-slider"),f=document.getElementById("substeps-amount-entry"),g=document.getElementById("particles-amount-entry"),p=document.getElementById("gyro-toggle");function v(){p.checked?(i.setIsGyroEnabled(!0),window.addEventListener("devicemotion",y,!0)):(window.removeEventListener("devicemotion",y),i.setIsGyroEnabled(!1),i.setGravityDirection(new r.default(0,1.3)))}function y(t){i.isGyroEnabled()?i.setGravityDirection(new r.default(-t.accelerationIncludingGravity.x/5,t.accelerationIncludingGravity.y/5)):i.setGravityDirection(new r.default(0,1.3))}function m(){for(var t=document.getElementsByName("cursor-function"),e=0;e<t.length;e++)if(t[e].checked)return t[e].value}function x(t){i.setGravityDirection(new r.default(0,.1*t))}document.getElementsByName("cursor-function").forEach((function(t){t.addEventListener("change",(function(){t.checked&&i.setPointerFunction(t.value)}))})),d.oninput=function(){i.setFieldSize(parseInt(d.value))},l.oninput=function(){i.setFieldStrength(parseInt(l.value))},h.oninput=function(){x(parseInt(h.value))},f.addEventListener("change",(function(){i.setPhysicsSubstepsAmount(parseInt(f.value))})),p.oninput=function(){"undefined"!=typeof DeviceMotionEvent&&"function"==typeof DeviceMotionEvent.requestPermission?DeviceMotionEvent.requestPermission().then((function(t){"granted"==t&&v()})).catch(console.error):v()},g.addEventListener("change",(function(){i.setParticleNumber(parseInt(g.value));for(var t=o.particles.length-i.getParticleNumber();t>0;)o.particles.pop(),t--}))},"./src/Particle.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>r});var i=n("./src/Vec2D.ts");const r=function(){function t(t,e,n,r,o){this.position=t,this.velocity=n,this.acceleration=new i.default(0,0),this.radius=e,this.color=r,this.grid=o,this.cell=new i.default(Math.floor(this.position.x/o.pixelSize),Math.floor(this.position.y/o.pixelSize))}return t.prototype.updatePosition=function(t){var e=this.velocity.add(this.acceleration.multiply(t)).clone();e.multiply(t),this.position.add(e),this.acceleration.x=0,this.acceleration.y=0,this.updateCell()},t.prototype.accelerate=function(t){this.acceleration.add(t)},t.prototype.getNeighboringParticles=function(){for(var t=[],e=this.cell.x-1;e<=this.cell.x+1;e++)for(var n=this.cell.y-1;n<=this.cell.y+1;n++)e>=0&&e<this.grid.columns&&n>=0&&n<this.grid.rows&&t.push.apply(t,this.grid.cells[e][n]);return t},t.prototype.updateCell=function(){this.cell=new i.default(Math.floor(this.position.x/this.grid.pixelSize),Math.floor(this.position.y/this.grid.pixelSize))},t.canvas=document.getElementById("foreground-canvas"),t}()},"./src/PhysicsEngine.ts":(t,e,n)=>{n.r(e),n.d(e,{applyAttractorForces:()=>y,applyAttractorForcesToAll:()=>g,applyConstraint:()=>v,tick:()=>p});var i=n("./src/CanvasManager.ts"),r=n("./src/Config.ts"),o=n("./src/InputHandler.ts"),a=n("./src/Vec2D.ts"),s=n("./src/script.ts"),c=o.InputHandler.getInstance(),u=0,d=0;function l(t){s.grid.removeAll(),s.particles.forEach((function(e){e.updatePosition(t),s.grid.put(e)}))}function h(t){s.particles.forEach((function(e){e.position.add(t)}))}function f(t){s.particles.forEach((function(e){var n=t.difference(e.position),i=n.length();i<r.getFieldSize()&&i>10&&(n.multiply(100*r.getFieldStrength()),n.divide(i*i),e.accelerate(n))}))}function g(){s.particles.forEach((function(t){y(t)}))}function p(t){for(var e=t/r.getPhysicsSubstepsAmount(),n=0;n<r.getPhysicsSubstepsAmount();n++){if(0!=r.getGravityDirection().y&&s.particles.forEach((function(t){t.accelerate(r.getGravityDirection())})),c.clicked)switch(r.getPointerFunction()){case"field":f(c.pointerPosition);break;case"gravity":r.setGravityDirection(c.pointerPosition.difference(c.clickStartPosition).divide(400))}var i=window.screenX-u,o=window.screenY-d,g=new a.default(-i,-o);0==i&&0==o||h(g),u=window.screenX,d=window.screenY,s.particles.forEach((function(t){v(t)})),m(),l(e)}}function v(t){t.position.y+t.radius>=i.foregroundCanvas.height&&(t.velocity=new a.default(.992*t.velocity.x,-Math.abs(.6*t.velocity.y)),t.position.y=i.foregroundCanvas.height-t.radius),t.position.y-t.radius<=0&&(t.position.y=t.radius,t.velocity=new a.default(t.velocity.x,Math.abs(.6*t.velocity.y))),t.position.x-t.radius<=0&&(t.position.x=t.radius,t.velocity=new a.default(Math.abs(.6*t.velocity.x),t.velocity.y)),t.position.x+t.radius>=i.foregroundCanvas.width&&(t.velocity=new a.default(-Math.abs(.6*t.velocity.x),t.velocity.y),t.position.x=i.foregroundCanvas.width-t.radius)}function y(t){s.attractors.forEach((function(e){var n=e.position.difference(t.position),i=n.length();i<e.radius&&i>10&&(n.multiply(e.force),n.divide(i*i),t.accelerate(n))}))}function m(){var t=new a.default(0,0),e=0,n=0;s.particles.forEach((function(i){i.getNeighboringParticles().forEach((function(r){if(i!==r&&(t.set(i.position).subtract(r.position),e=t.squaredLength(),n=i.radius+r.radius,e<n*n&&0!=e)){var o=Math.sqrt(e);t.divide(o);var s=n-o;t.multiply(.5*s),i.position.add(t),r.position.subtract(t),t.multiply(6),i.velocity.add(t).add(new a.default((1-2*Math.random())/1e3,(1-2*Math.random())/1e3)),r.velocity.subtract(t).add(new a.default((1-2*Math.random())/1e3,(1-2*Math.random())/1e3))}}))}))}new a.default(0,0)},"./src/Renderer.ts":(t,e,n)=>{n.r(e),n.d(e,{drawArrow:()=>F,drawCursorFunction:()=>R,drawDot:()=>z,drawDottedLine:()=>I,drawLasso:()=>A,drawParticles:()=>_,drawPredictedPath:()=>k,setGeometry:()=>M});var i=n("./src/Vec2D.ts"),r=n("./src/Config.ts"),o=n("./src/shaders/particleFragmentShader.frag"),a=n("./src/shaders/particleVertexShader.vert"),s=n("./src/ShaderHelper.ts"),c=n("./src/CanvasManager.ts"),u=n("./src/PhysicsEngine.ts"),d=n("./src/InputHandler.ts"),l=n("./src/script.ts"),h=n("./src/Particle.ts"),f=document.getElementById("webgl-canvas"),g=f.getContext("webgl");f.width=f.getBoundingClientRect().width,f.height=f.getBoundingClientRect().height;var p=d.InputHandler.getInstance();g||console.error("Unable to initialize WebGL. Your browser may not support it."),g.enable(g.BLEND),g.blendFunc(g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA);var v=(0,s.createShader)(g,g.VERTEX_SHADER,a),y=(0,s.createShader)(g,g.FRAGMENT_SHADER,o),m=(0,s.createProgram)(g,v,y),x=g.getAttribLocation(m,"a_position"),C=g.getUniformLocation(m,"u_resolution"),w=g.getUniformLocation(m,"u_color"),P=g.getUniformLocation(m,"u_translation"),b=g.getUniformLocation(m,"u_radius"),S=g.getUniformLocation(m,"u_outline_black"),E=g.createBuffer();function M(){l.particles.forEach((function(t){!function(t,e,n,i,r){var o=0-i/2,a=0+i/2,s=0-r/2,c=0+r/2;t.bufferData(t.ARRAY_BUFFER,new Float32Array([o,s,a,s,o,c,o,c,a,s,a,c]),t.STATIC_DRAW)}(g,0,0,r.getGridSize(),r.getGridSize())}))}function _(){(0,s.resizeCanvasToDisplaySize)(g.canvas),g.viewport(0,0,g.canvas.width,g.canvas.height),g.clearColor(0,0,0,0),g.clear(g.COLOR_BUFFER_BIT),g.useProgram(m),g.enableVertexAttribArray(x),g.bindBuffer(g.ARRAY_BUFFER,E),g.vertexAttribPointer(x,2,g.FLOAT,!1,0,0);var t=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--is-outline-dark")),e=[g.canvas.width,g.canvas.height];l.particles.forEach((function(n){g.uniform2fv(C,e),g.uniform2f(P,n.position.x,n.position.y),g.uniform3f(w,n.color.r,n.color.g,n.color.b),g.uniform1f(b,n.radius),g.uniform1f(S,t),g.drawArrays(g.TRIANGLES,0,6)}))}function I(t,e,n,r){if(void 0===n&&(n=5),void 0===r&&(r=8),p.clicked&&t.x!=e.x&&t.y!=e.y){var o=t.difference(e);k(t.clone(),o.clone().multiply(.1)),o.divide(r);var a=Math.atan2(e.y-t.y,e.x-t.x),s=new i.default(e.x,e.y);s.x-=Math.cos(a),s.y-=Math.sin(a);for(var c=0;c<=r;c++)z(t.x-o.x*c,t.y-o.y*c,n,255)}}function k(t,e){for(var n=new h.default(t,r.getGridSize()/2,e,{r:0,g:0,b:0},l.grid),i=1;i<=127;i++)n.accelerate(r.getGravityDirection()),(0,u.applyConstraint)(n),(0,u.applyAttractorForces)(n),n.updatePosition(.5),i%3==0&&z(n.position.x,n.position.y,5,255-2*i)}function z(t,e,n,i){c.foregroundCanvasCtx.beginPath(),c.foregroundCanvasCtx.arc(t,e,n,0,2*Math.PI,!1),c.foregroundCanvasCtx.fillStyle="rgba(210, 210, 210, ".concat(i/255,")"),c.foregroundCanvasCtx.fill(),c.foregroundCanvasCtx.closePath()}function A(t){void 0===t&&(t=3),p.clicked&&(c.foregroundCanvasCtx.beginPath(),c.foregroundCanvasCtx.arc(p.pointerPosition.x,p.pointerPosition.y,r.getFieldSize(),0,2*Math.PI),c.foregroundCanvasCtx.lineWidth=t,c.foregroundCanvasCtx.strokeStyle=getComputedStyle(document.documentElement).getPropertyValue("--grid-color"),c.foregroundCanvasCtx.stroke(),c.foregroundCanvasCtx.closePath())}function F(t,e){if(p.clicked&&t.x!=e.x&&t.y!=e.y){var n=Math.atan2(e.y-t.y,e.x-t.x),r=10,o=new i.default(e.x,e.y);o.x-=11.5*Math.cos(n),o.y-=11.5*Math.sin(n),c.foregroundCanvasCtx.beginPath(),c.foregroundCanvasCtx.moveTo(t.x,t.y),c.foregroundCanvasCtx.lineTo(o.x,o.y),c.foregroundCanvasCtx.strokeStyle="#bbbbbb",c.foregroundCanvasCtx.lineWidth=10,c.foregroundCanvasCtx.stroke(),c.foregroundCanvasCtx.beginPath(),c.foregroundCanvasCtx.moveTo(o.x,o.y),c.foregroundCanvasCtx.lineTo(o.x-r*Math.cos(n-Math.PI/7),o.y-r*Math.sin(n-Math.PI/7)),c.foregroundCanvasCtx.lineTo(o.x-r*Math.cos(n+Math.PI/7),o.y-r*Math.sin(n+Math.PI/7)),c.foregroundCanvasCtx.lineTo(o.x,o.y),c.foregroundCanvasCtx.lineTo(o.x-r*Math.cos(n-Math.PI/7),o.y-r*Math.sin(n-Math.PI/7)),c.foregroundCanvasCtx.strokeStyle="#bbbbbb",c.foregroundCanvasCtx.lineWidth=10,c.foregroundCanvasCtx.stroke(),c.foregroundCanvasCtx.fillStyle="#bbbbbb",c.foregroundCanvasCtx.fill(),c.foregroundCanvasCtx.closePath()}}function R(){if(p.clicked)switch(r.getPointerFunction()){case"field":A();break;case"gravity":F(p.clickStartPosition,p.pointerPosition);break;case"throw":I(p.clickStartPosition,p.pointerPosition)}}g.bindBuffer(g.ARRAY_BUFFER,E)},"./src/ShaderHelper.ts":(t,e,n)=>{function i(t,e,n){var i=t.createShader(e);if(t.shaderSource(i,n),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS))return i;console.log(t.getShaderInfoLog(i)),t.deleteShader(i)}function r(t,e,n){var i=t.createProgram();if(t.attachShader(i,e),t.attachShader(i,n),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS))return i;console.log(t.getProgramInfoLog(i)),t.deleteProgram(i)}function o(t){var e=t.clientWidth,n=t.clientHeight,i=t.width!==e||t.height!==n;return i&&(t.width=e,t.height=n),i}n.r(e),n.d(e,{createProgram:()=>r,createShader:()=>i,resizeCanvasToDisplaySize:()=>o})},"./src/UIManager.ts":(t,e,n)=>{n.r(e),n.d(e,{fps:()=>r,frameTimes:()=>o,getAverageFrameTime:()=>u,updateUI:()=>c});var i=document.createElement("div");i.style.position="absolute",i.style.top="10px",i.style.left="10px",document.body.appendChild(i);var r=60,o=[],a=100,s=performance.now();function c(){var t=function(){var t=performance.now(),e=t-s;o.push(e),o.length>a&&o.shift();var n=o.reduce((function(t,e){return t+e}),0)/o.length;return s=t,1e3/n}();i.innerText="FPS: ".concat(Math.round(t))}function u(){return o.reduce((function(t,e){return t+e}),0)/o.length}},"./src/Utils.ts":(t,e,n)=>{function i(){return{r:Math.random(),g:Math.random(),b:Math.random()}}n.r(e),n.d(e,{getRandomColor:()=>i})},"./src/Vec2D.ts":(t,e,n)=>{n.r(e),n.d(e,{default:()=>i});const i=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.multiply=function(t){return this.x*=t,this.y*=t,this},t.prototype.divide=function(t){return this.x/=t,this.y/=t,this},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.squaredLength=function(){return this.x*this.x+this.y*this.y},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.difference=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.squaredDistanceTo=function(t){return Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2)},t}()},"./src/script.ts":(t,e,n)=>{n.r(e),n.d(e,{attractors:()=>f,grid:()=>p,particles:()=>h});var i=n("./src/Renderer.ts"),r=n("./src/Particle.ts"),o=n("./src/Vec2D.ts"),a=n("./src/UIManager.ts"),s=n("./src/CanvasManager.ts"),c=n("./src/PhysicsEngine.ts"),u=n("./src/Config.ts"),d=n("./src/Grid.ts"),l=n("./src/Utils.ts"),h=[],f=[],g=0,p=new d.Grid(s.backgroundCanvas);p.draw(),requestAnimationFrame((function t(){var e=(0,a.getAverageFrameTime)();(0,c.tick)(e/20),(0,s.clearCanvas)(),(0,i.drawParticles)(),(0,i.drawCursorFunction)(),(0,a.updateUI)(),g%3==0&&h.length<u.getParticleNumber()&&g>120&&(h.push(new r.default(new o.default(200,200),p.pixelSize/2,new o.default(27,-12),(0,l.getRandomColor)(),p)),h.push(new r.default(new o.default(200,260),p.pixelSize/2,new o.default(29,-12),(0,l.getRandomColor)(),p)),h.push(new r.default(new o.default(200,320),p.pixelSize/2,new o.default(24,-12),(0,l.getRandomColor)(),p)),h.push(new r.default(new o.default(200,380),p.pixelSize/2,new o.default(25,-12),(0,l.getRandomColor)(),p)),h.push(new r.default(new o.default(200,440),p.pixelSize/2,new o.default(24,-12),(0,l.getRandomColor)(),p)),(0,i.setGeometry)()),g++,requestAnimationFrame(t)}))},"./src/shaders/particleFragmentShader.frag":t=>{t.exports="precision mediump float;\r\n\r\nuniform vec2 u_resolution;\r\n\r\nuniform vec3 u_color;\r\nuniform float u_radius;\r\nuniform vec2 u_translation;\r\nuniform float u_outline_black;\r\nfloat mask(in vec2 _st, in float _radius){\r\n    vec2 dist = _st;\r\n    return 1.-smoothstep(_radius-(_radius*0.15),\r\n                         _radius+(_radius*0.15),\r\n                         dot(dist,dist)*3.9);\r\n}\r\n\r\n\r\nvec3 circle(in vec2 _st, in float radius, in vec3 color) {\r\n\tvec2 dist = _st;\r\n\treturn smoothstep(\r\n\t\tradius + (radius * 0.15),\r\n\t\tradius -(radius * 0.15),\r\n\t\tdot(dist, dist) * 3.9) * color + u_outline_black * (smoothstep(\r\n\t\tradius - (radius * 0.15),\r\n\t\tradius +(radius * 0.15),\r\n\t\tdot(dist, dist) * 5.3));\r\n}\r\nvoid main(){\r\n \tvec2 st =  (gl_FragCoord.xy - u_translation*vec2(1., -1.) - u_resolution*vec2(0.,1.)) / u_radius; \r\n\r\n\tvec3 color = circle(st,4.0, u_color);\r\n\r\n\tgl_FragColor = vec4(color, mask(st, 4.0));\r\n}"},"./src/shaders/particleVertexShader.vert":t=>{t.exports="precision mediump float;\r\n\r\nattribute vec2 a_position;\r\n\r\n// attribute vec3 color;\r\n// varying vec3 v_color;\r\nuniform vec2 u_resolution;\r\nuniform vec2 u_translation;\r\n\r\nvoid main() {\r\n    //move the position of the shader\r\n    vec2 position = a_position + u_translation ;\r\n\r\n    // convert the position from pixels to 0.0 to 1.0\r\n    vec2 zeroToOne = position / u_resolution;\r\n\r\n    // convert from 0->1 to 0->2\r\n    vec2 zeroToTwo = zeroToOne * 2.0;\r\n\r\n    // convert from 0->2 to -1->+1 (clipspace)\r\n    vec2 clipSpace = zeroToTwo - 1.0;\r\n\r\n    gl_Position = vec4(clipSpace * vec2(1., -1.), 0, 1);\r\n\r\n    // // Pass the vertex color to the fragment shader.\r\n    // v_position = a_position;\r\n}"}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n("./src/script.ts"),n("./src/MenuManager.ts")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QjdGLElBQzFHNEYsRUFBVWxDLEtBQUssSUFBSSxVQUFTLElBQUksVUFBTSxJQUFLLEtBQU0xRCxFQUFLc0MsVUFBVSxFQUFHLElBQUksVUFBTSxJQUFLLEtBQU0sSUFBQXVELGtCQUFrQjdGLEtBQzFHLElBQUFvTixnQkFFRjhHLElBQ0FFLHNCQUFzQkMsRUFDeEIsbzBEQ3JDSUUsRUFBMkIsQ0FBQyxFQUdoQyxTQUFTQyxFQUFvQkMsR0FFNUIsSUFBSUMsRUFBZUgsRUFBeUJFLEdBQzVDLFFBQXFCRSxJQUFqQkQsRUFDSCxPQUFPQSxFQUFhRSxRQUdyQixJQUFJQyxFQUFTTixFQUF5QkUsR0FBWSxDQUdqREcsUUFBUyxDQUFDLEdBT1gsT0FIQUUsRUFBb0JMLEdBQVVJLEVBQVFBLEVBQU9ELFFBQVNKLEdBRy9DSyxFQUFPRCxPQUNmLENDckJBSixFQUFvQk8sRUFBSSxDQUFDSCxFQUFTSSxLQUNqQyxJQUFJLElBQUlDLEtBQU9ELEVBQ1hSLEVBQW9CVSxFQUFFRixFQUFZQyxLQUFTVCxFQUFvQlUsRUFBRU4sRUFBU0ssSUFDNUVFLE9BQU9DLGVBQWVSLEVBQVNLLEVBQUssQ0FBRUksWUFBWSxFQUFNQyxJQUFLTixFQUFXQyxJQUUxRSxFQ05EVCxFQUFvQlUsRUFBSSxDQUFDSyxFQUFLQyxJQUFVTCxPQUFPTSxVQUFVQyxlQUFlQyxLQUFLSixFQUFLQyxHQ0NsRmhCLEVBQW9CekYsRUFBSzZGLElBQ0gsb0JBQVhnQixRQUEwQkEsT0FBT0MsYUFDMUNWLE9BQU9DLGVBQWVSLEVBQVNnQixPQUFPQyxZQUFhLENBQUVsTyxNQUFPLFdBRTdEd04sT0FBT0MsZUFBZVIsRUFBUyxhQUFjLENBQUVqTixPQUFPLEdBQU8sRUNGOUQ2TSxFQUFvQixtQkFDTUEsRUFBb0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wYXJ0aWNsZXNpbXYyLy4vc3JjL0NhbnZhc01hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vcGFydGljbGVzaW12Mi8uL3NyYy9Db25maWcudHMiLCJ3ZWJwYWNrOi8vcGFydGljbGVzaW12Mi8uL3NyYy9HcmlkLnRzIiwid2VicGFjazovL3BhcnRpY2xlc2ltdjIvLi9zcmMvSW5wdXRIYW5kbGVyLnRzIiwid2VicGFjazovL3BhcnRpY2xlc2ltdjIvLi9zcmMvTWVudU1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vcGFydGljbGVzaW12Mi8uL3NyYy9QYXJ0aWNsZS50cyIsIndlYnBhY2s6Ly9wYXJ0aWNsZXNpbXYyLy4vc3JjL1BoeXNpY3NFbmdpbmUudHMiLCJ3ZWJwYWNrOi8vcGFydGljbGVzaW12Mi8uL3NyYy9SZW5kZXJlci50cyIsIndlYnBhY2s6Ly9wYXJ0aWNsZXNpbXYyLy4vc3JjL1NoYWRlckhlbHBlci50cyIsIndlYnBhY2s6Ly9wYXJ0aWNsZXNpbXYyLy4vc3JjL1VJTWFuYWdlci50cyIsIndlYnBhY2s6Ly9wYXJ0aWNsZXNpbXYyLy4vc3JjL1V0aWxzLnRzIiwid2VicGFjazovL3BhcnRpY2xlc2ltdjIvLi9zcmMvVmVjMkQudHMiLCJ3ZWJwYWNrOi8vcGFydGljbGVzaW12Mi8uL3NyYy9zY3JpcHQudHMiLCJ3ZWJwYWNrOi8vcGFydGljbGVzaW12Mi93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9wYXJ0aWNsZXNpbXYyL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9wYXJ0aWNsZXNpbXYyL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vcGFydGljbGVzaW12Mi93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3BhcnRpY2xlc2ltdjIvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdyaWQgfSBmcm9tIFwiLi9zY3JpcHRcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBmb3JlZ3JvdW5kQ2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZvcmVncm91bmQtY2FudmFzJykgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XHJcbmV4cG9ydCBjb25zdCBiYWNrZ3JvdW5kQ2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhY2tncm91bmQtY2FudmFzJykgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XHJcbmNvbnN0IHdlYmdsQ2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dlYmdsLWNhbnZhcycpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xyXG5cclxuZm9yZWdyb3VuZENhbnZhcyEud2lkdGggPSBmb3JlZ3JvdW5kQ2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xyXG5mb3JlZ3JvdW5kQ2FudmFzIS5oZWlnaHQgPSBmb3JlZ3JvdW5kQ2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcclxuYmFja2dyb3VuZENhbnZhcyEud2lkdGggPSBiYWNrZ3JvdW5kQ2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xyXG5iYWNrZ3JvdW5kQ2FudmFzIS5oZWlnaHQgPSBiYWNrZ3JvdW5kQ2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcclxud2ViZ2xDYW52YXMud2lkdGggPSB3ZWJnbENhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcclxud2ViZ2xDYW52YXMuaGVpZ2h0ID0gd2ViZ2xDYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xyXG5leHBvcnQgY29uc3QgZm9yZWdyb3VuZENhbnZhc0N0eCA9IGZvcmVncm91bmRDYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuZXhwb3J0IGNvbnN0IGJhY2tncm91bmRDYW52YXNDdHggPSBiYWNrZ3JvdW5kQ2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcblxyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdXBkYXRlQ2FudmFzU2l6ZSk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJDYW52YXMoKSB7XHJcbiAgICBmb3JlZ3JvdW5kQ2FudmFzQ3R4LmNsZWFyUmVjdCgwLCAwLCBmb3JlZ3JvdW5kQ2FudmFzLndpZHRoLCBmb3JlZ3JvdW5kQ2FudmFzLmhlaWdodCk7XHJcbiAgfVxyXG4gIFxyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQ2FudmFzU2l6ZSgpIHtcclxuICAgIGZvcmVncm91bmRDYW52YXMud2lkdGggPSBmb3JlZ3JvdW5kQ2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xyXG4gICAgZm9yZWdyb3VuZENhbnZhcy5oZWlnaHQgPSBmb3JlZ3JvdW5kQ2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcclxuICAgIGJhY2tncm91bmRDYW52YXMud2lkdGggPSBiYWNrZ3JvdW5kQ2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xyXG4gICAgYmFja2dyb3VuZENhbnZhcy5oZWlnaHQgPSBiYWNrZ3JvdW5kQ2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcclxuICAgIHdlYmdsQ2FudmFzLndpZHRoID0gd2ViZ2xDYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XHJcbiAgICB3ZWJnbENhbnZhcy5oZWlnaHQgPSB3ZWJnbENhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XHJcbiAgICBncmlkLmNhbnZhcyA9IGJhY2tncm91bmRDYW52YXM7XHJcbiAgICBncmlkLnVwZGF0ZVNpemUoKTtcclxuICAgIGdyaWQuZHJhdygpO1xyXG4gIH1cclxuICAiLCJpbXBvcnQgeyBQb2ludGVyRnVuY3Rpb25UeXBlIH0gZnJvbSBcIi4vSW5wdXRIYW5kbGVyXCI7XHJcbmltcG9ydCBWZWMyRCBmcm9tIFwiLi9WZWMyRFwiO1xyXG5cclxudmFyIGZpZWxkU3RyZW5ndGggPSAxMDtcclxudmFyIHBoeXNpY3NTdWJzdGVwc0Ftb3VudCA9IDQ7XHJcbnZhciBncmF2aXR5RGlyZWN0aW9uID0gbmV3IFZlYzJEKDAsIDEuMik7XHJcbnZhciBmaWVsZFNpemUgPSAyNTA7XHJcbnZhciBwYXJ0aWNsZU51bWJlciA9IDQwMDtcclxudmFyIHBvaW50ZXJGdW5jdGlvbjogUG9pbnRlckZ1bmN0aW9uVHlwZSA9ICdmaWVsZCc7XHJcbnZhciBncmlkU2l6ZSA9IDI2O1xyXG52YXIgZ3lyb0VuYWJsZWQgPSBmYWxzZTtcclxuZXhwb3J0IGZ1bmN0aW9uIGdldEdyYXZpdHlEaXJlY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gZ3Jhdml0eURpcmVjdGlvbjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFBoeXNpY3NTdWJzdGVwc0Ftb3VudCgpIHtcclxuICAgIHJldHVybiBwaHlzaWNzU3Vic3RlcHNBbW91bnQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWVsZFN0cmVuZ3RoKCkge1xyXG4gICAgcmV0dXJuIGZpZWxkU3RyZW5ndGg7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWVsZFNpemUoKSB7XHJcbiAgICByZXR1cm4gZmllbGRTaXplO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGFydGljbGVOdW1iZXIoKSB7XHJcbiAgICByZXR1cm4gcGFydGljbGVOdW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRQb2ludGVyRnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gcG9pbnRlckZ1bmN0aW9uO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0R3JpZFNpemUoKSB7XHJcbiAgICByZXR1cm4gZ3JpZFNpemU7ICAgIFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNHeXJvRW5hYmxlZCgpIHtcclxuICAgIHJldHVybiBneXJvRW5hYmxlZDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldEdyYXZpdHlEaXJlY3Rpb24obmV3R3Jhdml0eURpcmVjdGlvbjogVmVjMkQpIHtcclxuICAgIGdyYXZpdHlEaXJlY3Rpb24gPSBuZXdHcmF2aXR5RGlyZWN0aW9uO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0UGh5c2ljc1N1YnN0ZXBzQW1vdW50KG5ld0Ftb3VudDogbnVtYmVyKSB7XHJcbiAgICBwaHlzaWNzU3Vic3RlcHNBbW91bnQgPSBuZXdBbW91bnQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRGaWVsZFN0cmVuZ3RoKG5ld2ZpZWxkU3RyZW5ndGg6IG51bWJlcikge1xyXG4gICAgZmllbGRTdHJlbmd0aCA9IG5ld2ZpZWxkU3RyZW5ndGg7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRGaWVsZFNpemUobmV3ZmllbGRTaXplOiBudW1iZXIpIHtcclxuICAgIGZpZWxkU2l6ZSA9IG5ld2ZpZWxkU2l6ZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldFBhcnRpY2xlTnVtYmVyKG5ld1BhcnRpY2xlTnVtYmVyOiBudW1iZXIpIHtcclxuICAgIHBhcnRpY2xlTnVtYmVyID0gbmV3UGFydGljbGVOdW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRQb2ludGVyRnVuY3Rpb24obmV3UG9pbnRlckZ1bmN0aW9uOiBQb2ludGVyRnVuY3Rpb25UeXBlKSB7XHJcbiAgICBwb2ludGVyRnVuY3Rpb24gPSBuZXdQb2ludGVyRnVuY3Rpb247XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRJc0d5cm9FbmFibGVkKG5ld0lzR3lyb0VuYWJsZWQ6IGJvb2xlYW4pIHtcclxuICAgIGd5cm9FbmFibGVkID0gbmV3SXNHeXJvRW5hYmxlZDtcclxufSIsImltcG9ydCB7IGJhY2tncm91bmRDYW52YXNDdHggfSBmcm9tIFwiLi9DYW52YXNNYW5hZ2VyXCI7XHJcbmltcG9ydCBQYXJ0aWNsZSBmcm9tIFwiLi9QYXJ0aWNsZVwiO1xyXG5pbXBvcnQgeyBncmlkIH0gZnJvbSBcIi4vc2NyaXB0XCI7XHJcbmltcG9ydCAqIGFzIENvbmZpZyBmcm9tICcuL0NvbmZpZyc7XHJcbmV4cG9ydCBjbGFzcyBHcmlkIHtcclxuICAgIHB1YmxpYyBjZWxsczogUGFydGljbGVbXVtdW107XHJcbiAgICBwdWJsaWMgY29sdW1uczogbnVtYmVyO1xyXG4gICAgcHVibGljIHJvd3M6IG51bWJlcjtcclxuICAgIHB1YmxpYyByZWFkb25seSBwaXhlbFNpemU6IG51bWJlcjtcclxuICAgIHB1YmxpYyBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBjYW52YXNDdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgIGNvbnN0cnVjdG9yKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQsIGdyaWRQaXhlbFNpemU6IG51bWJlciA9IENvbmZpZy5nZXRHcmlkU2l6ZSgpKSB7XHJcbiAgICAgICAgdGhpcy5waXhlbFNpemUgPSBncmlkUGl4ZWxTaXplO1xyXG4gICAgICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xyXG4gICAgICAgIHRoaXMuY29sdW1ucyA9IE1hdGguY2VpbCh0aGlzLmNhbnZhcy53aWR0aCAvIHRoaXMucGl4ZWxTaXplKTtcclxuICAgICAgICB0aGlzLnJvd3MgPSBNYXRoLmNlaWwodGhpcy5jYW52YXMuaGVpZ2h0IC8gdGhpcy5waXhlbFNpemUpO1xyXG4gICAgICAgIHRoaXMuY2VsbHMgPSB0aGlzLmluaXRpYWxpemUoKTtcclxuICAgICAgICB0aGlzLmNhbnZhc0N0eCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGluaXRpYWxpemUoKTogUGFydGljbGVbXVtdW10ge1xyXG4gICAgICAgIGNvbnN0IGNlbGxzOiBQYXJ0aWNsZVtdW11bXSA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb2x1bW5zOyBpKyspIHtcclxuICAgICAgICAgICAgY2VsbHNbaV0gPSBbXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLnJvd3M7IGorKykge1xyXG4gICAgICAgICAgICAgICAgY2VsbHNbaV1bal0gPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNlbGxzICA9IGNlbGxzO1xyXG4gICAgICAgIHJldHVybiBjZWxscztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlQWxsKCk6IHZvaWQge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb2x1bW5zOyBpKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLnJvd3M7IGorKykge1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5jZWxsc1tpXT09IG51bGwpe1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jZWxsc1tpXVtqXSA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBwdXQocGFydGljbGU6IFBhcnRpY2xlKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgY29sdW1uID0gTWF0aC5mbG9vcihwYXJ0aWNsZS5wb3NpdGlvbi54IC8gdGhpcy5waXhlbFNpemUpO1xyXG4gICAgICAgIGNvbnN0IHJvdyA9IE1hdGguZmxvb3IocGFydGljbGUucG9zaXRpb24ueSAvIHRoaXMucGl4ZWxTaXplKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoY29sdW1uID49IDAgJiYgY29sdW1uIDwgdGhpcy5jZWxscy5sZW5ndGggJiYgcm93ID49IDAgJiYgcm93IDwgdGhpcy5jZWxsc1tjb2x1bW5dLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmNlbGxzW2NvbHVtbl1bcm93XS5wdXNoKHBhcnRpY2xlKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYCR7Y29sdW1ufSAgICR7cm93fWApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlU2l6ZSgpOnZvaWQge1xyXG4gICAgICAgIHRoaXMuY29sdW1ucyA9IE1hdGguY2VpbCh0aGlzLmNhbnZhcy53aWR0aCAvIHRoaXMucGl4ZWxTaXplKTtcclxuICAgICAgICB0aGlzLnJvd3MgPSBNYXRoLmNlaWwodGhpcy5jYW52YXMuaGVpZ2h0IC8gdGhpcy5waXhlbFNpemUpO1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkcmF3KCl7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNhbnZhc0N0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5jYW52YXNDdHguc3Ryb2tlU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1ncmlkLWNvbG9yJyk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4LmxpbmVXaWR0aCA9IDE7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHggPSB0aGlzLnBpeGVsU2l6ZTsgeCA8IHRoaXMuY2FudmFzLndpZHRoOyB4ICs9IHRoaXMucGl4ZWxTaXplKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5jYW52YXNDdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5jYW52YXNDdHgubW92ZVRvKHgsIDApO1xyXG4gICAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4LmxpbmVUbyh4LCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAobGV0IHkgPSB0aGlzLnBpeGVsU2l6ZTsgeSA8IHRoaXMuY2FudmFzLmhlaWdodDsgeSArPSB0aGlzLnBpeGVsU2l6ZSkge1xyXG4gICAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4Lm1vdmVUbygwLCB5KTtcclxuICAgICAgICAgICAgICB0aGlzLmNhbnZhc0N0eC5saW5lVG8odGhpcy5jYW52YXMud2lkdGgsIHkpO1xyXG4gICAgICAgICAgICAgIHRoaXMuY2FudmFzQ3R4LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIERFQlVHXHJcbiAgICAgICAgICAgIC8vICAgZm9yIChsZXQgeCA9IDA7IHggPCBncmlkLmNvbHVtbnM7IHggKz0gMSkge1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vICAgZm9yIChsZXQgeSA9IDA7IHkgPCBncmlkLnJvd3M7IHkgKz0gMSkge1xyXG4gICAgICAgICAgICAvLyAgICAgYmFja2dyb3VuZENhbnZhc0N0eC5mb250ID0gXCIxMnB4IHNlcmlmXCI7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gICAgIGJhY2tncm91bmRDYW52YXNDdHguZmlsbFRleHQoYCR7Z3JpZC5jZWxsc1t4XVt5XS5sZW5ndGh9YCwgKHgrMSkqdGhpcy5waXhlbFNpemUgLSB0aGlzLnBpeGVsU2l6ZS8yIC0gMiwgKHkrMSkqdGhpcy5waXhlbFNpemUgLXRoaXMucGl4ZWxTaXplLzIgKyA0KTtcclxuICAgICAgICAgICAgICAgIC8vIGJhY2tfY3R4LmZpbGxUZXh0KGAke3h9ICR7eX1gLCAoeCsxKSp0aGlzLnBpeGVsU2l6ZSAtIHRoaXMucGl4ZWxTaXplLzIgLSAyLCAoeSsxKSp0aGlzLnBpeGVsU2l6ZSAtdGhpcy5waXhlbFNpemUvMiArIDQpO1xyXG4gICAgICAgICAgICAvLyAgIH1cclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgfVxyXG4gICAgfSIsImltcG9ydCBWZWMyRCBmcm9tIFwiLi9WZWMyRFwiO1xyXG5pbXBvcnQgKiBhcyBDb25maWcgZnJvbSAnLi9Db25maWcnO1xyXG5pbXBvcnQgeyBjbG9zZU1lbnUsIHVwZGF0ZVBvaW50ZXJGdW5jdGlvbiB9IGZyb20gXCIuL01lbnVNYW5hZ2VyXCI7XHJcbmltcG9ydCB7IGZwcyB9IGZyb20gXCIuL1VJTWFuYWdlclwiO1xyXG5pbXBvcnQgeyBncmlkLCBwYXJ0aWNsZXMgfSBmcm9tIFwiLi9zY3JpcHRcIjtcclxuaW1wb3J0IHsgZ2V0UmFuZG9tQ29sb3IgfSBmcm9tIFwiLi9VdGlsc1wiO1xyXG5pbXBvcnQgUGFydGljbGUgZnJvbSBcIi4vUGFydGljbGVcIjtcclxuZXhwb3J0IHR5cGUgUG9pbnRlckZ1bmN0aW9uVHlwZSA9ICdmaWVsZCcgfCAnZ3Jhdml0eScgfCAndGhyb3cnO1xyXG5cclxuZXhwb3J0IGNsYXNzIElucHV0SGFuZGxlciB7XHJcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IElucHV0SGFuZGxlcjtcclxuICBwdWJsaWMgY2xpY2tlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIHByaXZhdGUgcG9pbnRlckZ1bmN0aW9uOiBQb2ludGVyRnVuY3Rpb25UeXBlO1xyXG4gIHB1YmxpYyBwb2ludGVyUG9zaXRpb24gPSBuZXcgVmVjMkQoMCwgMClcclxuICBwdWJsaWMgY2xpY2tTdGFydFBvc2l0aW9uID0gbmV3IFZlYzJEKDAsIDApXHJcblxyXG5cclxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5wb2ludGVyRnVuY3Rpb24gPSAnZmllbGQnO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBJbnB1dEhhbmRsZXIge1xyXG4gICAgaWYgKCFJbnB1dEhhbmRsZXIuaW5zdGFuY2UpIHtcclxuICAgICAgSW5wdXRIYW5kbGVyLmluc3RhbmNlID0gbmV3IElucHV0SGFuZGxlcigpO1xyXG4gICAgICBJbnB1dEhhbmRsZXIuaW5zdGFuY2UuaW5pdGlhbGl6ZUV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gSW5wdXRIYW5kbGVyLmluc3RhbmNlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpbml0aWFsaXplRXZlbnRMaXN0ZW5lcnMoKTogdm9pZCB7XHJcbiAgICBjb25zdCBtYWluX2JvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbl9jb250YWluZXInKTtcclxuICAgIGlmICghbWFpbl9ib2R5KSByZXR1cm47XHJcblxyXG4gICAgbWFpbl9ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5oYW5kbGVNb3VzZURvd24uYmluZCh0aGlzKSk7XHJcbiAgICBtYWluX2JvZHkuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcy5oYW5kbGVNb3VzZVVwLmJpbmQodGhpcykpO1xyXG4gICAgbWFpbl9ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5oYW5kbGVNb3ZlRXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgICBtYWluX2JvZHkuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgdGhpcy5oYW5kbGVNb3VzZURvd24uYmluZCh0aGlzKSk7XHJcbiAgICBtYWluX2JvZHkuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIHRoaXMuaGFuZGxlTW91c2VVcC5iaW5kKHRoaXMpKTtcclxuICAgIG1haW5fYm9keS5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIHRoaXMuaGFuZGxlTW92ZUV2ZW50LmJpbmQodGhpcykpO1xyXG4gICAgbWFpbl9ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcclxuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgIGNsb3NlTWVudSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGhhbmRsZU1vdXNlRG93bihldmVudDogTW91c2VFdmVudCB8IFRvdWNoRXZlbnQpOiB2b2lkIHtcclxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgdGhpcy5jbGlja2VkID0gdHJ1ZTtcclxuICAgIFxyXG5cclxuICAgIGlmIChldmVudCBpbnN0YW5jZW9mIE1vdXNlRXZlbnQpIHtcclxuICAgICAgdGhpcy5wb2ludGVyUG9zaXRpb24ueCA9IGV2ZW50LmNsaWVudFg7XHJcbiAgICAgIHRoaXMucG9pbnRlclBvc2l0aW9uLnkgPSBldmVudC5jbGllbnRZO1xyXG4gICAgfSBlbHNlIGlmIChldmVudCBpbnN0YW5jZW9mIFRvdWNoRXZlbnQpIHtcclxuICAgICAgdGhpcy5wb2ludGVyUG9zaXRpb24ueCA9IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WDtcclxuICAgICAgdGhpcy5wb2ludGVyUG9zaXRpb24ueSA9IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmNsaWNrU3RhcnRQb3NpdGlvbi54ID0gdGhpcy5wb2ludGVyUG9zaXRpb24ueDtcclxuICAgIHRoaXMuY2xpY2tTdGFydFBvc2l0aW9uLnkgPSB0aGlzLnBvaW50ZXJQb3NpdGlvbi55O1xyXG4gICAgXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGhhbmRsZU1vdXNlVXAoZXZlbnQ6IE1vdXNlRXZlbnQgfCBUb3VjaEV2ZW50KTogdm9pZCB7XHJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIHRoaXMuY2xpY2tlZCA9IGZhbHNlO1xyXG4gICAgaWYoQ29uZmlnLmdldFBvaW50ZXJGdW5jdGlvbigpID09ICd0aHJvdycpe1xyXG4gICAgICBsZXQgbGF1bmNoX2RpciA9IHRoaXMuY2xpY2tTdGFydFBvc2l0aW9uLmNsb25lKCkuZGlmZmVyZW5jZSh0aGlzLnBvaW50ZXJQb3NpdGlvbikubXVsdGlwbHkoMC4xKTtcclxuICAgIHBhcnRpY2xlcy5wdXNoKG5ldyBQYXJ0aWNsZSh0aGlzLmNsaWNrU3RhcnRQb3NpdGlvbi5jbG9uZSgpLCBDb25maWcuZ2V0R3JpZFNpemUoKS8yLCBsYXVuY2hfZGlyLCBnZXRSYW5kb21Db2xvcigpLCBncmlkKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGhhbmRsZU1vdmVFdmVudChldmVudDogTW91c2VFdmVudCB8IFRvdWNoRXZlbnQpOiB2b2lkIHtcclxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgaWYgKHRoaXMuY2xpY2tlZCkge1xyXG4gICAgICBpZiAoZXZlbnQgaW5zdGFuY2VvZiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5wb2ludGVyUG9zaXRpb24ueCA9IGV2ZW50LmNsaWVudFg7XHJcbiAgICAgICAgdGhpcy5wb2ludGVyUG9zaXRpb24ueSA9IGV2ZW50LmNsaWVudFk7XHJcbiAgICAgIH0gZWxzZSBpZiAoZXZlbnQgaW5zdGFuY2VvZiBUb3VjaEV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5wb2ludGVyUG9zaXRpb24ueCA9IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WDtcclxuICAgICAgICB0aGlzLnBvaW50ZXJQb3NpdGlvbi55ID0gZXZlbnQudG91Y2hlc1swXS5jbGllbnRZO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcblxyXG59IiwiaW1wb3J0ICogYXMgQ29uZmlnIGZyb20gJy4vQ29uZmlnJztcclxuaW1wb3J0IHsgUG9pbnRlckZ1bmN0aW9uVHlwZSB9IGZyb20gJy4vSW5wdXRIYW5kbGVyJztcclxuaW1wb3J0IFZlYzJEIGZyb20gXCIuL1ZlYzJEXCI7XHJcbmltcG9ydCB7IGdyaWQsIHBhcnRpY2xlcyB9IGZyb20gJy4vc2NyaXB0JztcclxuXHJcbmNvbnN0IG1lbnVCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1lbnUtYnV0dG9uXCIpO1xyXG5jb25zdCBtZW51RWxlbWVudHM6IE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tZW51LWVsZW1lbnRcIik7XHJcblxyXG5tZW51QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgb3Blbk1lbnUoKTtcclxufSk7XHJcblxyXG5jb25zdCBzd2l0Y2hUaGVtZSA9ICgpID0+IHtcclxuICBjb25zdCByb290RWxlbSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudFxyXG4gIGxldCB0aGVtZSA9IHJvb3RFbGVtLmdldEF0dHJpYnV0ZSgndGhlbWUnKSwgbmV3VGhlbWU7XHJcbiAgbmV3VGhlbWUgPSAodGhlbWUgPT09ICdsaWdodCcpID8gJ2RhcmsnIDogJ2xpZ2h0JztcclxuXHJcbiAgcm9vdEVsZW0uc2V0QXR0cmlidXRlKCd0aGVtZScsIG5ld1RoZW1lKTtcclxuICBncmlkLmRyYXcoKTtcclxufVxyXG5cclxuXHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0aGVtZS1zd2l0Y2gnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN3aXRjaFRoZW1lKTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBvcGVuTWVudSgpIHtcclxuICBpZiAobWVudUJ1dHRvbi5nZXRBdHRyaWJ1dGUoXCJvcGVuXCIpID09IFwiZmFsc2VcIikge1xyXG4gICAgbWVudUJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJvcGVuXCIsIFwidHJ1ZVwiKTtcclxuICAgIG1lbnVCdXR0b24uc3R5bGUuY3Vyc29yID0gXCJhdXRvXCI7XHJcblxyXG4gICAgbWVudUVsZW1lbnRzLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgfSwgMzAwKTtcclxuICAgIH0pO1xyXG5cclxuICB9XHJcbiAgZWxzZSB7XHJcblxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNsb3NlTWVudSgpIHtcclxuICBtZW51QnV0dG9uLnNldEF0dHJpYnV0ZShcIm9wZW5cIiwgXCJmYWxzZVwiKTtcclxuICBtZW51QnV0dG9uLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xyXG4gIG1lbnVFbGVtZW50cy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgfSk7XHJcblxyXG59XHJcblxyXG52YXIgZmllbGRTaXplU2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmaWVsZC1zaXplLXNsaWRlclwiKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG52YXIgZmllbGRTdHJlbmd0aFNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZmllbGQtc3RyZW5ndGgtc2xpZGVyXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbnZhciBncmF2aXR5U3RyZW5ndGhTbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdyYXZpdHktc3RyZW5ndGgtc2xpZGVyXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbnZhciBzdWJzdGVwc0Ftb3VudEVudHJ5Qm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdWJzdGVwcy1hbW91bnQtZW50cnlcIikgYXMgSFRNTElucHV0RWxlbWVudDtcclxudmFyIHBhcnRpY2xlc0Ftb3VudEVudHJ5Qm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwYXJ0aWNsZXMtYW1vdW50LWVudHJ5XCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbnZhciBneXJvRW5hYmxlZENoZWNrQm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJneXJvLXRvZ2dsZVwiKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuY29uc3QgcmFkaW9CdXR0b25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoJ2N1cnNvci1mdW5jdGlvbicpIGFzIE5vZGVMaXN0T2Y8SFRNTElucHV0RWxlbWVudD47XHJcblxyXG4gIHJhZGlvQnV0dG9ucy5mb3JFYWNoKHJhZGlvQnV0dG9uID0+IHtcclxuICAgIHJhZGlvQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcclxuICAgICAgaWYgKHJhZGlvQnV0dG9uLmNoZWNrZWQpIHtcclxuICAgICAgICBDb25maWcuc2V0UG9pbnRlckZ1bmN0aW9uKHJhZGlvQnV0dG9uLnZhbHVlIGFzIFBvaW50ZXJGdW5jdGlvblR5cGUpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbmZpZWxkU2l6ZVNsaWRlci5vbmlucHV0ID0gZnVuY3Rpb24gKCkge1xyXG4gIENvbmZpZy5zZXRGaWVsZFNpemUocGFyc2VJbnQoZmllbGRTaXplU2xpZGVyLnZhbHVlKSk7XHJcbn1cclxuXHJcbmZpZWxkU3RyZW5ndGhTbGlkZXIub25pbnB1dCA9IGZ1bmN0aW9uICgpIHtcclxuICBDb25maWcuc2V0RmllbGRTdHJlbmd0aChwYXJzZUludChmaWVsZFN0cmVuZ3RoU2xpZGVyLnZhbHVlKSk7XHJcbn1cclxuXHJcbmdyYXZpdHlTdHJlbmd0aFNsaWRlci5vbmlucHV0ID0gZnVuY3Rpb24gKCkge1xyXG4gIHNldEdyYXZpdHlTdHJlbmd0aChwYXJzZUludChncmF2aXR5U3RyZW5ndGhTbGlkZXIudmFsdWUpKTtcclxufVxyXG5cclxuc3Vic3RlcHNBbW91bnRFbnRyeUJveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgQ29uZmlnLnNldFBoeXNpY3NTdWJzdGVwc0Ftb3VudChwYXJzZUludChzdWJzdGVwc0Ftb3VudEVudHJ5Qm94LnZhbHVlKSk7XHJcbn0pO1xyXG5cclxuZ3lyb0VuYWJsZWRDaGVja0JveC5vbmlucHV0ID0gZnVuY3Rpb24gKCkge1xyXG4gIGlmICh0eXBlb2YgRGV2aWNlTW90aW9uRXZlbnQgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiAoRGV2aWNlTW90aW9uRXZlbnQgYXMgYW55KS5yZXF1ZXN0UGVybWlzc2lvbiA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgKERldmljZU1vdGlvbkV2ZW50IGFzIGFueSkucmVxdWVzdFBlcm1pc3Npb24oKS50aGVuKChyZXNwb25zZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlID09ICdncmFudGVkJykge1xyXG4gICAgICAgICAgICB0b2dnbGVHeXJvKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSkuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbn0gZWxzZSB7XHJcbiAgICB0b2dnbGVHeXJvKCk7XHJcbn1cclxuXHJcblxyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlR3lybygpe1xyXG4gIGlmIChneXJvRW5hYmxlZENoZWNrQm94LmNoZWNrZWQpIHtcclxuICAgIENvbmZpZy5zZXRJc0d5cm9FbmFibGVkKHRydWUpO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZW1vdGlvbicsIGhhbmRsZU1vdGlvbiwgdHJ1ZSk7XHJcbiAgfVxyXG4gIGVsc2Uge1xyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RldmljZW1vdGlvbicsIGhhbmRsZU1vdGlvbik7XHJcbiAgICBDb25maWcuc2V0SXNHeXJvRW5hYmxlZChmYWxzZSk7XHJcbiAgICBDb25maWcuc2V0R3Jhdml0eURpcmVjdGlvbihuZXcgVmVjMkQoMCwgMS4zKSk7XHJcbiAgfVxyXG59XHJcblxyXG5wYXJ0aWNsZXNBbW91bnRFbnRyeUJveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgQ29uZmlnLnNldFBhcnRpY2xlTnVtYmVyKHBhcnNlSW50KHBhcnRpY2xlc0Ftb3VudEVudHJ5Qm94LnZhbHVlKSk7XHJcbiAgbGV0IGRpZmYgPSBwYXJ0aWNsZXMubGVuZ3RoIC0gQ29uZmlnLmdldFBhcnRpY2xlTnVtYmVyKCk7XHJcbiAgd2hpbGUoIGRpZmYgPiAwKXtcclxuICAgcGFydGljbGVzLnBvcCgpO1xyXG4gICBkaWZmLS07XHJcbiAgfVxyXG59KTtcclxuXHJcblxyXG5mdW5jdGlvbiBoYW5kbGVNb3Rpb24oZXZlbnQ6IERldmljZU1vdGlvbkV2ZW50KTogdm9pZCB7XHJcbiAgaWYoQ29uZmlnLmlzR3lyb0VuYWJsZWQoKSl7XHJcbiAgQ29uZmlnLnNldEdyYXZpdHlEaXJlY3Rpb24obmV3IFZlYzJEKC1ldmVudC5hY2NlbGVyYXRpb25JbmNsdWRpbmdHcmF2aXR5LngvNSxldmVudC5hY2NlbGVyYXRpb25JbmNsdWRpbmdHcmF2aXR5LnkvNSkpO1xyXG4gIH0gZWxzZXtcclxuICAgIENvbmZpZy5zZXRHcmF2aXR5RGlyZWN0aW9uKG5ldyBWZWMyRCgwLCAxLjMpKTtcclxuICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUG9pbnRlckZ1bmN0aW9uKCkge1xyXG4gIHZhciByYWRpb0J1dHRvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgnY3Vyc29yLWZ1bmN0aW9uJykgYXMgTm9kZUxpc3RPZjxIVE1MSW5wdXRFbGVtZW50PlxyXG5cclxuICBmb3IgKHZhciBpID0gMDsgaSA8IHJhZGlvQnV0dG9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgaWYgKHJhZGlvQnV0dG9uc1tpXS5jaGVja2VkKSB7XHJcbiAgICAgIHJldHVybiByYWRpb0J1dHRvbnNbaV0udmFsdWU7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0R3Jhdml0eVN0cmVuZ3RoKHZhbHVlOiBudW1iZXIpIHtcclxuICBDb25maWcuc2V0R3Jhdml0eURpcmVjdGlvbihuZXcgVmVjMkQoMCwgdmFsdWUgKiAwLjEpKTtcclxufVxyXG4iLCJpbXBvcnQgeyBHcmlkIH0gZnJvbSBcIi4vR3JpZFwiO1xyXG5pbXBvcnQgVmVjMkQgZnJvbSBcIi4vVmVjMkRcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFydGljbGUge1xyXG4gIHN0YXRpYyBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9yZWdyb3VuZC1jYW52YXMnKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcclxuXHJcbiAgcHVibGljIHBvc2l0aW9uOiBWZWMyRDtcclxuICBwdWJsaWMgYWNjZWxlcmF0aW9uOiBWZWMyRDtcclxuICBwdWJsaWMgdmVsb2NpdHk6IFZlYzJEO1xyXG4gIHB1YmxpYyByYWRpdXM6IG51bWJlcjtcclxuICBwdWJsaWMgY29sb3I6IHsgcjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlciB9O1xyXG4gIHByaXZhdGUgZ3JpZDogR3JpZDtcclxuICBwcml2YXRlIGNlbGw6IFZlYzJEO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwb3M6IFZlYzJELCByYWRpdXM6IG51bWJlciwgdmVsb2NpdHk6IFZlYzJELCBjb2xvcjogeyByOiBudW1iZXIsIGc6IG51bWJlciwgYjogbnVtYmVyIH0sIGdyaWQ6IEdyaWQpIHtcclxuICAgIHRoaXMucG9zaXRpb24gPSBwb3M7XHJcbiAgICB0aGlzLnZlbG9jaXR5ID0gdmVsb2NpdHk7XHJcbiAgICB0aGlzLmFjY2VsZXJhdGlvbiA9IG5ldyBWZWMyRCgwLDApO1xyXG4gICAgdGhpcy5yYWRpdXMgPSByYWRpdXM7XHJcbiAgICB0aGlzLmNvbG9yID0gY29sb3I7XHJcbiAgICB0aGlzLmdyaWQgPSBncmlkO1xyXG4gICAgdGhpcy5jZWxsID0gbmV3IFZlYzJEKE1hdGguZmxvb3IodGhpcy5wb3NpdGlvbi54IC8gZ3JpZC5waXhlbFNpemUpLCBNYXRoLmZsb29yKHRoaXMucG9zaXRpb24ueSAvIGdyaWQucGl4ZWxTaXplKSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVQb3NpdGlvbihkdDogbnVtYmVyKSB7XHJcbiAgICAvLyBsZXQgdmVsb2NpdHk6IFZlYzJEID0gbmV3IFZlYzJEKHRoaXMuY3VycmVudFBvc2l0aW9uLnggLSB0aGlzLnByZXZpb3VzUG9zaXRpb24ueCwgdGhpcy5jdXJyZW50UG9zaXRpb24ueSAtIHRoaXMucHJldmlvdXNQb3NpdGlvbi55KTtcclxuXHJcbiAgICAvLyBsZXQgc3EgPSB0aGlzLnZlbG9jaXR5LnNxdWFyZWRMZW5ndGgoKVxyXG4gICAgLy8gbGV0IGRyYWcgPSB0aGlzLnZlbG9jaXR5LmNsb25lKCkubXVsdGlwbHkoLTEgKiBzcSAqIDAuMDAwMDAwNSlcclxuICAgIC8vIHRoaXMudmVsb2NpdHkuYWRkKGRyYWcpXHJcblxyXG5cclxuICAgIGxldCBtb3ZlRGVsdGEgPSB0aGlzLnZlbG9jaXR5LmFkZCh0aGlzLmFjY2VsZXJhdGlvbi5tdWx0aXBseSgoZHQpKSkuY2xvbmUoKVxyXG4gICAgXHJcbiAgICBtb3ZlRGVsdGEubXVsdGlwbHkoZHQpXHJcblxyXG4gICAgXHJcblxyXG5cclxuICAgIHRoaXMucG9zaXRpb24uYWRkKG1vdmVEZWx0YSk7XHJcblxyXG4gICAgdGhpcy5hY2NlbGVyYXRpb24ueCA9IDA7XHJcbiAgICB0aGlzLmFjY2VsZXJhdGlvbi55ID0gMDtcclxuXHJcbiAgICB0aGlzLnVwZGF0ZUNlbGwoKTtcclxuICB9XHJcblxyXG4gIGFjY2VsZXJhdGUoYWNjOiBWZWMyRCkge1xyXG4gICAgdGhpcy5hY2NlbGVyYXRpb24uYWRkKGFjYyk7XHJcbiAgfVxyXG5cclxuXHJcbiAgZ2V0TmVpZ2hib3JpbmdQYXJ0aWNsZXMoKTogUGFydGljbGVbXSB7XHJcbiAgICBjb25zdCBuZWlnaGJvcmluZ1BhcnRpY2xlczogUGFydGljbGVbXSA9IFtdO1xyXG4gIFxyXG4gICAgZm9yIChsZXQgaSA9IHRoaXMuY2VsbC54IC0gMTsgaSA8PSB0aGlzLmNlbGwueCArIDE7IGkrKykge1xyXG4gICAgICBmb3IgKGxldCBqID0gdGhpcy5jZWxsLnkgLSAxOyBqIDw9IHRoaXMuY2VsbC55ICsgMTsgaisrKSB7XHJcbiAgICAgICAgaWYgKGkgPj0gMCAmJiBpIDwgdGhpcy5ncmlkLmNvbHVtbnMgJiYgaiA+PSAwICYmIGogPCB0aGlzLmdyaWQucm93cykge1xyXG4gICAgICAgICAgbmVpZ2hib3JpbmdQYXJ0aWNsZXMucHVzaCguLi50aGlzLmdyaWQuY2VsbHNbaV1bal0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5laWdoYm9yaW5nUGFydGljbGVzO1xyXG4gIH1cclxuICBcclxuICB1cGRhdGVDZWxsKCl7XHJcbiAgICB0aGlzLmNlbGwgPSBuZXcgVmVjMkQoTWF0aC5mbG9vcih0aGlzLnBvc2l0aW9uLnggLyB0aGlzLmdyaWQucGl4ZWxTaXplKSwgTWF0aC5mbG9vcih0aGlzLnBvc2l0aW9uLnkgLyB0aGlzLmdyaWQucGl4ZWxTaXplKSk7XHJcbiAgfVxyXG5cclxuXHJcblxyXG59IiwiaW1wb3J0IHsgZm9yZWdyb3VuZENhbnZhcyB9IGZyb20gJy4vQ2FudmFzTWFuYWdlcic7XHJcbmltcG9ydCAqIGFzIENvbmZpZyBmcm9tICcuL0NvbmZpZyc7XHJcbmltcG9ydCB7IElucHV0SGFuZGxlciB9IGZyb20gJy4vSW5wdXRIYW5kbGVyJztcclxuaW1wb3J0IFBhcnRpY2xlIGZyb20gJy4vUGFydGljbGUnO1xyXG5pbXBvcnQgVmVjMkQgZnJvbSAnLi9WZWMyRCc7XHJcbmltcG9ydCB7IGF0dHJhY3RvcnMsIGdyaWQsIHBhcnRpY2xlcyB9IGZyb20gJy4vc2NyaXB0JztcclxuXHJcbmNvbnN0IGlucHV0SGFuZGxlciA9IElucHV0SGFuZGxlci5nZXRJbnN0YW5jZSgpO1xyXG5sZXQgcHJldmlvdXNTY3JlZW5YPSAwLCBwcmV2aW91c1NjcmVlblkgPSAwLCBwcmV2aW91c1ZlbG9jaXR5ID0gbmV3IFZlYzJEKDAsMClcclxuZnVuY3Rpb24gdXBkYXRlUG9zaXRpb25zKGR0OiBudW1iZXIpIHtcclxuICAgIGdyaWQucmVtb3ZlQWxsKCk7XHJcbiAgICBwYXJ0aWNsZXMuZm9yRWFjaCgocGFydGljbGUpID0+IHtcclxuICBcclxuICAgICAgcGFydGljbGUudXBkYXRlUG9zaXRpb24oZHQpO1xyXG4gICAgICBncmlkLnB1dChwYXJ0aWNsZSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgXHJcbiAgZnVuY3Rpb24gYXBwbHlHcmF2aXR5KCkge1xyXG4gICAgcGFydGljbGVzLmZvckVhY2goKHBhcnRpY2xlKSA9PiB7XHJcbiAgICAgIHBhcnRpY2xlLmFjY2VsZXJhdGUoQ29uZmlnLmdldEdyYXZpdHlEaXJlY3Rpb24oKSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGFwcGx5QWNjZWxlcmF0aW9uKGFjYzogVmVjMkQpe1xyXG4gICAgcGFydGljbGVzLmZvckVhY2goKHBhcnRpY2xlKSA9PiB7XHJcbiAgICAgIHBhcnRpY2xlLmFjY2VsZXJhdGUoYWNjKVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGFwcGx5VmVsb2NpdHkodmVsOiBWZWMyRCl7XHJcbiAgICBwYXJ0aWNsZXMuZm9yRWFjaCgocGFydGljbGUpID0+IHtcclxuICAgICAgcGFydGljbGUudmVsb2NpdHkuYWRkKHZlbClcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gbW92ZUFsbFBhcnRpY2xlcyh2ZWM6IFZlYzJEKXtcclxuICAgIHBhcnRpY2xlcy5mb3JFYWNoKChwYXJ0aWNsZSkgPT4ge1xyXG4gICAgICBwYXJ0aWNsZS5wb3NpdGlvbi5hZGQodmVjKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBcclxuICBmdW5jdGlvbiBhcHBseUZpZWxkKGZpZWxkUG9zOiBWZWMyRCkge1xyXG4gICAgcGFydGljbGVzLmZvckVhY2goKHBhcnRpY2xlKSA9PiB7XHJcbiAgICAgIGNvbnN0IHB1bGxEaXJlY3Rpb24gPSBmaWVsZFBvcy5kaWZmZXJlbmNlKHBhcnRpY2xlLnBvc2l0aW9uKTtcclxuICAgICAgY29uc3QgZGlzdGFuY2UgPSBwdWxsRGlyZWN0aW9uLmxlbmd0aCgpO1xyXG4gIFxyXG4gICAgICBpZiAoZGlzdGFuY2UgPCBDb25maWcuZ2V0RmllbGRTaXplKCkgJiYgZGlzdGFuY2UgPiAxMCkge1xyXG4gICAgICAgIHB1bGxEaXJlY3Rpb24ubXVsdGlwbHkoQ29uZmlnLmdldEZpZWxkU3RyZW5ndGgoKSAqIDEwMCk7XHJcbiAgICAgICAgcHVsbERpcmVjdGlvbi5kaXZpZGUoZGlzdGFuY2UgKiBkaXN0YW5jZSk7XHJcbiAgICAgICAgcGFydGljbGUuYWNjZWxlcmF0ZShwdWxsRGlyZWN0aW9uKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIFxyXG4gIGV4cG9ydCBmdW5jdGlvbiBhcHBseUF0dHJhY3RvckZvcmNlc1RvQWxsKCkge1xyXG4gICAgcGFydGljbGVzLmZvckVhY2goKHBhcnRpY2xlKSA9PiB7XHJcbiAgICAgIGFwcGx5QXR0cmFjdG9yRm9yY2VzKHBhcnRpY2xlKVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgZXhwb3J0IGZ1bmN0aW9uIHRpY2soZHQ6IG51bWJlcikge1xyXG4gICAgdmFyIHN1Yl9kdCA9IGR0IC8gQ29uZmlnLmdldFBoeXNpY3NTdWJzdGVwc0Ftb3VudCgpO1xyXG4gICAgXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IENvbmZpZy5nZXRQaHlzaWNzU3Vic3RlcHNBbW91bnQoKTsgaSsrKSB7XHJcbiAgICAgIGlmIChDb25maWcuZ2V0R3Jhdml0eURpcmVjdGlvbigpLnkgIT0gMCkge1xyXG4gICAgICAgIGFwcGx5R3Jhdml0eSgpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBpZiAoaW5wdXRIYW5kbGVyLmNsaWNrZWQpIHtcclxuICAgICAgICBzd2l0Y2ggKENvbmZpZy5nZXRQb2ludGVyRnVuY3Rpb24oKSkge1xyXG4gICAgICAgICAgY2FzZSAnZmllbGQnOlxyXG4gICAgICAgICAgICBhcHBseUZpZWxkKGlucHV0SGFuZGxlci5wb2ludGVyUG9zaXRpb24pO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgJ2dyYXZpdHknOlxyXG4gICAgICAgICAgICBDb25maWcuc2V0R3Jhdml0eURpcmVjdGlvbihpbnB1dEhhbmRsZXIucG9pbnRlclBvc2l0aW9uLmRpZmZlcmVuY2UoaW5wdXRIYW5kbGVyLmNsaWNrU3RhcnRQb3NpdGlvbikuZGl2aWRlKDQwMCkpO1xyXG4gICAgICAgICAgY2FzZSAndGhyb3cnOlxyXG4gICAgICAgICAgICBicmVhaztcclxuICBcclxuICAgICAgICB9XHJcbiAgXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGRlbHRhWCA9IHdpbmRvdy5zY3JlZW5YIC0gcHJldmlvdXNTY3JlZW5YO1xyXG4gICAgICBjb25zdCBkZWx0YVkgPSB3aW5kb3cuc2NyZWVuWSAtIHByZXZpb3VzU2NyZWVuWTtcclxuICAgICAgY29uc3Qgc2NyZWVuVmVsb2NpdHkgPSBuZXcgVmVjMkQoLWRlbHRhWCwgLWRlbHRhWSk7XHJcbiAgICAgIGlmIChkZWx0YVggIT0gMCB8fCBkZWx0YVkgIT0gMCApe1xyXG4gICAgICAgICBtb3ZlQWxsUGFydGljbGVzKHNjcmVlblZlbG9jaXR5KTtcclxuICAgICAgICAvL2FwcGx5VmVsb2NpdHkoc2NyZWVuVmVsb2NpdHkubXVsdGlwbHkoMC4xKSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcblxyXG4gICAgICBwcmV2aW91c1NjcmVlblggPSB3aW5kb3cuc2NyZWVuWDtcclxuICAgICAgcHJldmlvdXNTY3JlZW5ZID0gd2luZG93LnNjcmVlblk7XHJcblxyXG5cclxuICAgICAgLy8gYXBwbHlBdHRyYWN0b3JGb3JjZXNUb0FsbCgpO1xyXG4gICAgICBhcHBseUNvbnN0cmFpbnRUb0FsbEVkZ2VzKCk7XHJcbiAgICAgIHNvbHZlQ29sbGlzaW9ucygpO1xyXG4gICAgICB1cGRhdGVQb3NpdGlvbnMoc3ViX2R0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGFwcGx5Q29uc3RyYWludFRvQWxsRWRnZXMoKSB7XHJcblxyXG4gICAgcGFydGljbGVzLmZvckVhY2goKHBhcnRpY2xlKSA9PiB7XHJcbiAgICAgIGFwcGx5Q29uc3RyYWludChwYXJ0aWNsZSk7XHJcbiAgICB9KTtcclxuICAgIC8vIGZvciAodmFyIGNvbCA9IDA7IGNvbCA8IGdyaWQubGVuZ3RoOyBjb2wrKykge1xyXG4gICAgLy8gICBmb3IgKHZhciB0aGlja25lc3MgPSAwOyB0aGlja25lc3MgPCAyOyB0aGlja25lc3MrKykge1xyXG4gICAgLy8gICAgIGdyaWRbY29sXVt0aGlja25lc3NdLmZvckVhY2goKHBhcnRpY2xlKSA9PiB7XHJcbiAgICAvLyAgICAgICBhcHBseUNvbnN0cmFpbnQocGFydGljbGUpO1xyXG4gICAgLy8gICAgIH0pO1xyXG4gIFxyXG4gICAgLy8gICAgIGdyaWRbY29sXVtncmlkWzBdLmxlbmd0aCAtIHRoaWNrbmVzcyAtIDFdLmZvckVhY2goKHBhcnRpY2xlKSA9PiB7XHJcbiAgICAvLyAgICAgICBhcHBseUNvbnN0cmFpbnQocGFydGljbGUpO1xyXG4gICAgLy8gICAgIH0pO1xyXG4gICAgLy8gICB9XHJcbiAgICAvLyB9XHJcbiAgXHJcbiAgICAvLyBmb3IgKHZhciByb3cgPSAwOyByb3cgPCBncmlkWzBdLmxlbmd0aDsgcm93KyspIHtcclxuICAgIC8vICAgZm9yICh2YXIgdGhpY2tuZXNzID0gMDsgdGhpY2tuZXNzIDwgMjsgdGhpY2tuZXNzKyspIHtcclxuICAgIC8vICAgICBncmlkW3RoaWNrbmVzc11bcm93XS5mb3JFYWNoKChwYXJ0aWNsZSkgPT4ge1xyXG4gICAgLy8gICAgICAgYXBwbHlDb25zdHJhaW50KHBhcnRpY2xlKTtcclxuICAgIC8vICAgICB9KTtcclxuICBcclxuICAgIC8vICAgICBncmlkW2dyaWQubGVuZ3RoIC0gdGhpY2tuZXNzIC0gMV1bcm93XS5mb3JFYWNoKChwYXJ0aWNsZSkgPT4ge1xyXG4gICAgLy8gICAgICAgYXBwbHlDb25zdHJhaW50KHBhcnRpY2xlKTtcclxuICAgIC8vICAgICB9KTtcclxuICAgIC8vICAgfVxyXG4gICAgLy8gfVxyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGZ1bmN0aW9uIGFwcGx5Q29uc3RyYWludChwYXJ0aWNsZTogUGFydGljbGUpIHtcclxuICAgIC8vIEFwcGx5IGZsb29yIGNvbnN0cmFpbnRcclxuICAgIGlmIChwYXJ0aWNsZS5wb3NpdGlvbi55ICsgcGFydGljbGUucmFkaXVzID49IGZvcmVncm91bmRDYW52YXMuaGVpZ2h0KSB7XHJcbiAgICAgIHBhcnRpY2xlLnZlbG9jaXR5ID0gbmV3IFZlYzJEKHBhcnRpY2xlLnZlbG9jaXR5LngqIDAuOTkyLCAtTWF0aC5hYnMocGFydGljbGUudmVsb2NpdHkueSAqIDAuNikpXHJcbiAgICAgIHBhcnRpY2xlLnBvc2l0aW9uLnkgPSBmb3JlZ3JvdW5kQ2FudmFzLmhlaWdodCAtIHBhcnRpY2xlLnJhZGl1cztcclxuXHJcbiAgICB9XHJcbiAgXHJcbiAgICAvLyBBcHBseSBDZWlsaW5nIGNvbnN0cmFpbnRcclxuICAgIGlmIChwYXJ0aWNsZS5wb3NpdGlvbi55IC0gcGFydGljbGUucmFkaXVzIDw9IDApIHtcclxuICAgICAgcGFydGljbGUucG9zaXRpb24ueSA9IHBhcnRpY2xlLnJhZGl1cztcclxuICAgICAgcGFydGljbGUudmVsb2NpdHkgPSBuZXcgVmVjMkQocGFydGljbGUudmVsb2NpdHkueCwgTWF0aC5hYnMocGFydGljbGUudmVsb2NpdHkueSAqIDAuNikpXHJcbiAgICB9XHJcbiAgXHJcbiAgXHJcbiAgICAvLyBBcHBseSBsZWZ0IHdhbGwgY29uc3RyYWludFxyXG4gICAgaWYgKHBhcnRpY2xlLnBvc2l0aW9uLnggLSBwYXJ0aWNsZS5yYWRpdXMgPD0gMCkge1xyXG4gICAgICBwYXJ0aWNsZS5wb3NpdGlvbi54ID0gcGFydGljbGUucmFkaXVzO1xyXG4gICAgICBwYXJ0aWNsZS52ZWxvY2l0eSA9IG5ldyBWZWMyRChNYXRoLmFicyhwYXJ0aWNsZS52ZWxvY2l0eS54ICogMC42KSwgcGFydGljbGUudmVsb2NpdHkueSlcclxuICAgIH1cclxuICBcclxuICAgIC8vIEFwcGx5IHJpZ2h0IHdhbGwgY29uc3RyYWludFxyXG4gICAgaWYgKHBhcnRpY2xlLnBvc2l0aW9uLnggKyBwYXJ0aWNsZS5yYWRpdXMgPj0gZm9yZWdyb3VuZENhbnZhcy53aWR0aCkge1xyXG4gICAgICBwYXJ0aWNsZS52ZWxvY2l0eSA9IG5ldyBWZWMyRCgtTWF0aC5hYnMocGFydGljbGUudmVsb2NpdHkueCAqIDAuNiksIHBhcnRpY2xlLnZlbG9jaXR5LnkpXHJcbiAgICAgIHBhcnRpY2xlLnBvc2l0aW9uLnggPSBmb3JlZ3JvdW5kQ2FudmFzLndpZHRoIC0gcGFydGljbGUucmFkaXVzO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGZ1bmN0aW9uIGFwcGx5QXR0cmFjdG9yRm9yY2VzKHBhcnRpY2xlOiBQYXJ0aWNsZSkge1xyXG4gICAgYXR0cmFjdG9ycy5mb3JFYWNoKChhdHRyYWN0b3IpID0+IHtcclxuICAgICAgY29uc3QgcHVsbERpcmVjdGlvbiA9IGF0dHJhY3Rvci5wb3NpdGlvbi5kaWZmZXJlbmNlKHBhcnRpY2xlLnBvc2l0aW9uKVxyXG4gICAgICBjb25zdCBkaXN0YW5jZSA9IHB1bGxEaXJlY3Rpb24ubGVuZ3RoKCk7XHJcbiAgXHJcbiAgICAgIGlmIChkaXN0YW5jZSA8IGF0dHJhY3Rvci5yYWRpdXMgJiYgZGlzdGFuY2UgPiAxMCkge1xyXG4gICAgICAgIHB1bGxEaXJlY3Rpb24ubXVsdGlwbHkoYXR0cmFjdG9yLmZvcmNlKTtcclxuICAgICAgICBwdWxsRGlyZWN0aW9uLmRpdmlkZShkaXN0YW5jZSAqIGRpc3RhbmNlKVxyXG4gICAgICAgIHBhcnRpY2xlLmFjY2VsZXJhdGUocHVsbERpcmVjdGlvbik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBcclxuICBmdW5jdGlvbiBzb2x2ZUNvbGxpc2lvbnMyKCkge1xyXG4gICAgcGFydGljbGVzLmZvckVhY2goKHBhcnRpY2xlMSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG5laWdoYm9yaW5nUGFydGljbGVzID0gcGFydGljbGUxLmdldE5laWdoYm9yaW5nUGFydGljbGVzKCk7XHJcbiAgICAgICAgbmVpZ2hib3JpbmdQYXJ0aWNsZXMuZm9yRWFjaCgocGFydGljbGUyKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0aWNsZTEgPT09IHBhcnRpY2xlMikgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgbGV0IHNxdWFyZWREaXN0YW5jZSA9IHBhcnRpY2xlMS5wb3NpdGlvbi5zcXVhcmVkRGlzdGFuY2VUbyhwYXJ0aWNsZTIucG9zaXRpb24pO1xyXG5cclxuICAgICAgICAgICAgLy9jaGVjayBpZiB0aGUgY29sbGlzaW9uIG9jY3VycmVkLCBpZiBubywgcmV0dXJuXHJcbiAgICAgICAgICAgIGlmIChzcXVhcmVkRGlzdGFuY2UgPiAocGFydGljbGUxLnJhZGl1cyArIHBhcnRpY2xlMi5yYWRpdXMpKioyKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBsZXQgZGlzdGFuY2UgPSBNYXRoLnNxcnQoc3F1YXJlZERpc3RhbmNlKTtcclxuICAgICAgICAgICAgbGV0IGNvbGxpc2lvbk5vcm1hbCA9IG5ldyBWZWMyRCgocGFydGljbGUyLnBvc2l0aW9uLnggLSBwYXJ0aWNsZTEucG9zaXRpb24ueCkvIGRpc3RhbmNlLCAocGFydGljbGUyLnBvc2l0aW9uLnkgLSBwYXJ0aWNsZTEucG9zaXRpb24ueSkgLyBkaXN0YW5jZSk7XHJcblxyXG4gICAgICAgICAgICAvL25vIG5lZWQgdG8gbXVsdGlwbHkgYnkgMiwgYmVjYXVzZSBtMSsgbTIgaXMgMlxyXG4gICAgICAgICAgICBsZXQgcCA9IChwYXJ0aWNsZTEudmVsb2NpdHkueCAqIGNvbGxpc2lvbk5vcm1hbC54ICsgcGFydGljbGUxLnZlbG9jaXR5LnkgKiBjb2xsaXNpb25Ob3JtYWwueSAtIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0aWNsZTIudmVsb2NpdHkueCAqIGNvbGxpc2lvbk5vcm1hbC54ICsgcGFydGljbGUyLnZlbG9jaXR5LnkgKiBjb2xsaXNpb25Ob3JtYWwueSk7XHJcbiAgICAgICAgICAgIHBhcnRpY2xlMS52ZWxvY2l0eS5zZXQobmV3IFZlYzJEKHBhcnRpY2xlMS52ZWxvY2l0eS54IC0gcCAqIGNvbGxpc2lvbk5vcm1hbC54LCBwYXJ0aWNsZTEudmVsb2NpdHkueSAtIHAgKiBjb2xsaXNpb25Ob3JtYWwueSkpXHJcbiAgICAgICAgICAgIHBhcnRpY2xlMi52ZWxvY2l0eS5zZXQobmV3IFZlYzJEKHBhcnRpY2xlMi52ZWxvY2l0eS54ICsgcCAqIGNvbGxpc2lvbk5vcm1hbC54LCBwYXJ0aWNsZTIudmVsb2NpdHkueSArIHAgKiBjb2xsaXNpb25Ob3JtYWwueSkpXHJcblxyXG5cclxuICAgICAgICAgICAgLy8gdGVtcENvbGxpc2lvbkRpcmVjdGlvbi5zZXQocGFydGljbGUxLmN1cnJlbnRQb3NpdGlvbikuc3VidHJhY3QocGFydGljbGUyLmN1cnJlbnRQb3NpdGlvbik7XHJcbiAgICAgICAgICAgIC8vIHNxdWFyZWREaXN0YW5jZSA9IHRlbXBDb2xsaXNpb25EaXJlY3Rpb24uc3F1YXJlZExlbmd0aCgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gcmFkaWlTdW0gPSBwYXJ0aWNsZTEucmFkaXVzICsgcGFydGljbGUyLnJhZGl1cztcclxuICAgICAgICAgICAgLy8gc3F1YXJlZFJhZGlpU3VtID0gcmFkaWlTdW0gKiByYWRpaVN1bTtcclxuXHJcbiAgICAgICAgICAgIC8vIGlmIChzcXVhcmVkRGlzdGFuY2UgPCBzcXVhcmVkUmFkaWlTdW0gJiYgc3F1YXJlZERpc3RhbmNlICE9PSAwKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBudW1iZXJPZkNvbGxpc2lvbnMrKztcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyAgICAgbGV0IGRpc3RhbmNlID0gTWF0aC5zcXJ0KHNxdWFyZWREaXN0YW5jZSk7XHJcbiAgICAgICAgICAgIC8vICAgICBsZXQgbm9ybWFsID0gdGVtcENvbGxpc2lvbkRpcmVjdGlvbi5kaXZpZGUoZGlzdGFuY2UpO1xyXG4gICAgICAgICAgICAvLyAgICAgbGV0IGRlbHRhID0gcmFkaWlTdW0gLSBkaXN0YW5jZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBNb3ZlIHBhcnRpY2xlcyBhcGFydCBiYXNlZCBvbiB0aGVpciBvdmVybGFwXHJcbiAgICAgICAgICAgIC8vIGxldCBkaXNwbGFjZW1lbnQgPSBub3JtYWwubXVsdGlwbHkoZGVsdGEgKiAwLjUpO1xyXG4gICAgICAgICAgICAvLyBwYXJ0aWNsZTEuY3VycmVudFBvc2l0aW9uLmFkZChkaXNwbGFjZW1lbnQpO1xyXG4gICAgICAgICAgICAvLyBwYXJ0aWNsZTIuY3VycmVudFBvc2l0aW9uLnN1YnRyYWN0KGRpc3BsYWNlbWVudCk7XHJcbiAgICAgICAgICAgIGxldCBkZWx0YSA9IChwYXJ0aWNsZTEucmFkaXVzICsgcGFydGljbGUyLnJhZGl1cykgLSBkaXN0YW5jZTtcclxuICAgICAgICAgICAgY29sbGlzaW9uTm9ybWFsLm11bHRpcGx5KGRlbHRhICogMC42KVxyXG5cclxuICAgICAgICAgICAgcGFydGljbGUxLnBvc2l0aW9uLnN1YnRyYWN0KGNvbGxpc2lvbk5vcm1hbCk7XHJcbiAgICAgICAgICAgIHBhcnRpY2xlMi5wb3NpdGlvbi5hZGQoY29sbGlzaW9uTm9ybWFsKTtcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIC8vIGNvbnNvbGUubG9nKG51bWJlck9mQ29sbGlzaW9ucyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNvbHZlQ29sbGlzaW9ucygpIHtcclxuICB2YXIgbnVtYmVyT2ZDb2xsaXNpb25zID0gMDtcclxuXHJcblxyXG4gIGxldCB0ZW1wQ29sbGlzaW9uRGlyZWN0aW9uID0gbmV3IFZlYzJEKDAsIDApO1xyXG4gIGxldCBzcXVhcmVkRGlzdGFuY2UgPSAwO1xyXG4gIGxldCByYWRpaVN1bSA9IDA7XHJcbiAgbGV0IHNxdWFyZWRSYWRpaVN1bSA9IDA7XHJcblxyXG4gIHBhcnRpY2xlcy5mb3JFYWNoKChwYXJ0aWNsZTEpID0+IHtcclxuICAgIGNvbnN0IG5laWdoYm9yaW5nUGFydGljbGVzID0gcGFydGljbGUxLmdldE5laWdoYm9yaW5nUGFydGljbGVzKCk7XHJcbiAgICBuZWlnaGJvcmluZ1BhcnRpY2xlcy5mb3JFYWNoKChwYXJ0aWNsZTIpID0+IHtcclxuICAgICAgaWYgKHBhcnRpY2xlMSA9PT0gcGFydGljbGUyKSByZXR1cm47XHJcblxyXG4gICAgICB0ZW1wQ29sbGlzaW9uRGlyZWN0aW9uLnNldChwYXJ0aWNsZTEucG9zaXRpb24pLnN1YnRyYWN0KHBhcnRpY2xlMi5wb3NpdGlvbik7XHJcbiAgICAgIHNxdWFyZWREaXN0YW5jZSA9IHRlbXBDb2xsaXNpb25EaXJlY3Rpb24uc3F1YXJlZExlbmd0aCgpO1xyXG4gICAgICBcclxuICAgICAgcmFkaWlTdW0gPSBwYXJ0aWNsZTEucmFkaXVzICsgcGFydGljbGUyLnJhZGl1cztcclxuICAgICAgc3F1YXJlZFJhZGlpU3VtID0gcmFkaWlTdW0gKiByYWRpaVN1bTtcclxuXHJcbiAgICAgIGlmIChzcXVhcmVkRGlzdGFuY2UgPCBzcXVhcmVkUmFkaWlTdW0gJiYgc3F1YXJlZERpc3RhbmNlICE9IDApIHtcclxuICAgICAgICBudW1iZXJPZkNvbGxpc2lvbnMrKztcclxuICAgICAgICBcclxuICAgICAgICAgIGxldCBkaXN0YW5jZSA9IE1hdGguc3FydChzcXVhcmVkRGlzdGFuY2UpO1xyXG4gICAgICAgICAgdGVtcENvbGxpc2lvbkRpcmVjdGlvbi5kaXZpZGUoZGlzdGFuY2UpO1xyXG4gICAgICBcclxuICAgICAgICAgIGxldCBkZWx0YSA9IHJhZGlpU3VtIC0gZGlzdGFuY2U7XHJcbiAgICAgICAgICB0ZW1wQ29sbGlzaW9uRGlyZWN0aW9uLm11bHRpcGx5KGRlbHRhICogMC41KTtcclxuICAgICAgXHJcbiAgICAgICAgICBwYXJ0aWNsZTEucG9zaXRpb24uYWRkKHRlbXBDb2xsaXNpb25EaXJlY3Rpb24pO1xyXG4gICAgICAgICAgcGFydGljbGUyLnBvc2l0aW9uLnN1YnRyYWN0KHRlbXBDb2xsaXNpb25EaXJlY3Rpb24pO1xyXG4gICAgICAgICAgdGVtcENvbGxpc2lvbkRpcmVjdGlvbi5tdWx0aXBseSg2KVxyXG4gICAgICAgICAgcGFydGljbGUxLnZlbG9jaXR5LmFkZCh0ZW1wQ29sbGlzaW9uRGlyZWN0aW9uKS5hZGQobmV3IFZlYzJEICgoMSAtIE1hdGgucmFuZG9tKCkqMikvMTAwMCwgKDEgLSBNYXRoLnJhbmRvbSgpKjIpLzEwMDApKTtcclxuICAgICAgICAgIHBhcnRpY2xlMi52ZWxvY2l0eS5zdWJ0cmFjdCh0ZW1wQ29sbGlzaW9uRGlyZWN0aW9uKS5hZGQobmV3IFZlYzJEICgoMSAtIE1hdGgucmFuZG9tKCkqMikvMTAwMCwgKDEgLSBNYXRoLnJhbmRvbSgpKjIpLzEwMDApKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcbiAgLy8gY29uc29sZS5sb2cobnVtYmVyT2ZDb2xsaXNpb25zKTtcclxufVxyXG5cclxuIiwiaW1wb3J0IFZlYzJEIGZyb20gXCIuL1ZlYzJEXCI7XHJcbmltcG9ydCAqIGFzIENvbmZpZyBmcm9tICcuL0NvbmZpZyc7XHJcbmltcG9ydCBwYXJ0aWNsZUZyYWdtZW50U2hhZGVyIGZyb20gXCIuL3NoYWRlcnMvcGFydGljbGVGcmFnbWVudFNoYWRlci5mcmFnXCI7XHJcbmltcG9ydCBwYXJ0aWNsZVZlcnRleFNoYWRlciBmcm9tIFwiLi9zaGFkZXJzL3BhcnRpY2xlVmVydGV4U2hhZGVyLnZlcnRcIjtcclxuaW1wb3J0IHsgY3JlYXRlUHJvZ3JhbSwgY3JlYXRlU2hhZGVyLCByZXNpemVDYW52YXNUb0Rpc3BsYXlTaXplIH0gZnJvbSBcIi4vU2hhZGVySGVscGVyXCI7XHJcbmltcG9ydCBBdHRyYWN0b3IgZnJvbSBcIi4vQXR0cmFjdG9yXCI7XHJcbmltcG9ydCB7IGJhY2tncm91bmRDYW52YXNDdHgsIGZvcmVncm91bmRDYW52YXMsIGZvcmVncm91bmRDYW52YXNDdHggfSBmcm9tIFwiLi9DYW52YXNNYW5hZ2VyXCI7XHJcbmltcG9ydCB7IGFwcGx5QXR0cmFjdG9yRm9yY2VzLCBhcHBseUNvbnN0cmFpbnQgfSBmcm9tIFwiLi9QaHlzaWNzRW5naW5lXCI7XHJcbmltcG9ydCB7IElucHV0SGFuZGxlciB9IGZyb20gXCIuL0lucHV0SGFuZGxlclwiO1xyXG5pbXBvcnQgeyBncmlkLCBwYXJ0aWNsZXMgfSBmcm9tIFwiLi9zY3JpcHRcIjtcclxuaW1wb3J0IFBhcnRpY2xlIGZyb20gXCIuL1BhcnRpY2xlXCI7XHJcbmltcG9ydCB7IGdldEF2ZXJhZ2VGcmFtZVRpbWUgfSBmcm9tIFwiLi9VSU1hbmFnZXJcIjtcclxuXHJcblxyXG52YXIgd2ViZ2xDYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2ViZ2wtY2FudmFzJykgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XHJcbnZhciBnbCA9IHdlYmdsQ2FudmFzLmdldENvbnRleHQoXCJ3ZWJnbFwiKTtcclxud2ViZ2xDYW52YXMhLndpZHRoID0gd2ViZ2xDYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XHJcbndlYmdsQ2FudmFzIS5oZWlnaHQgPSB3ZWJnbENhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XHJcblxyXG5jb25zdCBpbnB1dEhhbmRsZXIgPSBJbnB1dEhhbmRsZXIuZ2V0SW5zdGFuY2UoKTtcclxuXHJcbmlmICghZ2wpIHtcclxuICBjb25zb2xlLmVycm9yKFwiVW5hYmxlIHRvIGluaXRpYWxpemUgV2ViR0wuIFlvdXIgYnJvd3NlciBtYXkgbm90IHN1cHBvcnQgaXQuXCIpO1xyXG59XHJcblxyXG4vL2VuYWxiaW5nIGJsZW5kaW5nIGZvciBwcm9wZXIgYWxwaGEgb24gdGhlIHBhcnRpY2xlc1xyXG5nbC5lbmFibGUoZ2wuQkxFTkQpO1xyXG5nbC5ibGVuZEZ1bmMoZ2wuU1JDX0FMUEhBLCBnbC5PTkVfTUlOVVNfU1JDX0FMUEhBKTtcclxuXHJcbi8vY29tcGlsaW5nIHRoZSBzaGFkZXJzIHdpdGggYSBoZWxwZXIgZnVuY3Rpb25cclxudmFyIHZlcnRleFNoYWRlciA9IGNyZWF0ZVNoYWRlcihnbCwgZ2wuVkVSVEVYX1NIQURFUiwgcGFydGljbGVWZXJ0ZXhTaGFkZXIpO1xyXG52YXIgZnJhZ21lbnRTaGFkZXIgPSBjcmVhdGVTaGFkZXIoZ2wsIGdsLkZSQUdNRU5UX1NIQURFUiwgcGFydGljbGVGcmFnbWVudFNoYWRlcik7XHJcblxyXG4vL2NyZWF0aW5nIGEgV2ViR0wgcHJvZ3JhbSBhbmQgYXR0YWNoaW5nIHRoZSBzaGFkZXJzIHRvIGl0IHdpdGggYSBoZWxwZXIgZnVuY3Rpb25cclxudmFyIHByb2dyYW0gPSBjcmVhdGVQcm9ncmFtKGdsLCB2ZXJ0ZXhTaGFkZXIsIGZyYWdtZW50U2hhZGVyKTtcclxuXHJcbi8vbG9va2luZyB1cCB1bmlmb3JtIGxvY2F0aW9uIGFuZCB3aGVyZSB0aGUgdmVydGV4IGRhdGEgbmVlZHMgdG8gZ29cclxudmFyIHBvc2l0aW9uQXR0cmlidXRlTG9jYXRpb24gPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCBcImFfcG9zaXRpb25cIik7XHJcbnZhciByZXNvbHV0aW9uVW5pZm9ybUxvY2F0aW9uID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIFwidV9yZXNvbHV0aW9uXCIpO1xyXG52YXIgY29sb3JVbmlmb3JtTG9jYXRpb24gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgXCJ1X2NvbG9yXCIpO1xyXG52YXIgdHJhbnNsYXRpb25Mb2NhdGlvbiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBcInVfdHJhbnNsYXRpb25cIik7XHJcbnZhciByYWRpdXNVbmlmb3JtTG9jYXRpb24gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgXCJ1X3JhZGl1c1wiKTtcclxudmFyIG91dGxpbmVVbmlmb3JtTG9jYXRpb24gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgXCJ1X291dGxpbmVfYmxhY2tcIik7XHJcbnZhciBwb3NpdGlvbkJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xyXG5nbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgcG9zaXRpb25CdWZmZXIpO1xyXG5cclxuZnVuY3Rpb24gc2V0UmVjdGFuZ2xlKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIHg6bnVtYmVyLCB5Om51bWJlciwgd2lkdGg6bnVtYmVyLCBoZWlnaHQ6bnVtYmVyKSB7XHJcbiAgdmFyIHgxID0geCAtIHdpZHRoIC8gMjtcclxuICB2YXIgeDIgPSB4ICsgd2lkdGggLyAyO1xyXG4gIHZhciB5MSA9IHkgLSBoZWlnaHQgLyAyO1xyXG4gIHZhciB5MiA9IHkgKyBoZWlnaHQgLyAyO1xyXG4gXHJcbiAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIG5ldyBGbG9hdDMyQXJyYXkoW1xyXG4gICAgIHgxLCB5MSxcclxuICAgICB4MiwgeTEsXHJcbiAgICAgeDEsIHkyLFxyXG4gICAgIHgxLCB5MixcclxuICAgICB4MiwgeTEsXHJcbiAgICAgeDIsIHkyXSksIGdsLlNUQVRJQ19EUkFXKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldEdlb21ldHJ5KCl7XHJcbiAgcGFydGljbGVzLmZvckVhY2goKHBhcnRpY2xlKSA9PiB7XHJcbiAgICBzZXRSZWN0YW5nbGUoXHJcbiAgICAgIGdsLCAwLCAwLCBDb25maWcuZ2V0R3JpZFNpemUoKSwgQ29uZmlnLmdldEdyaWRTaXplKCkpO1xyXG4gIH0pO1xyXG5cclxufVxyXG5leHBvcnQgZnVuY3Rpb24gZHJhd1BhcnRpY2xlcygpIHtcclxuICByZXNpemVDYW52YXNUb0Rpc3BsYXlTaXplKGdsLmNhbnZhcyk7XHJcblxyXG4gIC8vIFRlbGwgV2ViR0wgaG93IHRvIGNvbnZlcnQgZnJvbSBjbGlwIHNwYWNlIHRvIHBpeGVsc1xyXG4gIGdsLnZpZXdwb3J0KDAsIDAsIGdsLmNhbnZhcy53aWR0aCwgZ2wuY2FudmFzLmhlaWdodCk7XHJcblxyXG4gIC8vIENsZWFyIHRoZSBjYW52YXNcclxuICBnbC5jbGVhckNvbG9yKDAsIDAsIDAsIDApOyAvLyBDbGVhciB0byB0cmFuc3BhcmVudCBibGFja1xyXG4gIGdsLmNsZWFyKGdsLkNPTE9SX0JVRkZFUl9CSVQpO1xyXG5cclxuICAvLyBUZWxsIGl0IHRvIHVzZSBwcm9ncmFtIChwYWlyIG9mIHNoYWRlcnMpXHJcbiAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtKTtcclxuXHJcbiAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkocG9zaXRpb25BdHRyaWJ1dGVMb2NhdGlvbik7XHJcblxyXG4gIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBwb3NpdGlvbkJ1ZmZlcik7XHJcbiAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihwb3NpdGlvbkF0dHJpYnV0ZUxvY2F0aW9uLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xyXG4gIHZhciBvdXRsaW5lQ29sb3IgPSBwYXJzZUZsb2F0KGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWlzLW91dGxpbmUtZGFyaycpKTtcclxuICB2YXIgcmVzb2x1dGlvbiA9IFtnbC5jYW52YXMud2lkdGgsIGdsLmNhbnZhcy5oZWlnaHRdXHJcbiAgLy8gRHJhdyB0aGUgcmVjdGFuZ2xlLlxyXG4gIHBhcnRpY2xlcy5mb3JFYWNoKChwYXJ0aWNsZSkgPT4ge1xyXG4gICAgICBnbC51bmlmb3JtMmZ2KHJlc29sdXRpb25Vbmlmb3JtTG9jYXRpb24sIHJlc29sdXRpb24pO1xyXG4gICAgICBnbC51bmlmb3JtMmYodHJhbnNsYXRpb25Mb2NhdGlvbiwgcGFydGljbGUucG9zaXRpb24ueCwgcGFydGljbGUucG9zaXRpb24ueSk7XHJcbiAgICAgIGdsLnVuaWZvcm0zZihjb2xvclVuaWZvcm1Mb2NhdGlvbiwgcGFydGljbGUuY29sb3IucixwYXJ0aWNsZS5jb2xvci5nLCBwYXJ0aWNsZS5jb2xvci5iKTtcclxuICAgICAgZ2wudW5pZm9ybTFmKHJhZGl1c1VuaWZvcm1Mb2NhdGlvbiwgcGFydGljbGUucmFkaXVzKVxyXG4gICAgICBnbC51bmlmb3JtMWYob3V0bGluZVVuaWZvcm1Mb2NhdGlvbiwgb3V0bGluZUNvbG9yKTtcclxuICAgICAgZ2wuZHJhd0FycmF5cyhnbC5UUklBTkdMRVMsIDAsIDYpO1xyXG4gIH0pO1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gZHJhd0F0dHJhY3RvcnMoYXR0cmFjdG9yczogQXR0cmFjdG9yW10pIHtcclxuICBhdHRyYWN0b3JzLmZvckVhY2goKGF0dHJhY3RvcikgPT4ge1xyXG4gICAgYXR0cmFjdG9yLmFuaW1hdGUoKTtcclxuICB9KTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkcmF3RG90dGVkTGluZShmcm9tOiBWZWMyRCwgdG86IFZlYzJELCByYWRpdXM6IG51bWJlciA9IDUsIGRvdENvdW50OiBudW1iZXIgPSA4KSB7XHJcbiAgaWYgKGlucHV0SGFuZGxlci5jbGlja2VkICYmIGZyb20ueCAhPSB0by54ICYmIGZyb20ueSAhPSB0by55KSB7XHJcbiAgICBjb25zdCBkaXN0YW5jZSA9IGZyb20uZGlmZmVyZW5jZSh0byk7XHJcbiAgICBkcmF3UHJlZGljdGVkUGF0aChmcm9tLmNsb25lKCksIGRpc3RhbmNlLmNsb25lKCkubXVsdGlwbHkoMC4xKSlcclxuICAgIGRpc3RhbmNlLmRpdmlkZShkb3RDb3VudCk7XHJcbiAgICB2YXIgYW5nbGUgPSBNYXRoLmF0YW4yKHRvLnkgLSBmcm9tLnksIHRvLnggLSBmcm9tLngpO1xyXG4gICAgdmFyIG5ld190byA9IG5ldyBWZWMyRCh0by54LCB0by55KTtcclxuXHJcbiAgICBuZXdfdG8ueCAtPSBNYXRoLmNvcyhhbmdsZSk7XHJcbiAgICBuZXdfdG8ueSAtPSBNYXRoLnNpbihhbmdsZSk7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gZG90Q291bnQ7IGkrKykge1xyXG4gICAgICB2YXIgZG90WCA9IGZyb20ueCAtIGRpc3RhbmNlLnggKiBpO1xyXG4gICAgICB2YXIgZG90WSA9IGZyb20ueSAtIGRpc3RhbmNlLnkgKiBpO1xyXG4gICAgICBkcmF3RG90KGRvdFgsIGRvdFksIHJhZGl1cywgMjU1KTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZHJhd1ByZWRpY3RlZFBhdGgoc3RhcnRQb3M6IFZlYzJELCBBY2NlbGVyYXRpb25WZWN0b3I6IFZlYzJEKSB7XHJcbiAgbGV0IGRvdENvdW50ID0gMTI3O1xyXG4gIGxldCBwcmVkaWN0ZWREb3QgPSBuZXcgUGFydGljbGUoc3RhcnRQb3MsIENvbmZpZy5nZXRHcmlkU2l6ZSgpLzIsIEFjY2VsZXJhdGlvblZlY3Rvciwge3I6MCwgZzowLCBiOjB9LGdyaWQpXHJcbiAgZm9yIChsZXQgaSA9IDE7IGkgPD0gZG90Q291bnQ7IGkrKykge1xyXG5cclxuICAgIHByZWRpY3RlZERvdC5hY2NlbGVyYXRlKENvbmZpZy5nZXRHcmF2aXR5RGlyZWN0aW9uKCkpO1xyXG4gICAgYXBwbHlDb25zdHJhaW50KHByZWRpY3RlZERvdCk7XHJcbiAgICBhcHBseUF0dHJhY3RvckZvcmNlcyhwcmVkaWN0ZWREb3QpO1xyXG4gICAgcHJlZGljdGVkRG90LnVwZGF0ZVBvc2l0aW9uKDAuNSk7XHJcbiAgICBpZiAoaSAlIDMgPT0gMCkge1xyXG4gICAgICBkcmF3RG90KHByZWRpY3RlZERvdC5wb3NpdGlvbi54LCBwcmVkaWN0ZWREb3QucG9zaXRpb24ueSwgNSwgMjU1IC0gaSoyKVxyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZHJhd0RvdChkb3RYOiBudW1iZXIsIGRvdFk6IG51bWJlciwgZG90U2l6ZTogbnVtYmVyLCBvcGFjaXR5OiBudW1iZXIpIHtcclxuICBmb3JlZ3JvdW5kQ2FudmFzQ3R4LmJlZ2luUGF0aCgpO1xyXG4gIGZvcmVncm91bmRDYW52YXNDdHguYXJjKFxyXG4gICAgZG90WCxcclxuICAgIGRvdFksXHJcbiAgICBkb3RTaXplLFxyXG4gICAgMCxcclxuICAgIDIgKiBNYXRoLlBJLFxyXG4gICAgZmFsc2VcclxuICApO1xyXG5cclxuICBmb3JlZ3JvdW5kQ2FudmFzQ3R4LmZpbGxTdHlsZSA9IGByZ2JhKDIxMCwgMjEwLCAyMTAsICR7b3BhY2l0eSAvIDI1NX0pYDtcclxuICBmb3JlZ3JvdW5kQ2FudmFzQ3R4LmZpbGwoKTtcclxuXHJcbiAgZm9yZWdyb3VuZENhbnZhc0N0eC5jbG9zZVBhdGgoKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdMYXNzbyhsaW5lV2lkdGg6IG51bWJlciA9IDMpIHtcclxuICBpZiAoaW5wdXRIYW5kbGVyLmNsaWNrZWQpIHtcclxuICAgIGZvcmVncm91bmRDYW52YXNDdHguYmVnaW5QYXRoKCk7XHJcbiAgICBmb3JlZ3JvdW5kQ2FudmFzQ3R4LmFyYyhpbnB1dEhhbmRsZXIucG9pbnRlclBvc2l0aW9uLngsIGlucHV0SGFuZGxlci5wb2ludGVyUG9zaXRpb24ueSwgQ29uZmlnLmdldEZpZWxkU2l6ZSgpLCAwLCAyICogTWF0aC5QSSk7XHJcbiAgICBmb3JlZ3JvdW5kQ2FudmFzQ3R4LmxpbmVXaWR0aCA9IGxpbmVXaWR0aDtcclxuICAgIGZvcmVncm91bmRDYW52YXNDdHguc3Ryb2tlU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1ncmlkLWNvbG9yJyk7XHJcbiAgICBmb3JlZ3JvdW5kQ2FudmFzQ3R4LnN0cm9rZSgpO1xyXG4gICAgZm9yZWdyb3VuZENhbnZhc0N0eC5jbG9zZVBhdGgoKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkcmF3QXJyb3coZnJvbTogVmVjMkQsIHRvOiBWZWMyRCkge1xyXG4gIGlmIChpbnB1dEhhbmRsZXIuY2xpY2tlZCAmJiBmcm9tLnggIT0gdG8ueCAmJiBmcm9tLnkgIT0gdG8ueSkge1xyXG4gICAgdmFyIGFuZ2xlID0gTWF0aC5hdGFuMih0by55IC0gZnJvbS55LCB0by54IC0gZnJvbS54KTtcclxuICAgIGNvbnN0IHdpZHRoID0gMTA7XHJcbiAgICB2YXIgaGVhZGxlbiA9IDEwO1xyXG4gICAgdmFyIG5ld190byA9IG5ldyBWZWMyRCh0by54LCB0by55KTtcclxuICAgIC8vIFRoaXMgbWFrZXMgaXQgc28gdGhlIGVuZCBvZiB0aGUgYXJyb3cgaGVhZCBpcyBsb2NhdGVkIGF0IHRveCwgdG95LCBkb24ndCBhc2sgd2hlcmUgMS4xNSBjb21lcyBmcm9tXHJcbiAgICBuZXdfdG8ueCAtPSBNYXRoLmNvcyhhbmdsZSkgKiAoKHdpZHRoICogMS4xNSkpO1xyXG4gICAgbmV3X3RvLnkgLT0gTWF0aC5zaW4oYW5nbGUpICogKCh3aWR0aCAqIDEuMTUpKTtcclxuXHJcblxyXG5cclxuICAgIC8vc3RhcnRpbmcgcGF0aCBvZiB0aGUgYXJyb3cgZnJvbSB0aGUgc3RhcnQgc3F1YXJlIHRvIHRoZSBlbmQgc3F1YXJlIGFuZCBkcmF3aW5nIHRoZSBzdHJva2VcclxuICAgIGZvcmVncm91bmRDYW52YXNDdHguYmVnaW5QYXRoKCk7XHJcbiAgICBmb3JlZ3JvdW5kQ2FudmFzQ3R4Lm1vdmVUbyhmcm9tLngsIGZyb20ueSk7XHJcbiAgICBmb3JlZ3JvdW5kQ2FudmFzQ3R4LmxpbmVUbyhuZXdfdG8ueCwgbmV3X3RvLnkpO1xyXG4gICAgZm9yZWdyb3VuZENhbnZhc0N0eC5zdHJva2VTdHlsZSA9IFwiI2JiYmJiYlwiO1xyXG4gICAgZm9yZWdyb3VuZENhbnZhc0N0eC5saW5lV2lkdGggPSB3aWR0aDtcclxuICAgIGZvcmVncm91bmRDYW52YXNDdHguc3Ryb2tlKCk7XHJcblxyXG4gICAgLy9zdGFydGluZyBhIG5ldyBwYXRoIGZyb20gdGhlIGhlYWQgb2YgdGhlIGFycm93IHRvIG9uZSBvZiB0aGUgc2lkZXMgb2YgdGhlIHBvaW50XHJcbiAgICBmb3JlZ3JvdW5kQ2FudmFzQ3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgZm9yZWdyb3VuZENhbnZhc0N0eC5tb3ZlVG8obmV3X3RvLngsIG5ld190by55KTtcclxuICAgIGZvcmVncm91bmRDYW52YXNDdHgubGluZVRvKG5ld190by54IC0gaGVhZGxlbiAqIE1hdGguY29zKGFuZ2xlIC0gTWF0aC5QSSAvIDcpLCBuZXdfdG8ueSAtIGhlYWRsZW4gKiBNYXRoLnNpbihhbmdsZSAtIE1hdGguUEkgLyA3KSk7XHJcblxyXG4gICAgLy9wYXRoIGZyb20gdGhlIHNpZGUgcG9pbnQgb2YgdGhlIGFycm93LCB0byB0aGUgb3RoZXIgc2lkZSBwb2ludFxyXG4gICAgZm9yZWdyb3VuZENhbnZhc0N0eC5saW5lVG8obmV3X3RvLnggLSBoZWFkbGVuICogTWF0aC5jb3MoYW5nbGUgKyBNYXRoLlBJIC8gNyksIG5ld190by55IC0gaGVhZGxlbiAqIE1hdGguc2luKGFuZ2xlICsgTWF0aC5QSSAvIDcpKTtcclxuXHJcbiAgICAvL3BhdGggZnJvbSB0aGUgc2lkZSBwb2ludCBiYWNrIHRvIHRoZSB0aXAgb2YgdGhlIGFycm93LCBhbmQgdGhlbiBhZ2FpbiB0byB0aGUgb3Bwb3NpdGUgc2lkZSBwb2ludFxyXG4gICAgZm9yZWdyb3VuZENhbnZhc0N0eC5saW5lVG8obmV3X3RvLngsIG5ld190by55KTtcclxuICAgIGZvcmVncm91bmRDYW52YXNDdHgubGluZVRvKG5ld190by54IC0gaGVhZGxlbiAqIE1hdGguY29zKGFuZ2xlIC0gTWF0aC5QSSAvIDcpLCBuZXdfdG8ueSAtIGhlYWRsZW4gKiBNYXRoLnNpbihhbmdsZSAtIE1hdGguUEkgLyA3KSk7XHJcblxyXG4gICAgLy9kcmF3cyB0aGUgcGF0aHMgY3JlYXRlZCBhYm92ZVxyXG4gICAgZm9yZWdyb3VuZENhbnZhc0N0eC5zdHJva2VTdHlsZSA9IFwiI2JiYmJiYlwiO1xyXG4gICAgZm9yZWdyb3VuZENhbnZhc0N0eC5saW5lV2lkdGggPSB3aWR0aDtcclxuICAgIGZvcmVncm91bmRDYW52YXNDdHguc3Ryb2tlKCk7XHJcbiAgICBmb3JlZ3JvdW5kQ2FudmFzQ3R4LmZpbGxTdHlsZSA9IFwiI2JiYmJiYlwiO1xyXG4gICAgZm9yZWdyb3VuZENhbnZhc0N0eC5maWxsKCk7XHJcbiAgICBmb3JlZ3JvdW5kQ2FudmFzQ3R4LmNsb3NlUGF0aCgpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdDdXJzb3JGdW5jdGlvbigpIHtcclxuICBpZiAoaW5wdXRIYW5kbGVyLmNsaWNrZWQpIHtcclxuc3dpdGNoIChDb25maWcuZ2V0UG9pbnRlckZ1bmN0aW9uKCkpIHtcclxuICBjYXNlICdmaWVsZCc6XHJcbiAgICBkcmF3TGFzc28oKTtcclxuICAgIGJyZWFrO1xyXG4gIGNhc2UgJ2dyYXZpdHknOlxyXG4gICAgZHJhd0Fycm93KGlucHV0SGFuZGxlci5jbGlja1N0YXJ0UG9zaXRpb24sIGlucHV0SGFuZGxlci5wb2ludGVyUG9zaXRpb24pXHJcbiAgICBicmVhaztcclxuICBjYXNlICd0aHJvdyc6XHJcbiAgICBkcmF3RG90dGVkTGluZShpbnB1dEhhbmRsZXIuY2xpY2tTdGFydFBvc2l0aW9uLCBpbnB1dEhhbmRsZXIucG9pbnRlclBvc2l0aW9uKVxyXG4gICAgYnJlYWs7XHJcbn1cclxuICB9XHJcbn0iLCJleHBvcnQgZnVuY3Rpb24gY3JlYXRlU2hhZGVyKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIHR5cGU6IGFueSwgc291cmNlOiBhbnkpIHtcclxuICAgIHZhciBzaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIodHlwZSk7XHJcbiAgICBnbC5zaGFkZXJTb3VyY2Uoc2hhZGVyLCBzb3VyY2UpO1xyXG4gICAgZ2wuY29tcGlsZVNoYWRlcihzaGFkZXIpO1xyXG4gICAgdmFyIHN1Y2Nlc3MgPSBnbC5nZXRTaGFkZXJQYXJhbWV0ZXIoc2hhZGVyLCBnbC5DT01QSUxFX1NUQVRVUyk7XHJcbiAgICBpZiAoc3VjY2Vzcykge1xyXG4gICAgICByZXR1cm4gc2hhZGVyO1xyXG4gICAgfVxyXG4gICBcclxuICAgIGNvbnNvbGUubG9nKGdsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKSk7XHJcbiAgICBnbC5kZWxldGVTaGFkZXIoc2hhZGVyKTtcclxuICB9XHJcblxyXG4gIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcm9ncmFtKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIHZlcnRleFNoYWRlcjogV2ViR0xTaGFkZXIsIGZyYWdtZW50U2hhZGVyOiBXZWJHTFNoYWRlcikge1xyXG4gICAgdmFyIHByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7XHJcbiAgICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgdmVydGV4U2hhZGVyKTtcclxuICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCBmcmFnbWVudFNoYWRlcik7XHJcbiAgICBnbC5saW5rUHJvZ3JhbShwcm9ncmFtKTtcclxuICAgIHZhciBzdWNjZXNzID0gZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCBnbC5MSU5LX1NUQVRVUyk7XHJcbiAgICBpZiAoc3VjY2Vzcykge1xyXG4gICAgICByZXR1cm4gcHJvZ3JhbTtcclxuICAgIH1cclxuICAgXHJcbiAgICBjb25zb2xlLmxvZyhnbC5nZXRQcm9ncmFtSW5mb0xvZyhwcm9ncmFtKSk7XHJcbiAgICBnbC5kZWxldGVQcm9ncmFtKHByb2dyYW0pO1xyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGZ1bmN0aW9uIHJlc2l6ZUNhbnZhc1RvRGlzcGxheVNpemUoY2FudmFzOmFueSkge1xyXG4gICAgLy8gTG9va3VwIHRoZSBzaXplIHRoZSBicm93c2VyIGlzIGRpc3BsYXlpbmcgdGhlIGNhbnZhcyBpbiBDU1MgcGl4ZWxzLlxyXG4gICAgY29uc3QgZGlzcGxheVdpZHRoICA9IGNhbnZhcy5jbGllbnRXaWR0aDtcclxuICAgIGNvbnN0IGRpc3BsYXlIZWlnaHQgPSBjYW52YXMuY2xpZW50SGVpZ2h0O1xyXG4gICBcclxuICAgIC8vIENoZWNrIGlmIHRoZSBjYW52YXMgaXMgbm90IHRoZSBzYW1lIHNpemUuXHJcbiAgICBjb25zdCBuZWVkUmVzaXplID0gY2FudmFzLndpZHRoICAhPT0gZGlzcGxheVdpZHRoIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLmhlaWdodCAhPT0gZGlzcGxheUhlaWdodDtcclxuICAgXHJcbiAgICBpZiAobmVlZFJlc2l6ZSkge1xyXG4gICAgICAvLyBNYWtlIHRoZSBjYW52YXMgdGhlIHNhbWUgc2l6ZVxyXG4gICAgICBjYW52YXMud2lkdGggID0gZGlzcGxheVdpZHRoO1xyXG4gICAgICBjYW52YXMuaGVpZ2h0ID0gZGlzcGxheUhlaWdodDtcclxuICAgIH1cclxuICAgXHJcbiAgICByZXR1cm4gbmVlZFJlc2l6ZTtcclxuXHJcbiAgfSIsImltcG9ydCAqIGFzIENvbmZpZyBmcm9tICcuL0NvbmZpZyc7XHJcblxyXG5sZXQgZnBzQ291bnRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5mcHNDb3VudGVyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuZnBzQ291bnRlci5zdHlsZS50b3AgPSAnMTBweCc7XHJcbmZwc0NvdW50ZXIuc3R5bGUubGVmdCA9ICcxMHB4JztcclxuXHJcbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZnBzQ291bnRlcik7XHJcblxyXG5leHBvcnQgdmFyIGZwcyA9IDYwO1xyXG5leHBvcnQgdmFyIGZyYW1lVGltZXM6bnVtYmVyW10gPSBbXTtcclxuY29uc3QgbWF4RnJhbWVzID0gMTAwOyBcclxuXHJcbmxldCBsYXN0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVVJKCkge1xyXG4gICAgbGV0IGF2ZXJhZ2VkRlBTID0gY2FsY3VsYXRlRlBTKCk7XHJcbiAgICBmcHNDb3VudGVyLmlubmVyVGV4dCA9IGBGUFM6ICR7TWF0aC5yb3VuZChhdmVyYWdlZEZQUyl9YDtcclxufVxyXG5cclxuZnVuY3Rpb24gY2FsY3VsYXRlRlBTKCkge1xyXG4gICAgY29uc3QgY3VycmVudFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgIGNvbnN0IHRpbWVEaWZmID0gY3VycmVudFRpbWUgLSBsYXN0VGltZTtcclxuICAgIGZyYW1lVGltZXMucHVzaCh0aW1lRGlmZik7XHJcblxyXG4gICAgaWYgKGZyYW1lVGltZXMubGVuZ3RoID4gbWF4RnJhbWVzKSB7XHJcbiAgICAgICAgZnJhbWVUaW1lcy5zaGlmdCgpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBjb25zdCBhdmVyYWdlRlBTID0gZnJhbWVUaW1lcy5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKSAvIGZyYW1lVGltZXMubGVuZ3RoO1xyXG5cclxuICAgIGxhc3RUaW1lID0gY3VycmVudFRpbWU7XHJcblxyXG4gICAgcmV0dXJuIDEwMDAgLyBhdmVyYWdlRlBTO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXZlcmFnZUZyYW1lVGltZSgpe1xyXG4gICAgcmV0dXJuIGZyYW1lVGltZXMucmVkdWNlKChhLCBiKSA9PiBhICsgYiwgMCkgLyBmcmFtZVRpbWVzLmxlbmd0aDtcclxufVxyXG4iLCJleHBvcnQgZnVuY3Rpb24gZ2V0UmFuZG9tQ29sb3IoKTogeyByOiBudW1iZXIsIGc6IG51bWJlciwgYjogbnVtYmVyIH0ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcjogTWF0aC5yYW5kb20oKSxcclxuICAgICAgZzogTWF0aC5yYW5kb20oKSxcclxuICAgICAgYjogTWF0aC5yYW5kb20oKVxyXG4gICAgfVxyXG4gIH1cclxuICAiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBWZWMyRCB7XHJcbiAgICB4OiBudW1iZXI7XHJcbiAgICB5OiBudW1iZXI7XHJcbiAgXHJcbiAgICBjb25zdHJ1Y3Rvcih4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgICB0aGlzLnggPSB4O1xyXG4gICAgICB0aGlzLnkgPSB5O1xyXG4gICAgfVxyXG4gIFxyXG4gICAgYWRkKG90aGVyOiBWZWMyRCl7XHJcbiAgICAgIHRoaXMueCArPSBvdGhlci54O1xyXG4gICAgICB0aGlzLnkgKz0gb3RoZXIueTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0KG90aGVyOiBWZWMyRCl7XHJcbiAgICAgIHRoaXMueCA9IG90aGVyLng7XHJcbiAgICAgIHRoaXMueSA9IG90aGVyLnk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBzdWJ0cmFjdChvdGhlcjogVmVjMkQpe1xyXG4gICAgICB0aGlzLnggLT0gb3RoZXIueDtcclxuICAgICAgdGhpcy55IC09IG90aGVyLnk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgbXVsdGlwbHkoc2NhbGFyOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy54ICo9IHNjYWxhcjtcclxuICAgICAgdGhpcy55ICo9IHNjYWxhcjtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBkaXZpZGUoc2NhbGFyOiBudW1iZXIpe1xyXG4gICAgICB0aGlzLnggLz0gc2NhbGFyO1xyXG4gICAgICB0aGlzLnkgLz0gc2NhbGFyO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICBcclxuICAgIGRvdCh2ZWM6IFZlYzJEKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMueCAqIHZlYy54ICsgdGhpcy55ICogdmVjLnk7XHJcbiAgICB9XHJcblxyXG4gICAgbGVuZ3RoKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55KTtcclxuICAgIH1cclxuXHJcbiAgICBzcXVhcmVkTGVuZ3RoKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLnggKiB0aGlzLnggKyB0aGlzLnkgKiB0aGlzLnk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvbmUoKTogVmVjMkR7XHJcbiAgICAgIHJldHVybiBuZXcgVmVjMkQodGhpcy54LCB0aGlzLnkpXHJcbiAgICB9XHJcblxyXG4gICAgZGlmZmVyZW5jZShvdGhlcjogVmVjMkQpOiBWZWMyRHtcclxuICAgICAgcmV0dXJuIG5ldyBWZWMyRCh0aGlzLnggLSBvdGhlci54LCB0aGlzLnkgLSBvdGhlci55KVxyXG4gICAgfVxyXG5cclxuICAgIHNxdWFyZWREaXN0YW5jZVRvKG90aGVyOlZlYzJEKXtcclxuICAgICAgcmV0dXJuICh0aGlzLnggLSBvdGhlci54KSoqMiArICh0aGlzLnkgLSBvdGhlci55KSoqMjtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgQXR0cmFjdG9yIGZyb20gXCIuL0F0dHJhY3RvclwiO1xyXG5pbXBvcnQgeyBkcmF3QXJyb3csIGRyYXdMYXNzbywgZHJhd1BhcnRpY2xlcywgZHJhd0RvdHRlZExpbmUsIHNldEdlb21ldHJ5LCBkcmF3Q3Vyc29yRnVuY3Rpb24gfSBmcm9tIFwiLi9SZW5kZXJlclwiO1xyXG5pbXBvcnQgeyBjbG9zZU1lbnUsIHVwZGF0ZVBvaW50ZXJGdW5jdGlvbiB9IGZyb20gXCIuL01lbnVNYW5hZ2VyXCI7XHJcbmltcG9ydCBQYXJ0aWNsZSBmcm9tIFwiLi9QYXJ0aWNsZVwiO1xyXG5pbXBvcnQgVmVjMkQgZnJvbSBcIi4vVmVjMkRcIjtcclxuaW1wb3J0IHsgZnBzLCBnZXRBdmVyYWdlRnJhbWVUaW1lLCB1cGRhdGVVSSB9IGZyb20gXCIuL1VJTWFuYWdlclwiO1xyXG5pbXBvcnQgeyBiYWNrZ3JvdW5kQ2FudmFzLCBjbGVhckNhbnZhcywgZm9yZWdyb3VuZENhbnZhcyB9IGZyb20gXCIuL0NhbnZhc01hbmFnZXJcIjtcclxuaW1wb3J0IHsgdGljayB9IGZyb20gXCIuL1BoeXNpY3NFbmdpbmVcIjtcclxuaW1wb3J0ICogYXMgQ29uZmlnIGZyb20gJy4vQ29uZmlnJztcclxuaW1wb3J0IHsgR3JpZCB9IGZyb20gXCIuL0dyaWRcIjtcclxuaW1wb3J0IHsgZ2V0UmFuZG9tQ29sb3IgfSBmcm9tIFwiLi9VdGlsc1wiO1xyXG5cclxuZXhwb3J0IHZhciBwYXJ0aWNsZXM6IFBhcnRpY2xlW10gPSBbXTtcclxuZXhwb3J0IHZhciBhdHRyYWN0b3JzOiBBdHRyYWN0b3JbXSA9IFtdO1xyXG5cclxubGV0IGZyYW1lQ291bnQgPSAwO1xyXG5leHBvcnQgbGV0IGdyaWQgPSBuZXcgR3JpZChiYWNrZ3JvdW5kQ2FudmFzKTtcclxuZnVuY3Rpb24gYW5pbWF0ZSgpIHtcclxuICBsZXQgZnJhbWVUaW1lID0gZ2V0QXZlcmFnZUZyYW1lVGltZSgpXHJcbiAgdGljayhmcmFtZVRpbWUvMjApO1xyXG5cclxuICBjbGVhckNhbnZhcygpO1xyXG4gIGRyYXdQYXJ0aWNsZXMoKTtcclxuICBkcmF3Q3Vyc29yRnVuY3Rpb24oKTtcclxuICAvLyBkcmF3R3JpZCgpO1xyXG4gIC8vIGRyYXdBdHRyYWN0b3JzKCk7XHJcbiAgdXBkYXRlVUkoKTtcclxuXHJcbiAgaWYgKGZyYW1lQ291bnQgJSAzID09PSAwICYmIHBhcnRpY2xlcy5sZW5ndGggPCBDb25maWcuZ2V0UGFydGljbGVOdW1iZXIoKSAmJiBmcmFtZUNvdW50ID4gMTIwKSB7XHJcbiAgICBwYXJ0aWNsZXMucHVzaChuZXcgUGFydGljbGUobmV3IFZlYzJEKDIwMCwgMjAwKSwgZ3JpZC5waXhlbFNpemUvMiwgbmV3IFZlYzJEKDI3ICwgLTEyKSwgZ2V0UmFuZG9tQ29sb3IoKSwgZ3JpZCkpO1xyXG4gICAgcGFydGljbGVzLnB1c2gobmV3IFBhcnRpY2xlKG5ldyBWZWMyRCgyMDAsIDI2MCksIGdyaWQucGl4ZWxTaXplLzIsIG5ldyBWZWMyRCgyOSAsIC0xMiksIGdldFJhbmRvbUNvbG9yKCksIGdyaWQpKTtcclxuICAgIHBhcnRpY2xlcy5wdXNoKG5ldyBQYXJ0aWNsZShuZXcgVmVjMkQoMjAwLCAzMjApLCBncmlkLnBpeGVsU2l6ZS8yLCBuZXcgVmVjMkQoMjQgLCAtMTIpLCBnZXRSYW5kb21Db2xvcigpLCBncmlkKSk7XHJcbiAgICBwYXJ0aWNsZXMucHVzaChuZXcgUGFydGljbGUobmV3IFZlYzJEKDIwMCwgMzgwKSwgZ3JpZC5waXhlbFNpemUvMiwgbmV3IFZlYzJEKDI1ICwgLTEyKSwgZ2V0UmFuZG9tQ29sb3IoKSwgZ3JpZCkpO1xyXG4gICAgcGFydGljbGVzLnB1c2gobmV3IFBhcnRpY2xlKG5ldyBWZWMyRCgyMDAsIDQ0MCksIGdyaWQucGl4ZWxTaXplLzIsIG5ldyBWZWMyRCgyNCwgLTEyICksIGdldFJhbmRvbUNvbG9yKCksIGdyaWQpKTtcclxuICAgIHNldEdlb21ldHJ5KCk7XHJcbiAgfVxyXG4gIGZyYW1lQ291bnQrKztcclxuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XHJcbn1cclxuXHJcbmdyaWQuZHJhdygpO1xyXG5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG5fX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvc2NyaXB0LnRzXCIpO1xudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvTWVudU1hbmFnZXIudHNcIik7XG4iXSwibmFtZXMiOlsiZm9yZWdyb3VuZENhbnZhcyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJiYWNrZ3JvdW5kQ2FudmFzIiwid2ViZ2xDYW52YXMiLCJ3aWR0aCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImhlaWdodCIsImZvcmVncm91bmRDYW52YXNDdHgiLCJnZXRDb250ZXh0IiwiYmFja2dyb3VuZENhbnZhc0N0eCIsImNsZWFyQ2FudmFzIiwiY2xlYXJSZWN0IiwidXBkYXRlQ2FudmFzU2l6ZSIsImdyaWQiLCJjYW52YXMiLCJ1cGRhdGVTaXplIiwiZHJhdyIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJmaWVsZFN0cmVuZ3RoIiwicGh5c2ljc1N1YnN0ZXBzQW1vdW50IiwiZ3Jhdml0eURpcmVjdGlvbiIsImZpZWxkU2l6ZSIsInBhcnRpY2xlTnVtYmVyIiwicG9pbnRlckZ1bmN0aW9uIiwiZ3JpZFNpemUiLCJneXJvRW5hYmxlZCIsImdldEdyYXZpdHlEaXJlY3Rpb24iLCJnZXRQaHlzaWNzU3Vic3RlcHNBbW91bnQiLCJnZXRGaWVsZFN0cmVuZ3RoIiwiZ2V0RmllbGRTaXplIiwiZ2V0UGFydGljbGVOdW1iZXIiLCJnZXRQb2ludGVyRnVuY3Rpb24iLCJnZXRHcmlkU2l6ZSIsImlzR3lyb0VuYWJsZWQiLCJzZXRHcmF2aXR5RGlyZWN0aW9uIiwibmV3R3Jhdml0eURpcmVjdGlvbiIsInNldFBoeXNpY3NTdWJzdGVwc0Ftb3VudCIsIm5ld0Ftb3VudCIsInNldEZpZWxkU3RyZW5ndGgiLCJuZXdmaWVsZFN0cmVuZ3RoIiwic2V0RmllbGRTaXplIiwibmV3ZmllbGRTaXplIiwic2V0UGFydGljbGVOdW1iZXIiLCJuZXdQYXJ0aWNsZU51bWJlciIsInNldFBvaW50ZXJGdW5jdGlvbiIsIm5ld1BvaW50ZXJGdW5jdGlvbiIsInNldElzR3lyb0VuYWJsZWQiLCJuZXdJc0d5cm9FbmFibGVkIiwiZ3JpZFBpeGVsU2l6ZSIsInRoaXMiLCJwaXhlbFNpemUiLCJjb2x1bW5zIiwiTWF0aCIsImNlaWwiLCJyb3dzIiwiY2VsbHMiLCJpbml0aWFsaXplIiwiY2FudmFzQ3R4IiwiaSIsImoiLCJyZW1vdmVBbGwiLCJwdXQiLCJwYXJ0aWNsZSIsImNvbHVtbiIsImZsb29yIiwicG9zaXRpb24iLCJ4Iiwicm93IiwieSIsImxlbmd0aCIsInB1c2giLCJzdHJva2VTdHlsZSIsImdldENvbXB1dGVkU3R5bGUiLCJkb2N1bWVudEVsZW1lbnQiLCJnZXRQcm9wZXJ0eVZhbHVlIiwibGluZVdpZHRoIiwiYmVnaW5QYXRoIiwibW92ZVRvIiwibGluZVRvIiwic3Ryb2tlIiwiY2xpY2tlZCIsInBvaW50ZXJQb3NpdGlvbiIsImNsaWNrU3RhcnRQb3NpdGlvbiIsImdldEluc3RhbmNlIiwiSW5wdXRIYW5kbGVyIiwiaW5zdGFuY2UiLCJpbml0aWFsaXplRXZlbnRMaXN0ZW5lcnMiLCJtYWluX2JvZHkiLCJoYW5kbGVNb3VzZURvd24iLCJiaW5kIiwiaGFuZGxlTW91c2VVcCIsImhhbmRsZU1vdmVFdmVudCIsImV2ZW50Iiwic3RvcFByb3BhZ2F0aW9uIiwiY2xvc2VNZW51IiwiTW91c2VFdmVudCIsImNsaWVudFgiLCJjbGllbnRZIiwiVG91Y2hFdmVudCIsInRvdWNoZXMiLCJsYXVuY2hfZGlyIiwiY2xvbmUiLCJkaWZmZXJlbmNlIiwibXVsdGlwbHkiLCJwYXJ0aWNsZXMiLCJnZXRSYW5kb21Db2xvciIsIm1lbnVCdXR0b24iLCJtZW51RWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwib3Blbk1lbnUiLCJnZXRBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJzdHlsZSIsImN1cnNvciIsImZvckVhY2giLCJlbGVtZW50Iiwic2V0VGltZW91dCIsImRpc3BsYXkiLCJxdWVyeVNlbGVjdG9yIiwibmV3VGhlbWUiLCJyb290RWxlbSIsImZpZWxkU2l6ZVNsaWRlciIsImZpZWxkU3RyZW5ndGhTbGlkZXIiLCJncmF2aXR5U3RyZW5ndGhTbGlkZXIiLCJzdWJzdGVwc0Ftb3VudEVudHJ5Qm94IiwicGFydGljbGVzQW1vdW50RW50cnlCb3giLCJneXJvRW5hYmxlZENoZWNrQm94IiwidG9nZ2xlR3lybyIsImNoZWNrZWQiLCJoYW5kbGVNb3Rpb24iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYWNjZWxlcmF0aW9uSW5jbHVkaW5nR3Jhdml0eSIsInVwZGF0ZVBvaW50ZXJGdW5jdGlvbiIsInJhZGlvQnV0dG9ucyIsImdldEVsZW1lbnRzQnlOYW1lIiwidmFsdWUiLCJzZXRHcmF2aXR5U3RyZW5ndGgiLCJyYWRpb0J1dHRvbiIsIm9uaW5wdXQiLCJwYXJzZUludCIsIkRldmljZU1vdGlvbkV2ZW50IiwicmVxdWVzdFBlcm1pc3Npb24iLCJ0aGVuIiwicmVzcG9uc2UiLCJjYXRjaCIsImNvbnNvbGUiLCJlcnJvciIsImRpZmYiLCJwb3AiLCJwb3MiLCJyYWRpdXMiLCJ2ZWxvY2l0eSIsImNvbG9yIiwiYWNjZWxlcmF0aW9uIiwiY2VsbCIsInVwZGF0ZVBvc2l0aW9uIiwiZHQiLCJtb3ZlRGVsdGEiLCJhZGQiLCJ1cGRhdGVDZWxsIiwiYWNjZWxlcmF0ZSIsImFjYyIsImdldE5laWdoYm9yaW5nUGFydGljbGVzIiwibmVpZ2hib3JpbmdQYXJ0aWNsZXMiLCJpbnB1dEhhbmRsZXIiLCJwcmV2aW91c1NjcmVlblgiLCJwcmV2aW91c1NjcmVlblkiLCJ1cGRhdGVQb3NpdGlvbnMiLCJtb3ZlQWxsUGFydGljbGVzIiwidmVjIiwiYXBwbHlGaWVsZCIsImZpZWxkUG9zIiwicHVsbERpcmVjdGlvbiIsImRpc3RhbmNlIiwiZGl2aWRlIiwiYXBwbHlBdHRyYWN0b3JGb3JjZXNUb0FsbCIsImFwcGx5QXR0cmFjdG9yRm9yY2VzIiwidGljayIsInN1Yl9kdCIsImRlbHRhWCIsInNjcmVlblgiLCJkZWx0YVkiLCJzY3JlZW5ZIiwic2NyZWVuVmVsb2NpdHkiLCJhcHBseUNvbnN0cmFpbnQiLCJzb2x2ZUNvbGxpc2lvbnMiLCJhYnMiLCJhdHRyYWN0b3JzIiwiYXR0cmFjdG9yIiwiZm9yY2UiLCJ0ZW1wQ29sbGlzaW9uRGlyZWN0aW9uIiwic3F1YXJlZERpc3RhbmNlIiwicmFkaWlTdW0iLCJwYXJ0aWNsZTEiLCJwYXJ0aWNsZTIiLCJzZXQiLCJzdWJ0cmFjdCIsInNxdWFyZWRMZW5ndGgiLCJzcXJ0IiwiZGVsdGEiLCJyYW5kb20iLCJnbCIsImVuYWJsZSIsIkJMRU5EIiwiYmxlbmRGdW5jIiwiU1JDX0FMUEhBIiwiT05FX01JTlVTX1NSQ19BTFBIQSIsInZlcnRleFNoYWRlciIsImNyZWF0ZVNoYWRlciIsIlZFUlRFWF9TSEFERVIiLCJmcmFnbWVudFNoYWRlciIsIkZSQUdNRU5UX1NIQURFUiIsInByb2dyYW0iLCJjcmVhdGVQcm9ncmFtIiwicG9zaXRpb25BdHRyaWJ1dGVMb2NhdGlvbiIsImdldEF0dHJpYkxvY2F0aW9uIiwicmVzb2x1dGlvblVuaWZvcm1Mb2NhdGlvbiIsImdldFVuaWZvcm1Mb2NhdGlvbiIsImNvbG9yVW5pZm9ybUxvY2F0aW9uIiwidHJhbnNsYXRpb25Mb2NhdGlvbiIsInJhZGl1c1VuaWZvcm1Mb2NhdGlvbiIsIm91dGxpbmVVbmlmb3JtTG9jYXRpb24iLCJwb3NpdGlvbkJ1ZmZlciIsImNyZWF0ZUJ1ZmZlciIsInNldEdlb21ldHJ5IiwieDEiLCJ4MiIsInkxIiwieTIiLCJidWZmZXJEYXRhIiwiQVJSQVlfQlVGRkVSIiwiRmxvYXQzMkFycmF5IiwiU1RBVElDX0RSQVciLCJzZXRSZWN0YW5nbGUiLCJkcmF3UGFydGljbGVzIiwicmVzaXplQ2FudmFzVG9EaXNwbGF5U2l6ZSIsInZpZXdwb3J0IiwiY2xlYXJDb2xvciIsImNsZWFyIiwiQ09MT1JfQlVGRkVSX0JJVCIsInVzZVByb2dyYW0iLCJlbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSIsImJpbmRCdWZmZXIiLCJ2ZXJ0ZXhBdHRyaWJQb2ludGVyIiwiRkxPQVQiLCJvdXRsaW5lQ29sb3IiLCJwYXJzZUZsb2F0IiwicmVzb2x1dGlvbiIsInVuaWZvcm0yZnYiLCJ1bmlmb3JtMmYiLCJ1bmlmb3JtM2YiLCJyIiwiZyIsImIiLCJ1bmlmb3JtMWYiLCJkcmF3QXJyYXlzIiwiVFJJQU5HTEVTIiwiZHJhd0RvdHRlZExpbmUiLCJmcm9tIiwidG8iLCJkb3RDb3VudCIsImRyYXdQcmVkaWN0ZWRQYXRoIiwiYW5nbGUiLCJhdGFuMiIsIm5ld190byIsImNvcyIsInNpbiIsImRyYXdEb3QiLCJzdGFydFBvcyIsIkFjY2VsZXJhdGlvblZlY3RvciIsInByZWRpY3RlZERvdCIsImRvdFgiLCJkb3RZIiwiZG90U2l6ZSIsIm9wYWNpdHkiLCJhcmMiLCJQSSIsImZpbGxTdHlsZSIsImZpbGwiLCJjbG9zZVBhdGgiLCJkcmF3TGFzc28iLCJkcmF3QXJyb3ciLCJoZWFkbGVuIiwiZHJhd0N1cnNvckZ1bmN0aW9uIiwidHlwZSIsInNvdXJjZSIsInNoYWRlciIsInNoYWRlclNvdXJjZSIsImNvbXBpbGVTaGFkZXIiLCJnZXRTaGFkZXJQYXJhbWV0ZXIiLCJDT01QSUxFX1NUQVRVUyIsImxvZyIsImdldFNoYWRlckluZm9Mb2ciLCJkZWxldGVTaGFkZXIiLCJhdHRhY2hTaGFkZXIiLCJsaW5rUHJvZ3JhbSIsImdldFByb2dyYW1QYXJhbWV0ZXIiLCJMSU5LX1NUQVRVUyIsImdldFByb2dyYW1JbmZvTG9nIiwiZGVsZXRlUHJvZ3JhbSIsImRpc3BsYXlXaWR0aCIsImNsaWVudFdpZHRoIiwiZGlzcGxheUhlaWdodCIsImNsaWVudEhlaWdodCIsIm5lZWRSZXNpemUiLCJmcHNDb3VudGVyIiwiY3JlYXRlRWxlbWVudCIsInRvcCIsImxlZnQiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJmcHMiLCJmcmFtZVRpbWVzIiwibWF4RnJhbWVzIiwibGFzdFRpbWUiLCJwZXJmb3JtYW5jZSIsIm5vdyIsInVwZGF0ZVVJIiwiYXZlcmFnZWRGUFMiLCJjdXJyZW50VGltZSIsInRpbWVEaWZmIiwic2hpZnQiLCJhdmVyYWdlRlBTIiwicmVkdWNlIiwiYSIsImNhbGN1bGF0ZUZQUyIsImlubmVyVGV4dCIsInJvdW5kIiwiZ2V0QXZlcmFnZUZyYW1lVGltZSIsIm90aGVyIiwic2NhbGFyIiwiZG90IiwiVmVjMkQiLCJzcXVhcmVkRGlzdGFuY2VUbyIsImZyYW1lQ291bnQiLCJHcmlkIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiYW5pbWF0ZSIsImZyYW1lVGltZSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIl0sInNvdXJjZVJvb3QiOiIifQ==