/*! For license information please see script.js.LICENSE.txt */
(()=>{"use strict";var t={"./src/Drawer.ts":(t,e,r)=>{r.r(e),r.d(e,{drawArrow:()=>E,drawDot:()=>S,drawGrid:()=>w,drawLasso:()=>P,drawParticles:()=>_,drawTail:()=>b,setGeometry:()=>x});var n=r("./src/Particle.ts"),o=r("./src/Vec2D.ts"),i=r("./src/shaders/particleFragmentShader.frag"),a=r("./src/shaders/particleVertexShader.vert"),c=r("./src/script.ts"),s=r("./src/ShaderHelper.ts"),u=document.getElementById("webgl-canvas").getContext("webgl");u||console.error("Unable to initialize WebGL. Your browser may not support it."),u.enable(u.BLEND),u.blendFunc(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA);var d=(0,s.createShader)(u,u.VERTEX_SHADER,a),l=(0,s.createShader)(u,u.FRAGMENT_SHADER,i),h=(0,s.createProgram)(u,d,l),f=u.getAttribLocation(h,"a_position"),p=u.getUniformLocation(h,"u_resolution"),g=u.getUniformLocation(h,"u_color"),y=u.getUniformLocation(h,"u_translation"),v=u.getUniformLocation(h,"u_radius");u.uniform2f(p,u.canvas.width,u.canvas.height);var m=u.createBuffer();function x(){c.particles.forEach((function(t){!function(t,e,r,n,o){t.bufferData(t.ARRAY_BUFFER,new Float32Array([-10,-10,10,-10,-10,10,-10,10,10,-10,10,10]),t.STATIC_DRAW)}(u)}))}function _(){(0,s.resizeCanvasToDisplaySize)(u.canvas),u.viewport(0,0,u.canvas.width,u.canvas.height),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT),u.useProgram(h),u.enableVertexAttribArray(f),u.bindBuffer(u.ARRAY_BUFFER,m),u.vertexAttribPointer(f,2,u.FLOAT,!1,0,0),c.particles.forEach((function(t){u.uniform2f(p,u.canvas.width,u.canvas.height),u.uniform2f(y,t.pos_curr.x,t.pos_curr.y),u.uniform3f(g,t.color.r,t.color.g,t.color.b),u.uniform1f(v,10),u.drawArrays(u.TRIANGLES,0,6)}))}function w(){c.back_ctx.clearRect(0,0,c.foreground_canvas.width,c.foreground_canvas.height),c.back_ctx.strokeStyle=getComputedStyle(document.documentElement).getPropertyValue("--grid-color"),c.back_ctx.lineWidth=1;for(var t=c.gridSize;t<c.foreground_canvas.width;t+=c.gridSize)c.back_ctx.beginPath(),c.back_ctx.moveTo(t,0),c.back_ctx.lineTo(t,c.foreground_canvas.height),c.back_ctx.stroke();for(var e=c.gridSize;e<c.foreground_canvas.height;e+=c.gridSize)c.back_ctx.beginPath(),c.back_ctx.moveTo(0,e),c.back_ctx.lineTo(c.foreground_canvas.width,e),c.back_ctx.stroke()}function b(t,e){if(c.clicked&&t.x!=e.x&&t.y!=e.y){var r=t.difference(e);!function(t,e){for(var r=new n.default(t,15,e,{r:0,g:0,b:0}),o=1;o<=510;o++)r.accelerate(c.gravity),(0,c.applyConstraint)(r),(0,c.applyAttractorForces)(r),r.updatePosition(.125),o%15==0&&S(r.pos_curr.x,r.pos_curr.y,5,255-o/2)}(t.clone(),r.clone()),r.divide(8);var i=Math.atan2(e.y-t.y,e.x-t.x),a=new o.default(e.x,e.y);a.x-=Math.cos(i),a.y-=Math.sin(i);for(var s=0;s<=8;s++)S(t.x-r.x*s,t.y-r.y*s,5,255)}}function S(t,e,r,n){c.ctx.beginPath(),c.ctx.arc(t,e,r,0,2*Math.PI,!1),c.ctx.fillStyle="rgba(210, 210, 210, ".concat(n/255,")"),c.ctx.fill(),c.ctx.closePath()}function P(){c.clicked&&(c.ctx.beginPath(),c.ctx.arc(c.pointerPosition.x,c.pointerPosition.y,c.fieldSize,0,2*Math.PI),c.ctx.lineWidth=3,c.ctx.strokeStyle=getComputedStyle(document.documentElement).getPropertyValue("--grid-color"),c.ctx.stroke(),c.ctx.closePath())}function E(t,e){if(c.clicked&&t.x!=e.x&&t.y!=e.y){var r=Math.atan2(e.y-t.y,e.x-t.x),n=10,i=new o.default(e.x,e.y);i.x-=11.5*Math.cos(r),i.y-=11.5*Math.sin(r),c.ctx.beginPath(),c.ctx.moveTo(t.x,t.y),c.ctx.lineTo(i.x,i.y),c.ctx.strokeStyle="#bbbbbb",c.ctx.lineWidth=10,c.ctx.stroke(),c.ctx.beginPath(),c.ctx.moveTo(i.x,i.y),c.ctx.lineTo(i.x-n*Math.cos(r-Math.PI/7),i.y-n*Math.sin(r-Math.PI/7)),c.ctx.lineTo(i.x-n*Math.cos(r+Math.PI/7),i.y-n*Math.sin(r+Math.PI/7)),c.ctx.lineTo(i.x,i.y),c.ctx.lineTo(i.x-n*Math.cos(r-Math.PI/7),i.y-n*Math.sin(r-Math.PI/7)),c.ctx.strokeStyle="#bbbbbb",c.ctx.lineWidth=10,c.ctx.stroke(),c.ctx.fillStyle="#bbbbbb",c.ctx.fill(),c.ctx.closePath()}}u.bindBuffer(u.ARRAY_BUFFER,m)},"./src/MenuManager.ts":(t,e,r)=>{r.r(e),r.d(e,{closeMenu:()=>s,getPointerFunction:()=>g,openMenu:()=>c});var n=r("./src/Drawer.ts"),o=r("./src/script.ts"),i=document.getElementById("menu-button"),a=document.querySelectorAll(".menu-element");function c(){"false"==i.getAttribute("open")&&(i.setAttribute("open","true"),i.style.cursor="auto",a.forEach((function(t){setTimeout((function(){t.style.display="block"}),300)})))}function s(){i.setAttribute("open","false"),i.style.cursor="pointer",a.forEach((function(t){t.style.display="none"}))}i.addEventListener("click",(function(t){t.stopPropagation(),c()})),document.querySelector("#theme-switch").addEventListener("click",(function(){var t,e=document.documentElement;t="light"===e.getAttribute("theme")?"dark":"light",e.setAttribute("theme",t),(0,n.drawGrid)()}));var u=document.getElementById("field-size-slider"),d=document.getElementById("field-strength-slider"),l=document.getElementById("gravity-strength-slider"),h=document.getElementById("substeps-amount-entry"),f=document.getElementById("particles-amount-entry"),p=document.getElementById("drawOutline");function g(){for(var t=document.getElementsByName("cursor-function"),e=0;e<t.length;e++)if(t[e].checked)return t[e].value}u.oninput=function(){(0,o.setFieldSize)(parseInt(u.value))},d.oninput=function(){(0,o.setFieldStrength)(parseInt(d.value))},l.oninput=function(){(0,o.setGravityStrength)(parseInt(l.value))},h.addEventListener("change",(function(){(0,o.setSubsteps)(parseInt(h.value))})),f.addEventListener("change",(function(){(0,o.setParticlesNum)(parseInt(f.value))})),p.oninput=function(){(0,o.setDrawOutline)(p.checked)}},"./src/Particle.ts":(t,e,r)=>{r.r(e),r.d(e,{default:()=>i});var n=r("./src/Vec2D.ts"),o=r("./src/script.ts");const i=function(){function t(t,e,r,i){this.pos_curr=t,this.pos_prev=this.pos_curr,this.radius=e,this.acceleration=r,this.color=i,this.updateCell(new n.default(Math.floor(this.pos_curr.x/o.gridSize),Math.floor(this.pos_curr.y/o.gridSize)))}return t.prototype.draw=function(){},t.prototype.updatePosition=function(t){var e=new n.default(this.pos_curr.x-this.pos_prev.x,this.pos_curr.y-this.pos_prev.y);this.pos_prev=this.pos_curr.clone(),this.pos_curr.add(e),this.acceleration.multiply(t*t),this.pos_curr.add(this.acceleration),this.acceleration.x=0,this.acceleration.y=0},t.prototype.accelerate=function(t){this.acceleration.add(t)},t.prototype.updateCell=function(t){this.gridCell=t},t.canvas=document.getElementById("foreground-canvas"),t.gl=t.canvas.getContext("2d"),t}()},"./src/ShaderHelper.ts":(t,e,r)=>{function n(t,e,r){var n=t.createShader(e);if(t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS))return n;console.log(t.getShaderInfoLog(n)),t.deleteShader(n)}function o(t,e,r){var n=t.createProgram();if(t.attachShader(n,e),t.attachShader(n,r),t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS))return n;console.log(t.getProgramInfoLog(n)),t.deleteProgram(n)}function i(t){var e=t.clientWidth,r=t.clientHeight,n=t.width!==e||t.height!==r;return n&&(t.width=e,t.height=r),n}function a(){}r.r(e),r.d(e,{createProgram:()=>o,createShader:()=>n,initParticleShader:()=>a,resizeCanvasToDisplaySize:()=>i})},"./src/Vec2D.ts":(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.add=function(t){this.x+=t.x,this.y+=t.y},t.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.subtract=function(t){this.x-=t.x,this.y-=t.y},t.prototype.multiply=function(t){this.x*=t,this.y*=t},t.prototype.divide=function(t){this.x/=t,this.y/=t},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.squaredLength=function(){return this.x*this.x+this.y*this.y},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.difference=function(e){return new t(this.x-e.x,this.y-e.y)},t}()},"./src/script.ts":(t,e,r)=>{r.r(e),r.d(e,{applyAttractorForces:()=>q,applyConstraint:()=>Y,back_ctx:()=>k,clicked:()=>C,ctx:()=>T,drawOutline:()=>b,fieldSize:()=>w,foreground_canvas:()=>m,fps:()=>A,gravity:()=>v,grid:()=>u,gridSize:()=>s,particles:()=>d,pointerPosition:()=>p,setDrawOutline:()=>U,setFieldSize:()=>F,setFieldStrength:()=>L,setGravityStrength:()=>z,setParticlesNum:()=>O,setSubsteps:()=>D});var n=r("./src/Drawer.ts"),o=r("./src/MenuManager.ts"),i=r("./src/Particle.ts"),a=r("./src/ShaderHelper.ts"),c=r("./src/Vec2D.ts"),s=20,u=[],d=[],l=[],h=1e3,f=0,p=new c.default(0,0),g=new c.default(0,0),y="field",v=new c.default(0,1),m=document.getElementById("foreground-canvas"),x=document.getElementById("background-canvas"),_=document.getElementById("webgl-canvas"),w=100,b=!0,S=10,P=4,E=Math.ceil(m.width/s),M=Math.ceil(m.height/s);m.width=m.getBoundingClientRect().width,m.height=m.getBoundingClientRect().height,x.width=x.getBoundingClientRect().width,x.height=x.getBoundingClientRect().height,_.width=_.getBoundingClientRect().width,_.height=_.getBoundingClientRect().height;var T=m.getContext("2d"),k=x.getContext("2d"),A=60,C=!1,B=document.createElement("div");B.style.position="absolute",B.style.top="10px",B.style.left="10px";var I=document.createElement("div");I.style.position="absolute",I.style.top="30px",I.style.left="10px";var R=document.createElement("div");function L(t){S=t}function F(t){w=t}function z(t){v=new c.default(0,.1*t)}function D(t){P=t}function O(t){h=t}function U(t){b=t}function G(){E=Math.ceil(m.width/s),M=Math.ceil(m.height/s),console.log(E),console.log(M);for(var t=0;t<E;t++){u[t]=[];for(var e=0;e<M;e++)u[t][e]=[]}}function V(t){!function(){for(var t=0;t<E;t++){u[t]=[];for(var e=0;e<M;e++)u[t][e]=[]}}(),d.forEach((function(e){e.updatePosition(t),function(t){var e=Math.floor(t.pos_curr.x/s),r=Math.floor(t.pos_curr.y/s);e>=0&&e<u.length&&r>=0&&r<u[e].length&&u[e][r].push(t)}(e)}))}function N(t){d.forEach((function(e){var r=t.difference(e.pos_curr),n=r.length();n<w&&n>10&&(r.multiply(100*S),r.divide(n*n),e.accelerate(r))}))}function q(t){l.forEach((function(e){var r=e.pos.difference(t.pos_curr),n=r.length();n<e.radius&&n>10&&(r.multiply(e.force),r.divide(n*n),t.accelerate(r))}))}function H(){f=0;var t=new c.default(0,0),e=0,r=0;d.forEach((function(n){(function(t){for(var e=Math.floor(t.pos_curr.x/s),r=Math.floor(t.pos_curr.y/s),n=[],o=e-1;o<=e+1;o++)for(var i=r-1;i<=r+1;i++)o>=0&&o<u.length&&i>=0&&i<u[o].length&&n.push.apply(n,u[o][i]);return n})(n).forEach((function(o){if(n!==o&&(t.set(n.pos_curr).subtract(o.pos_curr),e=t.squaredLength(),r=n.radius+o.radius,e<r*r&&0!=e)){f++;var i=Math.sqrt(e);t.divide(i);var a=r-i;t.multiply(.5*a),n.pos_curr.add(t),o.pos_curr.subtract(t)}}))}))}function Y(t){t.pos_curr.y+t.radius>m.height&&(t.pos_curr.y=m.height-t.radius,t.pos_prev.y=t.pos_curr.y+t.pos_curr.y-t.pos_prev.y),t.pos_curr.y-t.radius<0&&(t.pos_curr.y=t.radius,t.pos_prev.y=t.pos_curr.y+t.pos_curr.y-t.pos_prev.y),t.pos_curr.x-t.radius<0&&(t.pos_curr.x=t.radius,t.pos_prev.x=t.pos_curr.x+t.pos_curr.x-t.pos_prev.x),t.pos_curr.x+t.radius>m.width&&(t.pos_curr.x=m.width-t.radius)}R.style.position="absolute",R.style.top="50px",R.style.left="10px",document.body.appendChild(B),document.body.appendChild(I),document.body.appendChild(R);var W=0,X=.1*performance.now();function j(t){t.stopPropagation(),C=!0,y=(0,o.getPointerFunction)(),t instanceof MouseEvent?(p.x=t.clientX,p.y=t.clientY):t instanceof TouchEvent&&(p.x=t.touches[0].clientX,p.y=t.touches[0].clientY),g.x=p.x,g.y=p.y}function K(t){switch(t.stopPropagation(),C=!1,y){case"field":case"gravity":break;case"throw":var e=g.difference(p);e.multiply(A/60),d.push(new i.default(g.clone(),15,e,J()))}}function J(){return{r:Math.random(),g:Math.random(),b:Math.random()}}function Q(t){t.stopPropagation(),C&&(t instanceof MouseEvent?(p.x=t.clientX,p.y=t.clientY):t instanceof TouchEvent&&(p.x=t.touches[0].clientX,p.y=t.touches[0].clientY))}var Z=0,$=document.getElementById("main_container");window.addEventListener("resize",(function(){m.width=m.getBoundingClientRect().width,m.height=m.getBoundingClientRect().height,x.width=x.getBoundingClientRect().width,x.height=x.getBoundingClientRect().height,_.width=_.getBoundingClientRect().width,_.height=_.getBoundingClientRect().height,(0,a.initParticleShader)(),G(),(0,n.drawGrid)()})),$.addEventListener("mousedown",j),$.addEventListener("mouseup",K),$.addEventListener("mousemove",Q),$.addEventListener("touchstart",j),$.addEventListener("touchend",K),$.addEventListener("touchmove",Q),$.addEventListener("click",(function(t){t.stopPropagation(),(0,o.closeMenu)()})),(0,a.initParticleShader)(),G(),(0,n.drawGrid)(),requestAnimationFrame((function t(){switch(function(t){for(var e=P,r=t/e,n=0;n<e;n++){if(0!=v.y&&d.forEach((function(t){t.accelerate(v)})),C)switch(y){case"field":N(p);break;case"gravity":(v=p.difference(g)).divide(200)}d.forEach((function(t){Y(t)})),H(),V(r)}}(.5/A*60),T.clearRect(0,0,m.width,m.height),(0,n.drawParticles)(),y){case"field":(0,n.drawLasso)();break;case"gravity":(0,n.drawArrow)(g,p);break;case"throw":(0,n.drawTail)(g,p)}var e=.016666*A;Z%Math.floor(2*e)==0&&d.length<h&&Z>120&&(d.push(new i.default(new c.default(200,200),10,new c.default(200*e,-80*e),J())),d.push(new i.default(new c.default(200,260),10,new c.default(180*e,-80*e),J())),d.push(new i.default(new c.default(200,320),10,new c.default(170*e,-80*e),J())),d.push(new i.default(new c.default(200,380),10,new c.default(180*e,-80*e),J())),d.push(new i.default(new c.default(200,440),10,new c.default(170*e,-80*e),J())),(0,n.setGeometry)()),Z++,++W%10==0&&(A=function(){var t=.1*performance.now(),e=t-X,r=Math.round(1e3/e);return X=t,r}(),B.innerText="FPS: ".concat(A),I.innerText="Particles: ".concat(d.length),R.innerText="Collisions: ".concat(f)),requestAnimationFrame(t)}))},"./src/shaders/particleFragmentShader.frag":t=>{t.exports="precision mediump float;\r\n\r\nuniform vec2 u_resolution;\r\n\r\nuniform vec3 u_color;\r\nuniform float u_radius;\r\nuniform vec2 u_translation;\r\n\r\nfloat circle(in vec2 st, in float radius) {\r\n\tvec2 dist = st;\r\n\treturn 1.0 - smoothstep(\r\n\t\tradius - (radius * 0.01),\r\n\t\tradius +(radius * 0.01),\r\n\t\tdot(dist, dist) * 4.0);\r\n}\r\nvoid main(){\r\n \tvec2 st = (gl_FragCoord.xy - u_translation) / u_radius;\r\n\r\n\tvec3 color = vec3(u_color*circle(st,4.0));\r\n\r\n\tgl_FragColor = vec4(color, 1.0 );\r\n}"},"./src/shaders/particleVertexShader.vert":t=>{t.exports="precision mediump float;\r\n\r\nattribute vec2 a_position;\r\n\r\n// attribute vec3 color;\r\n// varying vec3 v_color;\r\nuniform vec2 u_resolution;\r\nuniform vec2 u_translation;\r\n\r\nvoid main() {\r\n    //move the position of the shader\r\n    vec2 position = a_position + u_translation;\r\n\r\n    // convert the position from pixels to 0.0 to 1.0\r\n    vec2 zeroToOne = position / u_resolution;\r\n\r\n    // convert from 0->1 to 0->2\r\n    vec2 zeroToTwo = zeroToOne * 2.0;\r\n\r\n    // convert from 0->2 to -1->+1 (clipspace)\r\n    vec2 clipSpace = zeroToTwo - 1.0;\r\n\r\n    gl_Position = vec4(clipSpace , 0, 1);\r\n\r\n    // // Pass the vertex color to the fragment shader.\r\n    // v_position = a_position;\r\n}"}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r("./src/script.ts"),r("./src/MenuManager.ts")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBb0JVLEVBQUVOLEVBQVNLLElBQzVFRSxPQUFPQyxlQUFlUixFQUFTSyxFQUFLLENBQUVJLFlBQVksRUFBTUMsSUFBS04sRUFBV0MsSUFFMUUsRUNORFQsRUFBb0JVLEVBQUksQ0FBQ0ssRUFBS0MsSUFBVUwsT0FBT00sVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsR0NDbEZoQixFQUFvQjVOLEVBQUtnTyxJQUNILG9CQUFYZ0IsUUFBMEJBLE9BQU9DLGFBQzFDVixPQUFPQyxlQUFlUixFQUFTZ0IsT0FBT0MsWUFBYSxDQUFFeEosTUFBTyxXQUU3RDhJLE9BQU9DLGVBQWVSLEVBQVMsYUFBYyxDQUFFdkksT0FBTyxHQUFPLEVDRjlEbUksRUFBb0IsbUJBQ01BLEVBQW9CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGFydGljbGVzaW12Mi8uL3NyYy9EcmF3ZXIudHMiLCJ3ZWJwYWNrOi8vcGFydGljbGVzaW12Mi8uL3NyYy9NZW51TWFuYWdlci50cyIsIndlYnBhY2s6Ly9wYXJ0aWNsZXNpbXYyLy4vc3JjL1BhcnRpY2xlLnRzIiwid2VicGFjazovL3BhcnRpY2xlc2ltdjIvLi9zcmMvU2hhZGVySGVscGVyLnRzIiwid2VicGFjazovL3BhcnRpY2xlc2ltdjIvLi9zcmMvVmVjMkQudHMiLCJ3ZWJwYWNrOi8vcGFydGljbGVzaW12Mi8uL3NyYy9zY3JpcHQudHMiLCJ3ZWJwYWNrOi8vcGFydGljbGVzaW12Mi93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9wYXJ0aWNsZXNpbXYyL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9wYXJ0aWNsZXNpbXYyL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vcGFydGljbGVzaW12Mi93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3BhcnRpY2xlc2ltdjIvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQYXJ0aWNsZSBmcm9tIFwiLi9QYXJ0aWNsZVwiO1xyXG5pbXBvcnQgVmVjMkQgZnJvbSBcIi4vVmVjMkRcIjtcclxuaW1wb3J0IHBhcnRpY2xlRnJhZ21lbnRTaGFkZXIgZnJvbSBcIi4vc2hhZGVycy9wYXJ0aWNsZUZyYWdtZW50U2hhZGVyLmZyYWdcIjtcclxuaW1wb3J0IHBhcnRpY2xlVmVydGV4U2hhZGVyIGZyb20gXCIuL3NoYWRlcnMvcGFydGljbGVWZXJ0ZXhTaGFkZXIudmVydFwiO1xyXG5cclxuaW1wb3J0IHsgYmFja19jdHgsIGN0eCwgZm9yZWdyb3VuZF9jYW52YXMsIHBhcnRpY2xlcywgZ3JpZFNpemUsIHBvaW50ZXJQb3NpdGlvbiwgZmllbGRTaXplLCBjbGlja2VkLCBkcmF3T3V0bGluZSwgZ3Jhdml0eSwgZnBzLCBhcHBseUNvbnN0cmFpbnQsIGFwcGx5QXR0cmFjdG9yRm9yY2VzLCBncmlkIH0gZnJvbSBcIi4vc2NyaXB0XCI7XHJcbmltcG9ydCB7IGNyZWF0ZVByb2dyYW0sIGNyZWF0ZVNoYWRlciwgaW5pdFBhcnRpY2xlU2hhZGVyLCByZXNpemVDYW52YXNUb0Rpc3BsYXlTaXplIH0gZnJvbSBcIi4vU2hhZGVySGVscGVyXCI7XHJcbnZhciBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2ViZ2wtY2FudmFzJykgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XHJcbnZhciBnbCA9IGNhbnZhcy5nZXRDb250ZXh0KFwid2ViZ2xcIik7XHJcblxyXG5pZiAoIWdsKSB7XHJcbiAgY29uc29sZS5lcnJvcihcIlVuYWJsZSB0byBpbml0aWFsaXplIFdlYkdMLiBZb3VyIGJyb3dzZXIgbWF5IG5vdCBzdXBwb3J0IGl0LlwiKTtcclxufVxyXG5cclxuLy9lbmFsYmluZyBibGVuZGluZyBmb3IgcHJvcGVyIGFscGhhIG9uIHRoZSBwYXJ0aWNsZXNcclxuZ2wuZW5hYmxlKGdsLkJMRU5EKTtcclxuZ2wuYmxlbmRGdW5jKGdsLlNSQ19BTFBIQSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQSk7XHJcblxyXG4vL2NvbXBpbGluZyB0aGUgc2hhZGVycyB3aXRoIGEgaGVscGVyIGZ1bmN0aW9uXHJcbnZhciB2ZXJ0ZXhTaGFkZXIgPSBjcmVhdGVTaGFkZXIoZ2wsIGdsLlZFUlRFWF9TSEFERVIsIHBhcnRpY2xlVmVydGV4U2hhZGVyKTtcclxudmFyIGZyYWdtZW50U2hhZGVyID0gY3JlYXRlU2hhZGVyKGdsLCBnbC5GUkFHTUVOVF9TSEFERVIsIHBhcnRpY2xlRnJhZ21lbnRTaGFkZXIpO1xyXG5cclxuLy9jcmVhdGluZyBhIFdlYkdMIHByb2dyYW0gYW5kIGF0dGFjaGluZyB0aGUgc2hhZGVycyB0byBpdCB3aXRoIGEgaGVscGVyIGZ1bmN0aW9uXHJcbnZhciBwcm9ncmFtID0gY3JlYXRlUHJvZ3JhbShnbCwgdmVydGV4U2hhZGVyLCBmcmFnbWVudFNoYWRlcik7XHJcblxyXG4vL2xvb2tpbmcgdXAgdW5pZm9ybSBsb2NhdGlvbiBhbmQgd2hlcmUgdGhlIHZlcnRleCBkYXRhIG5lZWRzIHRvIGdvXHJcbnZhciBwb3NpdGlvbkF0dHJpYnV0ZUxvY2F0aW9uID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgXCJhX3Bvc2l0aW9uXCIpO1xyXG52YXIgcmVzb2x1dGlvblVuaWZvcm1Mb2NhdGlvbiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBcInVfcmVzb2x1dGlvblwiKTtcclxudmFyIGNvbG9yVW5pZm9ybUxvY2F0aW9uID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIFwidV9jb2xvclwiKTtcclxudmFyIHRyYW5zbGF0aW9uTG9jYXRpb24gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgXCJ1X3RyYW5zbGF0aW9uXCIpO1xyXG52YXIgcmFkaXVzVW5pZm9ybUxvY2F0aW9uID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIFwidV9yYWRpdXNcIik7XHJcbmdsLnVuaWZvcm0yZihyZXNvbHV0aW9uVW5pZm9ybUxvY2F0aW9uLCBnbC5jYW52YXMud2lkdGgsIGdsLmNhbnZhcy5oZWlnaHQpO1xyXG52YXIgcG9zaXRpb25CdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcclxuZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHBvc2l0aW9uQnVmZmVyKTtcclxuXHJcbmZ1bmN0aW9uIHNldFJlY3RhbmdsZShnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCB4Om51bWJlciwgeTpudW1iZXIsIHdpZHRoOm51bWJlciwgaGVpZ2h0Om51bWJlcikge1xyXG4gIHZhciB4MSA9IHggLSB3aWR0aCAvIDI7XHJcbiAgdmFyIHgyID0geCArIHdpZHRoIC8gMjtcclxuICB2YXIgeTEgPSB5IC0gaGVpZ2h0IC8gMjtcclxuICB2YXIgeTIgPSB5ICsgaGVpZ2h0IC8gMjtcclxuIFxyXG4gIC8vIE5PVEU6IGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCAuLi4pIHdpbGwgYWZmZWN0XHJcbiAgLy8gd2hhdGV2ZXIgYnVmZmVyIGlzIGJvdW5kIHRvIHRoZSBgQVJSQVlfQlVGRkVSYCBiaW5kIHBvaW50XHJcbiAgLy8gYnV0IHNvIGZhciB3ZSBvbmx5IGhhdmUgb25lIGJ1ZmZlci4gSWYgd2UgaGFkIG1vcmUgdGhhbiBvbmVcclxuICAvLyBidWZmZXIgd2UnZCB3YW50IHRvIGJpbmQgdGhhdCBidWZmZXIgdG8gYEFSUkFZX0JVRkZFUmAgZmlyc3QuXHJcbiBcclxuICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbmV3IEZsb2F0MzJBcnJheShbXHJcbiAgICAgeDEsIHkxLFxyXG4gICAgIHgyLCB5MSxcclxuICAgICB4MSwgeTIsXHJcbiAgICAgeDEsIHkyLFxyXG4gICAgIHgyLCB5MSxcclxuICAgICB4MiwgeTJdKSwgZ2wuU1RBVElDX0RSQVcpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0R2VvbWV0cnkoKXtcclxuICBwYXJ0aWNsZXMuZm9yRWFjaCgocGFydGljbGUpID0+IHtcclxuICAgIHNldFJlY3RhbmdsZShcclxuICAgICAgZ2wsIDAsIDAsIDIwLCAyMCk7XHJcbiAgfSk7XHJcblxyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBkcmF3UGFydGljbGVzKCkge1xyXG4gIHJlc2l6ZUNhbnZhc1RvRGlzcGxheVNpemUoZ2wuY2FudmFzKTtcclxuXHJcbiAgLy8gVGVsbCBXZWJHTCBob3cgdG8gY29udmVydCBmcm9tIGNsaXAgc3BhY2UgdG8gcGl4ZWxzXHJcbiAgZ2wudmlld3BvcnQoMCwgMCwgZ2wuY2FudmFzLndpZHRoLCBnbC5jYW52YXMuaGVpZ2h0KTtcclxuXHJcbiAgLy8gQ2xlYXIgdGhlIGNhbnZhc1xyXG4gIGdsLmNsZWFyQ29sb3IoMCwgMCwgMCwgMCk7IC8vIENsZWFyIHRvIHRyYW5zcGFyZW50IGJsYWNrXHJcbiAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCk7XHJcblxyXG4gIC8vIFRlbGwgaXQgdG8gdXNlIHByb2dyYW0gKHBhaXIgb2Ygc2hhZGVycylcclxuICBnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xyXG5cclxuICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShwb3NpdGlvbkF0dHJpYnV0ZUxvY2F0aW9uKTtcclxuXHJcbiAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHBvc2l0aW9uQnVmZmVyKTtcclxuICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHBvc2l0aW9uQXR0cmlidXRlTG9jYXRpb24sIDIsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XHJcblxyXG4gIC8vIERyYXcgdGhlIHJlY3RhbmdsZS5cclxuICBwYXJ0aWNsZXMuZm9yRWFjaCgocGFydGljbGUpID0+IHtcclxuICAgICAgZ2wudW5pZm9ybTJmKHJlc29sdXRpb25Vbmlmb3JtTG9jYXRpb24sIGdsLmNhbnZhcy53aWR0aCwgZ2wuY2FudmFzLmhlaWdodCk7XHJcbiAgICAgIGdsLnVuaWZvcm0yZih0cmFuc2xhdGlvbkxvY2F0aW9uLCBwYXJ0aWNsZS5wb3NfY3Vyci54LCBwYXJ0aWNsZS5wb3NfY3Vyci55KTtcclxuICAgICAgZ2wudW5pZm9ybTNmKGNvbG9yVW5pZm9ybUxvY2F0aW9uLCBwYXJ0aWNsZS5jb2xvci5yLHBhcnRpY2xlLmNvbG9yLmcsIHBhcnRpY2xlLmNvbG9yLmIpO1xyXG4gICAgICBnbC51bmlmb3JtMWYocmFkaXVzVW5pZm9ybUxvY2F0aW9uLCAxMC4pXHJcbiAgICAgIGdsLmRyYXdBcnJheXMoZ2wuVFJJQU5HTEVTLCAwLCA2KTtcclxuICB9KTtcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkcmF3R3JpZCgpIHtcclxuXHJcbiAgYmFja19jdHguY2xlYXJSZWN0KDAsIDAsIGZvcmVncm91bmRfY2FudmFzLndpZHRoLCBmb3JlZ3JvdW5kX2NhbnZhcy5oZWlnaHQpO1xyXG5cclxuICBiYWNrX2N0eC5zdHJva2VTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWdyaWQtY29sb3InKTtcclxuICBiYWNrX2N0eC5saW5lV2lkdGggPSAxO1xyXG4gIGZvciAobGV0IHggPSBncmlkU2l6ZTsgeCA8IGZvcmVncm91bmRfY2FudmFzLndpZHRoOyB4ICs9IGdyaWRTaXplKSB7XHJcbiAgICBiYWNrX2N0eC5iZWdpblBhdGgoKTtcclxuICAgIGJhY2tfY3R4Lm1vdmVUbyh4LCAwKTtcclxuICAgIGJhY2tfY3R4LmxpbmVUbyh4LCBmb3JlZ3JvdW5kX2NhbnZhcy5oZWlnaHQpO1xyXG4gICAgYmFja19jdHguc3Ryb2tlKCk7XHJcbiAgfVxyXG4gIGZvciAobGV0IHkgPSBncmlkU2l6ZTsgeSA8IGZvcmVncm91bmRfY2FudmFzLmhlaWdodDsgeSArPSBncmlkU2l6ZSkge1xyXG4gICAgYmFja19jdHguYmVnaW5QYXRoKCk7XHJcbiAgICBiYWNrX2N0eC5tb3ZlVG8oMCwgeSk7XHJcbiAgICBiYWNrX2N0eC5saW5lVG8oZm9yZWdyb3VuZF9jYW52YXMud2lkdGgsIHkpO1xyXG4gICAgYmFja19jdHguc3Ryb2tlKCk7XHJcbiAgfVxyXG4gIC8vREVCVUdcclxuICAvLyAgIGZvciAobGV0IHggPSAwOyB4IDwgZ3JpZC5sZW5ndGg7IHggKz0gMSkge1xyXG5cclxuICAvLyAgIGZvciAobGV0IHkgPSAwOyB5IDwgZ3JpZFswXS5sZW5ndGg7IHkgKz0gMSkge1xyXG4gIC8vICAgICBiYWNrX2N0eC5mb250ID0gXCIxMnB4IHNlcmlmXCI7XHJcblxyXG4gIC8vICAgICBiYWNrX2N0eC5maWxsVGV4dChgJHtncmlkW3hdW3ldLmxlbmd0aH1gLCAoeCsxKSpncmlkU2l6ZSAtIGdyaWRTaXplLzIgLSAyLCAoeSsxKSpncmlkU2l6ZSAtZ3JpZFNpemUvMiArIDQpO1xyXG4gIC8vICAgICAvLyBiYWNrX2N0eC5maWxsVGV4dChgJHt4fSAke3l9YCwgKHgrMSkqZ3JpZFNpemUgLSBncmlkU2l6ZS8yIC0gMiwgKHkrMSkqZ3JpZFNpemUgLWdyaWRTaXplLzIgKyA0KTtcclxuICAvLyAgIH1cclxuICAvLyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkcmF3VGFpbChmcm9tOiBWZWMyRCwgdG86IFZlYzJEKSB7XHJcbiAgaWYgKGNsaWNrZWQgJiYgZnJvbS54ICE9IHRvLnggJiYgZnJvbS55ICE9IHRvLnkpIHtcclxuICAgIGNvbnN0IGRvdFNpemUgPSA1O1xyXG4gICAgY29uc3QgZG90Q291bnQgPSA4O1xyXG4gICAgY29uc3QgZGlzdGFuY2UgPSBmcm9tLmRpZmZlcmVuY2UodG8pO1xyXG4gICAgZHJhd1ByZWRpY3RlZFBhdGgoZnJvbS5jbG9uZSgpLCBkaXN0YW5jZS5jbG9uZSgpKVxyXG4gICAgZGlzdGFuY2UuZGl2aWRlKGRvdENvdW50KTtcclxuICAgIHZhciBhbmdsZSA9IE1hdGguYXRhbjIodG8ueSAtIGZyb20ueSwgdG8ueCAtIGZyb20ueCk7XHJcbiAgICB2YXIgbmV3X3RvID0gbmV3IFZlYzJEKHRvLngsIHRvLnkpO1xyXG5cclxuICAgIG5ld190by54IC09IE1hdGguY29zKGFuZ2xlKTtcclxuICAgIG5ld190by55IC09IE1hdGguc2luKGFuZ2xlKTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBkb3RDb3VudDsgaSsrKSB7XHJcbiAgICAgIHZhciBkb3RYID0gZnJvbS54IC0gZGlzdGFuY2UueCAqIGk7XHJcbiAgICAgIHZhciBkb3RZID0gZnJvbS55IC0gZGlzdGFuY2UueSAqIGk7XHJcbiAgICAgIGRyYXdEb3QoZG90WCwgZG90WSwgZG90U2l6ZSwgMjU1KTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3UHJlZGljdGVkUGF0aChzdGFydFBvczogVmVjMkQsIHZlYzogVmVjMkQpIHtcclxuICBsZXQgZG90Q291bnQgPSA1MTA7XHJcbiAgbGV0IHByZWRpY3RlZERvdCA9IG5ldyBQYXJ0aWNsZShzdGFydFBvcywgMTUsIHZlYywge3I6MCwgZzowLCBiOjB9KVxyXG4gIGZvciAobGV0IGkgPSAxOyBpIDw9IGRvdENvdW50OyBpKyspIHtcclxuXHJcbiAgICBwcmVkaWN0ZWREb3QuYWNjZWxlcmF0ZShncmF2aXR5KTtcclxuICAgIGFwcGx5Q29uc3RyYWludChwcmVkaWN0ZWREb3QpO1xyXG4gICAgYXBwbHlBdHRyYWN0b3JGb3JjZXMocHJlZGljdGVkRG90KTtcclxuICAgIHByZWRpY3RlZERvdC51cGRhdGVQb3NpdGlvbigwLjUgKiAwLjI1KTtcclxuXHJcbiAgICBpZiAoaSAlIDE1ID09IDApIHtcclxuICAgICAgZHJhd0RvdChwcmVkaWN0ZWREb3QucG9zX2N1cnIueCwgcHJlZGljdGVkRG90LnBvc19jdXJyLnksIDUsIDI1NSAtIGkgLyAyKVxyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZHJhd0RvdChkb3RYOiBudW1iZXIsIGRvdFk6IG51bWJlciwgZG90U2l6ZTogbnVtYmVyLCBvcGFjaXR5OiBudW1iZXIpIHtcclxuICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgY3R4LmFyYyhcclxuICAgIGRvdFgsXHJcbiAgICBkb3RZLFxyXG4gICAgZG90U2l6ZSxcclxuICAgIDAsXHJcbiAgICAyICogTWF0aC5QSSxcclxuICAgIGZhbHNlXHJcbiAgKTtcclxuXHJcbiAgY3R4LmZpbGxTdHlsZSA9IGByZ2JhKDIxMCwgMjEwLCAyMTAsICR7b3BhY2l0eSAvIDI1NX0pYDtcclxuICBjdHguZmlsbCgpO1xyXG5cclxuICBjdHguY2xvc2VQYXRoKCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkcmF3TGFzc28oKSB7XHJcbiAgaWYgKGNsaWNrZWQpIHtcclxuICAgIGNvbnN0IGxpbmVXaWR0aCA9IDM7XHJcbiAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICBjdHguYXJjKHBvaW50ZXJQb3NpdGlvbi54LCBwb2ludGVyUG9zaXRpb24ueSwgZmllbGRTaXplLCAwLCAyICogTWF0aC5QSSk7XHJcbiAgICBjdHgubGluZVdpZHRoID0gbGluZVdpZHRoO1xyXG4gICAgY3R4LnN0cm9rZVN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmdldFByb3BlcnR5VmFsdWUoJy0tZ3JpZC1jb2xvcicpO1xyXG4gICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgY3R4LmNsb3NlUGF0aCgpO1xyXG4gIH1cclxufVxyXG5leHBvcnQgZnVuY3Rpb24gZHJhd0Fycm93KGZyb206IFZlYzJELCB0bzogVmVjMkQpIHtcclxuICBpZiAoY2xpY2tlZCAmJiBmcm9tLnggIT0gdG8ueCAmJiBmcm9tLnkgIT0gdG8ueSkge1xyXG4gICAgdmFyIGFuZ2xlID0gTWF0aC5hdGFuMih0by55IC0gZnJvbS55LCB0by54IC0gZnJvbS54KTtcclxuICAgIGNvbnN0IHdpZHRoID0gMTA7XHJcbiAgICB2YXIgaGVhZGxlbiA9IDEwO1xyXG4gICAgdmFyIG5ld190byA9IG5ldyBWZWMyRCh0by54LCB0by55KTtcclxuICAgIC8vIFRoaXMgbWFrZXMgaXQgc28gdGhlIGVuZCBvZiB0aGUgYXJyb3cgaGVhZCBpcyBsb2NhdGVkIGF0IHRveCwgdG95LCBkb24ndCBhc2sgd2hlcmUgMS4xNSBjb21lcyBmcm9tXHJcbiAgICBuZXdfdG8ueCAtPSBNYXRoLmNvcyhhbmdsZSkgKiAoKHdpZHRoICogMS4xNSkpO1xyXG4gICAgbmV3X3RvLnkgLT0gTWF0aC5zaW4oYW5nbGUpICogKCh3aWR0aCAqIDEuMTUpKTtcclxuXHJcblxyXG5cclxuICAgIC8vc3RhcnRpbmcgcGF0aCBvZiB0aGUgYXJyb3cgZnJvbSB0aGUgc3RhcnQgc3F1YXJlIHRvIHRoZSBlbmQgc3F1YXJlIGFuZCBkcmF3aW5nIHRoZSBzdHJva2VcclxuICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgIGN0eC5tb3ZlVG8oZnJvbS54LCBmcm9tLnkpO1xyXG4gICAgY3R4LmxpbmVUbyhuZXdfdG8ueCwgbmV3X3RvLnkpO1xyXG4gICAgY3R4LnN0cm9rZVN0eWxlID0gXCIjYmJiYmJiXCI7XHJcbiAgICBjdHgubGluZVdpZHRoID0gd2lkdGg7XHJcbiAgICBjdHguc3Ryb2tlKCk7XHJcblxyXG4gICAgLy9zdGFydGluZyBhIG5ldyBwYXRoIGZyb20gdGhlIGhlYWQgb2YgdGhlIGFycm93IHRvIG9uZSBvZiB0aGUgc2lkZXMgb2YgdGhlIHBvaW50XHJcbiAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICBjdHgubW92ZVRvKG5ld190by54LCBuZXdfdG8ueSk7XHJcbiAgICBjdHgubGluZVRvKG5ld190by54IC0gaGVhZGxlbiAqIE1hdGguY29zKGFuZ2xlIC0gTWF0aC5QSSAvIDcpLCBuZXdfdG8ueSAtIGhlYWRsZW4gKiBNYXRoLnNpbihhbmdsZSAtIE1hdGguUEkgLyA3KSk7XHJcblxyXG4gICAgLy9wYXRoIGZyb20gdGhlIHNpZGUgcG9pbnQgb2YgdGhlIGFycm93LCB0byB0aGUgb3RoZXIgc2lkZSBwb2ludFxyXG4gICAgY3R4LmxpbmVUbyhuZXdfdG8ueCAtIGhlYWRsZW4gKiBNYXRoLmNvcyhhbmdsZSArIE1hdGguUEkgLyA3KSwgbmV3X3RvLnkgLSBoZWFkbGVuICogTWF0aC5zaW4oYW5nbGUgKyBNYXRoLlBJIC8gNykpO1xyXG5cclxuICAgIC8vcGF0aCBmcm9tIHRoZSBzaWRlIHBvaW50IGJhY2sgdG8gdGhlIHRpcCBvZiB0aGUgYXJyb3csIGFuZCB0aGVuIGFnYWluIHRvIHRoZSBvcHBvc2l0ZSBzaWRlIHBvaW50XHJcbiAgICBjdHgubGluZVRvKG5ld190by54LCBuZXdfdG8ueSk7XHJcbiAgICBjdHgubGluZVRvKG5ld190by54IC0gaGVhZGxlbiAqIE1hdGguY29zKGFuZ2xlIC0gTWF0aC5QSSAvIDcpLCBuZXdfdG8ueSAtIGhlYWRsZW4gKiBNYXRoLnNpbihhbmdsZSAtIE1hdGguUEkgLyA3KSk7XHJcblxyXG4gICAgLy9kcmF3cyB0aGUgcGF0aHMgY3JlYXRlZCBhYm92ZVxyXG4gICAgY3R4LnN0cm9rZVN0eWxlID0gXCIjYmJiYmJiXCI7XHJcbiAgICBjdHgubGluZVdpZHRoID0gd2lkdGg7XHJcbiAgICBjdHguc3Ryb2tlKCk7XHJcbiAgICBjdHguZmlsbFN0eWxlID0gXCIjYmJiYmJiXCI7XHJcbiAgICBjdHguZmlsbCgpO1xyXG4gICAgY3R4LmNsb3NlUGF0aCgpO1xyXG4gIH1cclxufSIsImltcG9ydCB7IGRyYXdHcmlkIH0gZnJvbSBcIi4vRHJhd2VyXCI7XHJcbmltcG9ydCB7IHNldEZpZWxkU2l6ZSwgc2V0RmllbGRTdHJlbmd0aCwgc2V0R3Jhdml0eVN0cmVuZ3RoLCBzZXRTdWJzdGVwcywgc2V0UGFydGljbGVzTnVtLCBzZXREcmF3T3V0bGluZX0gZnJvbSBcIi4vc2NyaXB0XCI7XHJcblxyXG5jb25zdCBtZW51X2J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWVudS1idXR0b25cIik7XHJcbmNvbnN0IG1lbnVfZWxlbWVudHM6IE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+ID0gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubWVudS1lbGVtZW50XCIpO1xyXG5cclxubWVudV9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCl7XHJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIG9wZW5NZW51KCk7XHJcbn0pO1xyXG5cclxuY29uc3Qgc3dpdGNoVGhlbWUgPSAoKSA9PiB7XHJcbiAgICBjb25zdCByb290RWxlbSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudFxyXG4gICAgbGV0IHRoZW1lID0gcm9vdEVsZW0uZ2V0QXR0cmlidXRlKCd0aGVtZScpLFxyXG4gICAgICBuZXdUaGVtZVxyXG4gICAgbmV3VGhlbWUgPSAodGhlbWUgPT09ICdsaWdodCcpID8gJ2RhcmsnIDogJ2xpZ2h0J1xyXG4gIFxyXG4gICAgcm9vdEVsZW0uc2V0QXR0cmlidXRlKCd0aGVtZScsIG5ld1RoZW1lKVxyXG4gICAgZHJhd0dyaWQoKTtcclxuICAgIC8vIHVwZGF0ZUNvbG9yKCk7XHJcbiAgfVxyXG5cclxuXHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0aGVtZS1zd2l0Y2gnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN3aXRjaFRoZW1lKTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBvcGVuTWVudSgpIHtcclxuICAgIGlmIChtZW51X2J1dHRvbi5nZXRBdHRyaWJ1dGUoXCJvcGVuXCIpID09IFwiZmFsc2VcIikge1xyXG4gICAgICAgIC8vIG1lbnVfYnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3Blbk1lbnUpXHJcbiAgICAgICAgbWVudV9idXR0b24uc2V0QXR0cmlidXRlKFwib3BlblwiLCBcInRydWVcIik7XHJcbiAgICAgICAgbWVudV9idXR0b24uc3R5bGUuY3Vyc29yID0gXCJhdXRvXCI7XHJcbiAgICAgICAgLy8gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gICAgIG1lbnVfZWxlbWVudHMuaXRlbSgwKS5zdHlsZS5kaXNwbGF5PSBcImlubGluZS1ibG9ja1wiO1xyXG4gICAgICAgIC8vIH0sIDMwMCk7XHJcblxyXG4gICAgICAgIG1lbnVfZWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjbG9zZU1lbnUoKSB7XHJcbiAgICBtZW51X2J1dHRvbi5zZXRBdHRyaWJ1dGUoXCJvcGVuXCIsIFwiZmFsc2VcIik7XHJcbiAgICBtZW51X2J1dHRvbi5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcclxuICAgIG1lbnVfZWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIH0pO1xyXG5cclxufVxyXG5cclxudmFyIGZpZWxkX3NpemVfc2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmaWVsZC1zaXplLXNsaWRlclwiKSAgYXMgSFRNTElucHV0RWxlbWVudDtcclxudmFyIGZpZWxkX3N0cmVuZ3RoX3NsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZmllbGQtc3RyZW5ndGgtc2xpZGVyXCIpICBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG52YXIgZ3Jhdml0eV9zdHJlbmd0aF9zbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdyYXZpdHktc3RyZW5ndGgtc2xpZGVyXCIpICBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG52YXIgc3Vic3RlcHNfYW1vdW50X2VudHJ5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdWJzdGVwcy1hbW91bnQtZW50cnlcIikgYXMgSFRNTElucHV0RWxlbWVudDtcclxudmFyIHBhcnRpY2xlc19hbW91bnRfZW50cnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBhcnRpY2xlcy1hbW91bnQtZW50cnlcIikgYXMgSFRNTElucHV0RWxlbWVudDtcclxudmFyIG91dGxpbmVfY2hlY2tib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRyYXdPdXRsaW5lXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG5maWVsZF9zaXplX3NsaWRlci5vbmlucHV0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICBzZXRGaWVsZFNpemUocGFyc2VJbnQoZmllbGRfc2l6ZV9zbGlkZXIudmFsdWUpKTtcclxuICB9XHJcblxyXG5maWVsZF9zdHJlbmd0aF9zbGlkZXIub25pbnB1dCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgc2V0RmllbGRTdHJlbmd0aChwYXJzZUludChmaWVsZF9zdHJlbmd0aF9zbGlkZXIudmFsdWUpKTtcclxuICB9XHJcblxyXG5ncmF2aXR5X3N0cmVuZ3RoX3NsaWRlci5vbmlucHV0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICBzZXRHcmF2aXR5U3RyZW5ndGgocGFyc2VJbnQoZ3Jhdml0eV9zdHJlbmd0aF9zbGlkZXIudmFsdWUpKTtcclxuICB9XHJcblxyXG5zdWJzdGVwc19hbW91bnRfZW50cnkuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oKSB7XHJcbiAgICBzZXRTdWJzdGVwcyhwYXJzZUludChzdWJzdGVwc19hbW91bnRfZW50cnkudmFsdWUpKTtcclxufSk7XHJcblxyXG5wYXJ0aWNsZXNfYW1vdW50X2VudHJ5LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgc2V0UGFydGljbGVzTnVtKHBhcnNlSW50KHBhcnRpY2xlc19hbW91bnRfZW50cnkudmFsdWUpKTtcclxufSk7XHJcblxyXG5vdXRsaW5lX2NoZWNrYm94Lm9uaW5wdXQgPSBmdW5jdGlvbigpIHtcclxuICAgIHNldERyYXdPdXRsaW5lKG91dGxpbmVfY2hlY2tib3guY2hlY2tlZClcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFBvaW50ZXJGdW5jdGlvbigpIHtcclxuICAgIHZhciByYWRpb0J1dHRvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgnY3Vyc29yLWZ1bmN0aW9uJykgYXMgTm9kZUxpc3RPZjxIVE1MSW5wdXRFbGVtZW50PlxyXG4gIFxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYWRpb0J1dHRvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKHJhZGlvQnV0dG9uc1tpXS5jaGVja2VkKSB7XHJcbiAgICAgICAgcmV0dXJuIHJhZGlvQnV0dG9uc1tpXS52YWx1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiIsImltcG9ydCB7IGNyZWF0ZVByb2dyYW0sIGNyZWF0ZVNoYWRlciB9IGZyb20gXCIuL1NoYWRlckhlbHBlclwiO1xyXG5pbXBvcnQgVmVjMkQgZnJvbSBcIi4vVmVjMkRcIlxyXG5pbXBvcnQgeyBkcmF3T3V0bGluZSwgZ3JpZCwgZ3JpZFNpemUgfSBmcm9tIFwiLi9zY3JpcHRcIjtcclxuaW1wb3J0IHBhcnRpY2xlRnJhZ21lbnRTaGFkZXIgZnJvbSBcIi4vc2hhZGVycy9wYXJ0aWNsZUZyYWdtZW50U2hhZGVyLmZyYWdcIjtcclxuaW1wb3J0IHBhcnRpY2xlVmVydGV4U2hhZGVyIGZyb20gXCIuL3NoYWRlcnMvcGFydGljbGVWZXJ0ZXhTaGFkZXIudmVydFwiO1xyXG4vLyBiYWNrIGJ1dHRvblxyXG4vLyBOdW1iZXJzIGluIG1lbnVcclxuLy8gZ3JpZCBzaXplIGFkalxyXG4vLyBiYWxsIHJhbmRvbW5lc3NcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFydGljbGUge1xyXG4gICAgc3RhdGljIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JlZ3JvdW5kLWNhbnZhcycpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgc3RhdGljIGdsID0gUGFydGljbGUuY2FudmFzIS5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAvLyBzdGF0aWMgdmVydGV4U2hhZGVyID0gY3JlYXRlU2hhZGVyKFBhcnRpY2xlLmdsLCBQYXJ0aWNsZS5nbC5WRVJURVhfU0hBREVSLCBwYXJ0aWNsZVZlcnRleFNoYWRlcik7XHJcbiAgICAvLyBzdGF0aWMgZnJhZ21lbnRTaGFkZXIgPSBjcmVhdGVTaGFkZXIoUGFydGljbGUuZ2wsIFBhcnRpY2xlLmdsLkZSQUdNRU5UX1NIQURFUiwgcGFydGljbGVGcmFnbWVudFNoYWRlcik7XHJcbiAgICAvLyBzdGF0aWMgcHJvZ3JhbSA9IGNyZWF0ZVByb2dyYW0oUGFydGljbGUuZ2wsIFBhcnRpY2xlLnZlcnRleFNoYWRlciwgUGFydGljbGUuZnJhZ21lbnRTaGFkZXIpO1xyXG4gICAgcG9zX2N1cnI6IFZlYzJEXHJcbiAgICBwb3NfcHJldjogVmVjMkRcclxuICAgIGFjY2VsZXJhdGlvbjogVmVjMkRcclxuICAgIHJhZGl1czogbnVtYmVyXHJcbiAgICBjb2xvcjoge3I6bnVtYmVyLCBnOm51bWJlciwgYjpudW1iZXJ9XHJcbiAgICBncmlkQ2VsbDogVmVjMkRcclxuICAgIFxyXG5cclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwb3M6IFZlYzJELCByYWRpdXM6IG51bWJlciwgYWNjOiBWZWMyRCwgY29sb3I6IHtyOm51bWJlciwgZzpudW1iZXIsIGI6bnVtYmVyfSkge1xyXG4gICAgICB0aGlzLnBvc19jdXJyID0gcG9zO1xyXG4gICAgICB0aGlzLnBvc19wcmV2ID0gdGhpcy5wb3NfY3VycjtcclxuICAgICAgdGhpcy5yYWRpdXMgPSByYWRpdXM7XHJcbiAgICAgIHRoaXMuYWNjZWxlcmF0aW9uID0gYWNjO1xyXG4gICAgICB0aGlzLmNvbG9yID0gY29sb3I7XHJcbiAgICAgIHRoaXMudXBkYXRlQ2VsbChuZXcgVmVjMkQoXHJcbiAgICAgICAgICAgICAgICAgICAgICBNYXRoLmZsb29yKHRoaXMucG9zX2N1cnIueCAvIGdyaWRTaXplKSxcclxuICAgICAgICAgICAgICAgICAgICAgIE1hdGguZmxvb3IodGhpcy5wb3NfY3Vyci55IC8gZ3JpZFNpemUpKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhdygpIHtcclxuICAgICAgLy8gbGV0IHhwb3M6IG51bWJlciA9IHRoaXMucG9zX2N1cnIueFxyXG4gICAgICAvLyBsZXQgeXBvczogbnVtYmVyID0gdGhpcy5wb3NfY3Vyci55XHJcbiAgICAgIC8vIFBhcnRpY2xlLmdsLmJlZ2luUGF0aCgpO1xyXG4gICAgICAvLyBQYXJ0aWNsZS5nbC5hcmMoXHJcbiAgICAgIC8vICAgeHBvcyxcclxuICAgICAgLy8gICB5cG9zLFxyXG4gICAgICAvLyAgIHRoaXMucmFkaXVzLFxyXG4gICAgICAvLyAgIDAsXHJcbiAgICAgIC8vICAgMiAqIE1hdGguUEksXHJcbiAgICAgIC8vICAgZmFsc2VcclxuICAgICAgLy8gKTtcclxuICAgICAgLy8gUGFydGljbGUuZ2wuZmlsbFN0eWxlID0gdGhpcy5jb2xvcjtcclxuICAgICAgLy8gUGFydGljbGUuZ2wuZmlsbCgpO1xyXG5cclxuICAgICAgLy8gaWYoZHJhd091dGxpbmUpe1xyXG4gICAgICAvLyAgIFBhcnRpY2xlLmdsLmxpbmVXaWR0aCA9IDI7XHJcbiAgICAgIC8vICAgUGFydGljbGUuZ2wuc3Ryb2tlU3R5bGUgPSBcImJsYWNrXCI7XHJcbiAgICAgIC8vICAgUGFydGljbGUuZ2wuc3Ryb2tlKCk7XHJcbiAgICAgIC8vIH1cclxuXHJcbiAgICAgIC8vIFBhcnRpY2xlLmdsLmNsb3NlUGF0aCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVBvc2l0aW9uKGR0OiBudW1iZXIpe1xyXG4gICAgICBsZXQgdmVsb2NpdHk6IFZlYzJEID0gbmV3IFZlYzJEKHRoaXMucG9zX2N1cnIueCAtIHRoaXMucG9zX3ByZXYueCwgdGhpcy5wb3NfY3Vyci55IC0gdGhpcy5wb3NfcHJldi55KTtcclxuICAgICAgdGhpcy5wb3NfcHJldiA9IHRoaXMucG9zX2N1cnIuY2xvbmUoKVxyXG5cclxuICAgICAgdGhpcy5wb3NfY3Vyci5hZGQodmVsb2NpdHkpXHJcbiAgICAgIHRoaXMuYWNjZWxlcmF0aW9uLm11bHRpcGx5KGR0KmR0KVxyXG4gICAgICB0aGlzLnBvc19jdXJyLmFkZCh0aGlzLmFjY2VsZXJhdGlvbilcclxuXHJcbiAgICAgIHRoaXMuYWNjZWxlcmF0aW9uLnggPSAwXHJcbiAgICAgIHRoaXMuYWNjZWxlcmF0aW9uLnkgPSAwXHJcbiAgICB9XHJcblxyXG4gICAgYWNjZWxlcmF0ZShhY2M6VmVjMkQpe1xyXG4gICAgICB0aGlzLmFjY2VsZXJhdGlvbi5hZGQoYWNjKVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUNlbGwoZ3JpZFBvczogVmVjMkQpe1xyXG4gICAgICB0aGlzLmdyaWRDZWxsID0gZ3JpZFBvcztcclxuICAgIH1cclxuXHJcbiAgICBcclxuICB9IiwiaW1wb3J0IHBhcnRpY2xlRnJhZ21lbnRTaGFkZXIgZnJvbSBcIi4vc2hhZGVycy9wYXJ0aWNsZUZyYWdtZW50U2hhZGVyLmZyYWdcIjtcclxuaW1wb3J0IHBhcnRpY2xlVmVydGV4U2hhZGVyIGZyb20gXCIuL3NoYWRlcnMvcGFydGljbGVWZXJ0ZXhTaGFkZXIudmVydFwiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNoYWRlcihnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCB0eXBlOiBhbnksIHNvdXJjZTogYW55KSB7XHJcbiAgICB2YXIgc2hhZGVyID0gZ2wuY3JlYXRlU2hhZGVyKHR5cGUpO1xyXG4gICAgZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgc291cmNlKTtcclxuICAgIGdsLmNvbXBpbGVTaGFkZXIoc2hhZGVyKTtcclxuICAgIHZhciBzdWNjZXNzID0gZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgZ2wuQ09NUElMRV9TVEFUVVMpO1xyXG4gICAgaWYgKHN1Y2Nlc3MpIHtcclxuICAgICAgcmV0dXJuIHNoYWRlcjtcclxuICAgIH1cclxuICAgXHJcbiAgICBjb25zb2xlLmxvZyhnbC5nZXRTaGFkZXJJbmZvTG9nKHNoYWRlcikpO1xyXG4gICAgZ2wuZGVsZXRlU2hhZGVyKHNoYWRlcik7XHJcbiAgfVxyXG5cclxuICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlUHJvZ3JhbShnbDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCB2ZXJ0ZXhTaGFkZXI6IFdlYkdMU2hhZGVyLCBmcmFnbWVudFNoYWRlcjogV2ViR0xTaGFkZXIpIHtcclxuICAgIHZhciBwcm9ncmFtID0gZ2wuY3JlYXRlUHJvZ3JhbSgpO1xyXG4gICAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIHZlcnRleFNoYWRlcik7XHJcbiAgICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgZnJhZ21lbnRTaGFkZXIpO1xyXG4gICAgZ2wubGlua1Byb2dyYW0ocHJvZ3JhbSk7XHJcbiAgICB2YXIgc3VjY2VzcyA9IGdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgZ2wuTElOS19TVEFUVVMpO1xyXG4gICAgaWYgKHN1Y2Nlc3MpIHtcclxuICAgICAgcmV0dXJuIHByb2dyYW07XHJcbiAgICB9XHJcbiAgIFxyXG4gICAgY29uc29sZS5sb2coZ2wuZ2V0UHJvZ3JhbUluZm9Mb2cocHJvZ3JhbSkpO1xyXG4gICAgZ2wuZGVsZXRlUHJvZ3JhbShwcm9ncmFtKTtcclxuICB9XHJcblxyXG4gIGV4cG9ydCBmdW5jdGlvbiByZXNpemVDYW52YXNUb0Rpc3BsYXlTaXplKGNhbnZhczphbnkpIHtcclxuICAgIC8vIExvb2t1cCB0aGUgc2l6ZSB0aGUgYnJvd3NlciBpcyBkaXNwbGF5aW5nIHRoZSBjYW52YXMgaW4gQ1NTIHBpeGVscy5cclxuICAgIGNvbnN0IGRpc3BsYXlXaWR0aCAgPSBjYW52YXMuY2xpZW50V2lkdGg7XHJcbiAgICBjb25zdCBkaXNwbGF5SGVpZ2h0ID0gY2FudmFzLmNsaWVudEhlaWdodDtcclxuICAgXHJcbiAgICAvLyBDaGVjayBpZiB0aGUgY2FudmFzIGlzIG5vdCB0aGUgc2FtZSBzaXplLlxyXG4gICAgY29uc3QgbmVlZFJlc2l6ZSA9IGNhbnZhcy53aWR0aCAgIT09IGRpc3BsYXlXaWR0aCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgIT09IGRpc3BsYXlIZWlnaHQ7XHJcbiAgIFxyXG4gICAgaWYgKG5lZWRSZXNpemUpIHtcclxuICAgICAgLy8gTWFrZSB0aGUgY2FudmFzIHRoZSBzYW1lIHNpemVcclxuICAgICAgY2FudmFzLndpZHRoICA9IGRpc3BsYXlXaWR0aDtcclxuICAgICAgY2FudmFzLmhlaWdodCA9IGRpc3BsYXlIZWlnaHQ7XHJcbiAgICB9XHJcbiAgIFxyXG4gICAgcmV0dXJuIG5lZWRSZXNpemU7XHJcblxyXG4gIH1cclxuXHJcblxyXG4gIGV4cG9ydCBmdW5jdGlvbiBpbml0UGFydGljbGVTaGFkZXIoKXtcclxuXHJcblxyXG4vLyB2YXIgd2lkdGggPSBnbC5jYW52YXMud2lkdGg7XHJcbi8vIHZhciBoZWlnaHQgPSBnbC5jYW52YXMuaGVpZ2h0O1xyXG4vLyB2YXIgY2VudGVyWCA9IDIwMCAvIHdpZHRoO1xyXG4vLyB2YXIgY2VudGVyWSA9IDIwMCAvIGhlaWdodDtcclxuLy8gY29uc29sZS5sb2cod2lkdGgpO1xyXG4vLyBjb25zb2xlLmxvZyhoZWlnaHQpO1xyXG4vLyBjb25zb2xlLmxvZyhjZW50ZXJYKTtcclxuLy8gY29uc29sZS5sb2coY2VudGVyWSk7XHJcbi8vIHZhciByYWRpdXMgPSBNYXRoLm1pbigyMDAsIDIwMCkgLyAyO1xyXG4vLyB2YXIgbm9ybUNlbnRlclggPSBjZW50ZXJYLzI7XHJcbi8vIHZhciBub3JtQ2VudGVyWSA9IGNlbnRlclk7XHJcbi8vIHZhciBub3JtUmFkaXVzID0gcmFkaXVzIC8gd2lkdGg7XHJcbi8vIGNvbnNvbGUubG9nKG5vcm1SYWRpdXMpO1xyXG4vLyBjb25zb2xlLmxvZyhub3JtQ2VudGVyWCk7XHJcbi8vIGNvbnNvbGUubG9nKG5vcm1DZW50ZXJZKTtcclxuXHJcblxyXG5cclxuLy8gcmVzaXplQ2FudmFzVG9EaXNwbGF5U2l6ZShnbC5jYW52YXMpO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4vL3NldHRpbmcgdGhlIHJlc29sdXRpb25cclxuLy8gZ2wudW5pZm9ybTJmKHJlc29sdXRpb25Vbmlmb3JtTG9jYXRpb24sIGdsLmNhbnZhcy53aWR0aCwgZ2wuY2FudmFzLmhlaWdodCk7XHJcbi8vIGdsLnVuaWZvcm0yZihnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgXCJ1X2NlbnRlclwiKSwgbm9ybUNlbnRlclgsIG5vcm1DZW50ZXJZKTtcclxuLy8gZ2wudW5pZm9ybTFmKGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCBcInVfcmFkaXVzXCIpLCBub3JtUmFkaXVzKTtcclxuXHJcblxyXG5cclxuICB9IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmVjMkQge1xyXG4gICAgeDogbnVtYmVyO1xyXG4gICAgeTogbnVtYmVyO1xyXG4gIFxyXG4gICAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgdGhpcy54ID0geDtcclxuICAgICAgdGhpcy55ID0geTtcclxuICAgIH1cclxuICBcclxuICAgIGFkZChvdGhlcjogVmVjMkQpe1xyXG4gICAgICB0aGlzLnggKz0gb3RoZXIueDtcclxuICAgICAgdGhpcy55ICs9IG90aGVyLnk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0KG90aGVyOiBWZWMyRCl7XHJcbiAgICAgIHRoaXMueCA9IG90aGVyLng7XHJcbiAgICAgIHRoaXMueSA9IG90aGVyLnk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBzdWJ0cmFjdChvdGhlcjogVmVjMkQpe1xyXG4gICAgICB0aGlzLnggLT0gb3RoZXIueDtcclxuICAgICAgdGhpcy55IC09IG90aGVyLnk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBtdWx0aXBseShzY2FsYXI6IG51bWJlcikge1xyXG4gICAgICB0aGlzLnggKj0gc2NhbGFyO1xyXG4gICAgICB0aGlzLnkgKj0gc2NhbGFyO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgZGl2aWRlKHNjYWxhcjogbnVtYmVyKXtcclxuICAgICAgdGhpcy54IC89IHNjYWxhcjtcclxuICAgICAgdGhpcy55IC89IHNjYWxhcjtcclxuICAgIH1cclxuICBcclxuICAgIGRvdCh2ZWM6IFZlYzJEKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMueCAqIHZlYy54ICsgdGhpcy55ICogdmVjLnk7XHJcbiAgICB9XHJcblxyXG4gICAgbGVuZ3RoKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55KTtcclxuICAgIH1cclxuXHJcbiAgICBzcXVhcmVkTGVuZ3RoKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLnggKiB0aGlzLnggKyB0aGlzLnkgKiB0aGlzLnk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvbmUoKTogVmVjMkR7XHJcbiAgICAgIHJldHVybiBuZXcgVmVjMkQodGhpcy54LCB0aGlzLnkpXHJcbiAgICB9XHJcblxyXG4gICAgZGlmZmVyZW5jZShvdGhlcjogVmVjMkQpOiBWZWMyRHtcclxuICAgICAgcmV0dXJuIG5ldyBWZWMyRCh0aGlzLnggLSBvdGhlci54LCB0aGlzLnkgLSBvdGhlci55KVxyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCBBdHRyYWN0b3IgZnJvbSBcIi4vQXR0cmFjdG9yXCI7XHJcbmltcG9ydCB7IGRyYXdBcnJvdywgZHJhd0dyaWQsIGRyYXdMYXNzbywgZHJhd1BhcnRpY2xlcywgZHJhd1RhaWwsIHNldEdlb21ldHJ5IH0gZnJvbSBcIi4vRHJhd2VyXCI7XHJcbmltcG9ydCB7IGNsb3NlTWVudSwgZ2V0UG9pbnRlckZ1bmN0aW9uIH0gZnJvbSBcIi4vTWVudU1hbmFnZXJcIjtcclxuaW1wb3J0IFBhcnRpY2xlIGZyb20gXCIuL1BhcnRpY2xlXCI7XHJcbmltcG9ydCB7IGluaXRQYXJ0aWNsZVNoYWRlciB9IGZyb20gXCIuL1NoYWRlckhlbHBlclwiO1xyXG5pbXBvcnQgVmVjMkQgZnJvbSBcIi4vVmVjMkRcIjtcclxuZXhwb3J0IGNvbnN0IGdyaWRTaXplID0gMjA7XHJcbmV4cG9ydCBjb25zdCBncmlkOiBQYXJ0aWNsZVtdW11bXSA9IFtdO1xyXG5cclxuZXhwb3J0IGNvbnN0IHBhcnRpY2xlczogUGFydGljbGVbXSA9IFtdO1xyXG52YXIgYXR0cmFjdG9yczogQXR0cmFjdG9yW10gPSBbXTtcclxudmFyIHBhcnRpY2xlQ291bnQgPSAxMDAwO1xyXG52YXIgbnVtYmVyX29mX2NvbGxpc2lvbnMgPSAwO1xyXG5leHBvcnQgY29uc3QgcG9pbnRlclBvc2l0aW9uID0gbmV3IFZlYzJEKDAsIDApXHJcbnZhciBjbGlja19zdGFydF9wb3NpdGlvbiA9IG5ldyBWZWMyRCgwLCAwKVxyXG52YXIgcG9pbnRlcl9mdW5jdGlvbiA9ICdmaWVsZCdcclxuZXhwb3J0IHZhciBncmF2aXR5ID0gbmV3IFZlYzJEKDAsIDEpXHJcbmV4cG9ydCBjb25zdCBmb3JlZ3JvdW5kX2NhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JlZ3JvdW5kLWNhbnZhcycpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xyXG5jb25zdCBiYWNrZ3JvdW5kX2NhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYWNrZ3JvdW5kLWNhbnZhcycpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xyXG5jb25zdCB3ZWJnbF9jYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2ViZ2wtY2FudmFzJykgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XHJcblxyXG5leHBvcnQgdmFyIGZpZWxkU2l6ZSA9IDEwMFxyXG5leHBvcnQgdmFyIGRyYXdPdXRsaW5lID0gdHJ1ZVxyXG52YXIgZmllbGRTdHJlbmd0aCA9IDEwXHJcbnZhciBzdWJzdGVwc19hbW91bnQgPSA0XHJcbnZhciBncmlkQ29sdW1ucyA9IE1hdGguY2VpbChmb3JlZ3JvdW5kX2NhbnZhcy53aWR0aCAvIGdyaWRTaXplKTtcclxudmFyIGdyaWRSb3dzID0gTWF0aC5jZWlsKGZvcmVncm91bmRfY2FudmFzLmhlaWdodCAvIGdyaWRTaXplKTtcclxuZm9yZWdyb3VuZF9jYW52YXMhLndpZHRoID0gZm9yZWdyb3VuZF9jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XHJcbmZvcmVncm91bmRfY2FudmFzIS5oZWlnaHQgPSBmb3JlZ3JvdW5kX2NhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XHJcbmJhY2tncm91bmRfY2FudmFzIS53aWR0aCA9IGJhY2tncm91bmRfY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xyXG5iYWNrZ3JvdW5kX2NhbnZhcyEuaGVpZ2h0ID0gYmFja2dyb3VuZF9jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xyXG53ZWJnbF9jYW52YXMhLndpZHRoID0gd2ViZ2xfY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xyXG53ZWJnbF9jYW52YXMhLmhlaWdodCA9IHdlYmdsX2NhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XHJcbmV4cG9ydCBjb25zdCBjdHggPSBmb3JlZ3JvdW5kX2NhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4vLyBleHBvcnQgY29uc3QgY3R4ID0gUGFydGljbGUuY2FudmFzIS5nZXRDb250ZXh0KCcyZCcpO1xyXG5leHBvcnQgY29uc3QgYmFja19jdHggPSBiYWNrZ3JvdW5kX2NhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG5leHBvcnQgdmFyIGZwcyA9IDYwO1xyXG5leHBvcnQgbGV0IGNsaWNrZWQgPSBmYWxzZVxyXG5sZXQgZnBzQ291bnRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5mcHNDb3VudGVyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuZnBzQ291bnRlci5zdHlsZS50b3AgPSAnMTBweCc7XHJcbmZwc0NvdW50ZXIuc3R5bGUubGVmdCA9ICcxMHB4JztcclxuXHJcbmxldCBwYXJ0aWNsZUNvdW50ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxucGFydGljbGVDb3VudGVyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxucGFydGljbGVDb3VudGVyLnN0eWxlLnRvcCA9ICczMHB4JztcclxucGFydGljbGVDb3VudGVyLnN0eWxlLmxlZnQgPSAnMTBweCc7XHJcblxyXG5sZXQgY29sbGlzaW9uQ291bnRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5jb2xsaXNpb25Db3VudGVyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuY29sbGlzaW9uQ291bnRlci5zdHlsZS50b3AgPSAnNTBweCc7XHJcbmNvbGxpc2lvbkNvdW50ZXIuc3R5bGUubGVmdCA9ICcxMHB4JztcclxuXHJcblxyXG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZwc0NvdW50ZXIpO1xyXG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHBhcnRpY2xlQ291bnRlcik7XHJcbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29sbGlzaW9uQ291bnRlcik7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0RmllbGRTdHJlbmd0aCh2YWx1ZTogbnVtYmVyKSB7XHJcbiAgZmllbGRTdHJlbmd0aCA9IHZhbHVlO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0RmllbGRTaXplKHZhbHVlOiBudW1iZXIpIHtcclxuICBmaWVsZFNpemUgPSB2YWx1ZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldEdyYXZpdHlTdHJlbmd0aCh2YWx1ZTogbnVtYmVyKSB7XHJcbiAgZ3Jhdml0eSA9IG5ldyBWZWMyRCgwLCB2YWx1ZSAqIDAuMSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRTdWJzdGVwcyh2YWx1ZTogbnVtYmVyKSB7XHJcbiAgc3Vic3RlcHNfYW1vdW50ID0gdmFsdWU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRQYXJ0aWNsZXNOdW0odmFsdWU6IG51bWJlcikge1xyXG4gIHBhcnRpY2xlQ291bnQgPSB2YWx1ZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldERyYXdPdXRsaW5lKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgZHJhd091dGxpbmUgPSB2YWx1ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUdyaWQoKSB7XHJcbiAgZ3JpZENvbHVtbnMgPSBNYXRoLmNlaWwoZm9yZWdyb3VuZF9jYW52YXMud2lkdGggLyBncmlkU2l6ZSk7XHJcbiAgZ3JpZFJvd3MgPSBNYXRoLmNlaWwoZm9yZWdyb3VuZF9jYW52YXMuaGVpZ2h0IC8gZ3JpZFNpemUpO1xyXG4gIGNvbnNvbGUubG9nKGdyaWRDb2x1bW5zKTtcclxuICBjb25zb2xlLmxvZyhncmlkUm93cyk7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBncmlkQ29sdW1uczsgaSsrKSB7XHJcbiAgICBncmlkW2ldID0gW107XHJcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IGdyaWRSb3dzOyBqKyspIHtcclxuICAgICAgZ3JpZFtpXVtqXSA9IFtdO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlRnJvbUdyaWQoKSB7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBncmlkQ29sdW1uczsgaSsrKSB7XHJcbiAgICBncmlkW2ldID0gW107XHJcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IGdyaWRSb3dzOyBqKyspIHtcclxuICAgICAgZ3JpZFtpXVtqXSA9IFtdO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gYWRkVG9HcmlkKHBhcnRpY2xlOiBQYXJ0aWNsZSkge1xyXG4gIGNvbnN0IGNvbHVtbiA9IE1hdGguZmxvb3IocGFydGljbGUucG9zX2N1cnIueCAvIGdyaWRTaXplKTtcclxuICBjb25zdCByb3cgPSBNYXRoLmZsb29yKHBhcnRpY2xlLnBvc19jdXJyLnkgLyBncmlkU2l6ZSk7XHJcblxyXG4gIGlmIChjb2x1bW4gPj0gMCAmJiBjb2x1bW4gPCBncmlkLmxlbmd0aCAmJiByb3cgPj0gMCAmJiByb3cgPCBncmlkW2NvbHVtbl0ubGVuZ3RoKSB7XHJcbiAgICBncmlkW2NvbHVtbl1bcm93XS5wdXNoKHBhcnRpY2xlKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldE5laWdoYm9yaW5nUGFydGljbGVzKHBhcnRpY2xlOiBQYXJ0aWNsZSk6IFBhcnRpY2xlW10ge1xyXG4gIGNvbnN0IGNvbHVtbiA9IE1hdGguZmxvb3IocGFydGljbGUucG9zX2N1cnIueCAvIGdyaWRTaXplKTtcclxuICBjb25zdCByb3cgPSBNYXRoLmZsb29yKHBhcnRpY2xlLnBvc19jdXJyLnkgLyBncmlkU2l6ZSk7XHJcbiAgY29uc3QgbmVpZ2hib3JpbmdQYXJ0aWNsZXM6IFBhcnRpY2xlW10gPSBbXTtcclxuXHJcbiAgZm9yIChsZXQgaSA9IGNvbHVtbiAtIDE7IGkgPD0gY29sdW1uICsgMTsgaSsrKSB7XHJcbiAgICBmb3IgKGxldCBqID0gcm93IC0gMTsgaiA8PSByb3cgKyAxOyBqKyspIHtcclxuICAgICAgaWYgKGkgPj0gMCAmJiBpIDwgZ3JpZC5sZW5ndGggJiYgaiA+PSAwICYmIGogPCBncmlkW2ldLmxlbmd0aCkge1xyXG4gICAgICAgIG5laWdoYm9yaW5nUGFydGljbGVzLnB1c2goLi4uZ3JpZFtpXVtqXSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIG5laWdoYm9yaW5nUGFydGljbGVzO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0aWNrKGR0OiBudW1iZXIpIHtcclxuICB2YXIgc3ViX3N0ZXBzID0gc3Vic3RlcHNfYW1vdW50O1xyXG4gIHZhciBzdWJfZHQgPSBkdCAvIHN1Yl9zdGVwcztcclxuXHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJfc3RlcHM7IGkrKykge1xyXG4gICAgaWYgKGdyYXZpdHkueSAhPSAwKSB7XHJcbiAgICAgIGFwcGx5R3Jhdml0eSgpO1xyXG4gICAgfVxyXG4gICAgaWYgKGNsaWNrZWQpIHtcclxuICAgICAgc3dpdGNoIChwb2ludGVyX2Z1bmN0aW9uKSB7XHJcbiAgICAgICAgY2FzZSAnZmllbGQnOlxyXG4gICAgICAgICAgYXBwbHlGaWVsZChwb2ludGVyUG9zaXRpb24pO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnZ3Jhdml0eSc6XHJcbiAgICAgICAgICBncmF2aXR5ID0gcG9pbnRlclBvc2l0aW9uLmRpZmZlcmVuY2UoY2xpY2tfc3RhcnRfcG9zaXRpb24pXHJcbiAgICAgICAgICBncmF2aXR5LmRpdmlkZSgyMDApXHJcbiAgICAgICAgY2FzZSAndGhyb3cnOlxyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgfVxyXG4gICAgLy8gYXBwbHlBdHRyYWN0b3JGb3JjZXNUb0FsbCgpO1xyXG4gICAgYXBwbHlDb25zdHJhaW50VG9BbGxFZGdlcygpO1xyXG4gICAgc29sdmVDb2xsaXNpb25zKCk7XHJcbiAgICB1cGRhdGVQb3NpdGlvbnMoc3ViX2R0KTtcclxuICB9XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBhcHBseUNvbnN0cmFpbnRUb0FsbEVkZ2VzKCkge1xyXG5cclxuICBwYXJ0aWNsZXMuZm9yRWFjaCgocGFydGljbGUpID0+IHtcclxuICAgIGFwcGx5Q29uc3RyYWludChwYXJ0aWNsZSk7XHJcbiAgfSk7XHJcbiAgLy8gZm9yICh2YXIgY29sID0gMDsgY29sIDwgZ3JpZC5sZW5ndGg7IGNvbCsrKSB7XHJcbiAgLy8gICBmb3IgKHZhciB0aGlja25lc3MgPSAwOyB0aGlja25lc3MgPCAyOyB0aGlja25lc3MrKykge1xyXG4gIC8vICAgICBncmlkW2NvbF1bdGhpY2tuZXNzXS5mb3JFYWNoKChwYXJ0aWNsZSkgPT4ge1xyXG4gIC8vICAgICAgIGFwcGx5Q29uc3RyYWludChwYXJ0aWNsZSk7XHJcbiAgLy8gICAgIH0pO1xyXG5cclxuICAvLyAgICAgZ3JpZFtjb2xdW2dyaWRbMF0ubGVuZ3RoIC0gdGhpY2tuZXNzIC0gMV0uZm9yRWFjaCgocGFydGljbGUpID0+IHtcclxuICAvLyAgICAgICBhcHBseUNvbnN0cmFpbnQocGFydGljbGUpO1xyXG4gIC8vICAgICB9KTtcclxuICAvLyAgIH1cclxuICAvLyB9XHJcblxyXG4gIC8vIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IGdyaWRbMF0ubGVuZ3RoOyByb3crKykge1xyXG4gIC8vICAgZm9yICh2YXIgdGhpY2tuZXNzID0gMDsgdGhpY2tuZXNzIDwgMjsgdGhpY2tuZXNzKyspIHtcclxuICAvLyAgICAgZ3JpZFt0aGlja25lc3NdW3Jvd10uZm9yRWFjaCgocGFydGljbGUpID0+IHtcclxuICAvLyAgICAgICBhcHBseUNvbnN0cmFpbnQocGFydGljbGUpO1xyXG4gIC8vICAgICB9KTtcclxuXHJcbiAgLy8gICAgIGdyaWRbZ3JpZC5sZW5ndGggLSB0aGlja25lc3MgLSAxXVtyb3ddLmZvckVhY2goKHBhcnRpY2xlKSA9PiB7XHJcbiAgLy8gICAgICAgYXBwbHlDb25zdHJhaW50KHBhcnRpY2xlKTtcclxuICAvLyAgICAgfSk7XHJcbiAgLy8gICB9XHJcbiAgLy8gfVxyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVQb3NpdGlvbnMoZHQ6IG51bWJlcikge1xyXG4gIHJlbW92ZUZyb21HcmlkKCk7XHJcbiAgcGFydGljbGVzLmZvckVhY2goKHBhcnRpY2xlKSA9PiB7XHJcblxyXG4gICAgcGFydGljbGUudXBkYXRlUG9zaXRpb24oZHQpO1xyXG4gICAgYWRkVG9HcmlkKHBhcnRpY2xlKTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gYXBwbHlHcmF2aXR5KCkge1xyXG4gIHBhcnRpY2xlcy5mb3JFYWNoKChwYXJ0aWNsZSkgPT4ge1xyXG4gICAgcGFydGljbGUuYWNjZWxlcmF0ZShncmF2aXR5KTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gYXBwbHlGaWVsZChmaWVsZFBvczogVmVjMkQpIHtcclxuICBwYXJ0aWNsZXMuZm9yRWFjaCgocGFydGljbGUpID0+IHtcclxuICAgIGNvbnN0IHB1bGxEaXJlY3Rpb24gPSBmaWVsZFBvcy5kaWZmZXJlbmNlKHBhcnRpY2xlLnBvc19jdXJyKVxyXG4gICAgY29uc3QgZGlzdGFuY2UgPSBwdWxsRGlyZWN0aW9uLmxlbmd0aCgpO1xyXG5cclxuICAgIGlmIChkaXN0YW5jZSA8IGZpZWxkU2l6ZSAmJiBkaXN0YW5jZSA+IDEwKSB7XHJcbiAgICAgIHB1bGxEaXJlY3Rpb24ubXVsdGlwbHkoZmllbGRTdHJlbmd0aCAqIDEwMCk7XHJcbiAgICAgIHB1bGxEaXJlY3Rpb24uZGl2aWRlKGRpc3RhbmNlICogZGlzdGFuY2UpXHJcbiAgICAgIHBhcnRpY2xlLmFjY2VsZXJhdGUocHVsbERpcmVjdGlvbik7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFwcGx5QXR0cmFjdG9yRm9yY2VzVG9BbGwoKSB7XHJcbiAgcGFydGljbGVzLmZvckVhY2goKHBhcnRpY2xlKSA9PiB7XHJcbiAgICBhcHBseUF0dHJhY3RvckZvcmNlcyhwYXJ0aWNsZSlcclxuICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5QXR0cmFjdG9yRm9yY2VzKHBhcnRpY2xlOiBQYXJ0aWNsZSkge1xyXG4gIGF0dHJhY3RvcnMuZm9yRWFjaCgoYXR0cmFjdG9yKSA9PiB7XHJcbiAgICBjb25zdCBwdWxsRGlyZWN0aW9uID0gYXR0cmFjdG9yLnBvcy5kaWZmZXJlbmNlKHBhcnRpY2xlLnBvc19jdXJyKVxyXG4gICAgY29uc3QgZGlzdGFuY2UgPSBwdWxsRGlyZWN0aW9uLmxlbmd0aCgpO1xyXG5cclxuICAgIGlmIChkaXN0YW5jZSA8IGF0dHJhY3Rvci5yYWRpdXMgJiYgZGlzdGFuY2UgPiAxMCkge1xyXG4gICAgICBwdWxsRGlyZWN0aW9uLm11bHRpcGx5KGF0dHJhY3Rvci5mb3JjZSk7XHJcbiAgICAgIHB1bGxEaXJlY3Rpb24uZGl2aWRlKGRpc3RhbmNlICogZGlzdGFuY2UpXHJcbiAgICAgIHBhcnRpY2xlLmFjY2VsZXJhdGUocHVsbERpcmVjdGlvbik7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNvbHZlQ29sbGlzaW9ucygpIHtcclxuICBudW1iZXJfb2ZfY29sbGlzaW9ucyA9IDA7XHJcblxyXG5cclxuICBsZXQgdGVtcENvbGxpc2lvbkRpcmVjdGlvbiA9IG5ldyBWZWMyRCgwLCAwKTtcclxuICBsZXQgc3F1YXJlZERpc3RhbmNlID0gMDtcclxuICBsZXQgcmFkaWlTdW0gPSAwO1xyXG4gIGxldCBzcXVhcmVkUmFkaWlTdW0gPSAwO1xyXG5cclxuICBwYXJ0aWNsZXMuZm9yRWFjaCgocGFydGljbGUxKSA9PiB7XHJcbiAgICBjb25zdCBuZWlnaGJvcmluZ1BhcnRpY2xlcyA9IGdldE5laWdoYm9yaW5nUGFydGljbGVzKHBhcnRpY2xlMSk7XHJcblxyXG4gICAgbmVpZ2hib3JpbmdQYXJ0aWNsZXMuZm9yRWFjaCgocGFydGljbGUyKSA9PiB7XHJcbiAgICAgIGlmIChwYXJ0aWNsZTEgPT09IHBhcnRpY2xlMikgcmV0dXJuO1xyXG5cclxuICAgICAgdGVtcENvbGxpc2lvbkRpcmVjdGlvbi5zZXQocGFydGljbGUxLnBvc19jdXJyKS5zdWJ0cmFjdChwYXJ0aWNsZTIucG9zX2N1cnIpO1xyXG4gICAgICBzcXVhcmVkRGlzdGFuY2UgPSB0ZW1wQ29sbGlzaW9uRGlyZWN0aW9uLnNxdWFyZWRMZW5ndGgoKTtcclxuXHJcbiAgICAgIHJhZGlpU3VtID0gcGFydGljbGUxLnJhZGl1cyArIHBhcnRpY2xlMi5yYWRpdXM7XHJcbiAgICAgIHNxdWFyZWRSYWRpaVN1bSA9IHJhZGlpU3VtICogcmFkaWlTdW07XHJcblxyXG4gICAgICBpZiAoc3F1YXJlZERpc3RhbmNlIDwgc3F1YXJlZFJhZGlpU3VtICYmIHNxdWFyZWREaXN0YW5jZSAhPSAwKSB7XHJcbiAgICAgICAgbnVtYmVyX29mX2NvbGxpc2lvbnMrKztcclxuICAgICAgICAgIGxldCBkaXN0YW5jZSA9IE1hdGguc3FydChzcXVhcmVkRGlzdGFuY2UpO1xyXG4gICAgICAgICAgdGVtcENvbGxpc2lvbkRpcmVjdGlvbi5kaXZpZGUoZGlzdGFuY2UpO1xyXG4gICAgICBcclxuICAgICAgICAgIGxldCBkZWx0YSA9IHJhZGlpU3VtIC0gZGlzdGFuY2U7XHJcbiAgICAgICAgICB0ZW1wQ29sbGlzaW9uRGlyZWN0aW9uLm11bHRpcGx5KGRlbHRhICogMC41KTtcclxuICAgICAgXHJcbiAgICAgICAgICBwYXJ0aWNsZTEucG9zX2N1cnIuYWRkKHRlbXBDb2xsaXNpb25EaXJlY3Rpb24pO1xyXG4gICAgICAgICAgcGFydGljbGUyLnBvc19jdXJyLnN1YnRyYWN0KHRlbXBDb2xsaXNpb25EaXJlY3Rpb24pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5Q29uc3RyYWludChwYXJ0aWNsZTogUGFydGljbGUpIHtcclxuICAvLyBBcHBseSBmbG9vciBjb25zdHJhaW50XHJcbiAgaWYgKHBhcnRpY2xlLnBvc19jdXJyLnkgKyBwYXJ0aWNsZS5yYWRpdXMgPiBmb3JlZ3JvdW5kX2NhbnZhcy5oZWlnaHQpIHtcclxuICAgIHBhcnRpY2xlLnBvc19jdXJyLnkgPSBmb3JlZ3JvdW5kX2NhbnZhcy5oZWlnaHQgLSBwYXJ0aWNsZS5yYWRpdXM7XHJcbiAgICBwYXJ0aWNsZS5wb3NfcHJldi55ID0gcGFydGljbGUucG9zX2N1cnIueSArIHBhcnRpY2xlLnBvc19jdXJyLnkgLSBwYXJ0aWNsZS5wb3NfcHJldi55O1xyXG4gIH1cclxuXHJcbiAgLy8gQXBwbHkgQ2VpbGluZyBjb25zdHJhaW50XHJcbiAgaWYgKHBhcnRpY2xlLnBvc19jdXJyLnkgLSBwYXJ0aWNsZS5yYWRpdXMgPCAwKSB7XHJcbiAgICBwYXJ0aWNsZS5wb3NfY3Vyci55ID0gcGFydGljbGUucmFkaXVzO1xyXG4gICAgcGFydGljbGUucG9zX3ByZXYueSA9IHBhcnRpY2xlLnBvc19jdXJyLnkgKyBwYXJ0aWNsZS5wb3NfY3Vyci55IC0gcGFydGljbGUucG9zX3ByZXYueTtcclxuICB9XHJcblxyXG5cclxuICAvLyBBcHBseSBsZWZ0IHdhbGwgY29uc3RyYWludFxyXG4gIGlmIChwYXJ0aWNsZS5wb3NfY3Vyci54IC0gcGFydGljbGUucmFkaXVzIDwgMCkge1xyXG4gICAgcGFydGljbGUucG9zX2N1cnIueCA9IHBhcnRpY2xlLnJhZGl1cztcclxuICAgIHBhcnRpY2xlLnBvc19wcmV2LnggPSBwYXJ0aWNsZS5wb3NfY3Vyci54ICsgcGFydGljbGUucG9zX2N1cnIueCAtIHBhcnRpY2xlLnBvc19wcmV2Lng7XHJcbiAgfVxyXG5cclxuICAvLyBBcHBseSByaWdodCB3YWxsIGNvbnN0cmFpbnRcclxuICBpZiAocGFydGljbGUucG9zX2N1cnIueCArIHBhcnRpY2xlLnJhZGl1cyA+IGZvcmVncm91bmRfY2FudmFzLndpZHRoKSB7XHJcbiAgICBwYXJ0aWNsZS5wb3NfY3Vyci54ID0gZm9yZWdyb3VuZF9jYW52YXMud2lkdGggLSBwYXJ0aWNsZS5yYWRpdXM7XHJcblxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY2xlYXJDYW52YXMoKSB7XHJcbiAgY3R4LmNsZWFyUmVjdCgwLCAwLCBmb3JlZ3JvdW5kX2NhbnZhcy53aWR0aCwgZm9yZWdyb3VuZF9jYW52YXMuaGVpZ2h0KTtcclxuICAvLyBiYWNrX2N0eC5jbGVhclJlY3QoMCwgMCwgZm9yZWdyb3VuZF9jYW52YXMud2lkdGgsIGZvcmVncm91bmRfY2FudmFzLmhlaWdodCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZUNhbnZhc1NpemUoKSB7XHJcbiAgZm9yZWdyb3VuZF9jYW52YXMud2lkdGggPSBmb3JlZ3JvdW5kX2NhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcclxuICBmb3JlZ3JvdW5kX2NhbnZhcy5oZWlnaHQgPSBmb3JlZ3JvdW5kX2NhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XHJcbiAgYmFja2dyb3VuZF9jYW52YXMud2lkdGggPSBiYWNrZ3JvdW5kX2NhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcclxuICBiYWNrZ3JvdW5kX2NhbnZhcy5oZWlnaHQgPSBiYWNrZ3JvdW5kX2NhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XHJcbiAgd2ViZ2xfY2FudmFzLndpZHRoID0gd2ViZ2xfY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xyXG4gIHdlYmdsX2NhbnZhcy5oZWlnaHQgPSB3ZWJnbF9jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xyXG4gIGluaXRQYXJ0aWNsZVNoYWRlcigpO1xyXG4gIGluaXRpYWxpemVHcmlkKCk7XHJcbiAgZHJhd0dyaWQoKTtcclxufVxyXG5cclxubGV0IGZyYW1lQ291bnQgPSAwO1xyXG5sZXQgbGFzdFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAqIDAuMTtcclxuXHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZUZQUygpIHtcclxuICBjb25zdCBjdXJyZW50VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpICogMC4xO1xyXG4gIGNvbnN0IHRpbWVEaWZmID0gY3VycmVudFRpbWUgLSBsYXN0VGltZTtcclxuICBjb25zdCBmcHMgPSBNYXRoLnJvdW5kKDEwMDAgLyB0aW1lRGlmZik7XHJcbiAgbGFzdFRpbWUgPSBjdXJyZW50VGltZTtcclxuICByZXR1cm4gZnBzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVNb3VzZURvd24oZXZlbnQ6IE1vdXNlRXZlbnQgfCBUb3VjaEV2ZW50KSB7XHJcbiAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcclxuICBjbGlja2VkID0gdHJ1ZTtcclxuICBwb2ludGVyX2Z1bmN0aW9uID0gZ2V0UG9pbnRlckZ1bmN0aW9uKClcclxuXHJcbiAgaWYgKGV2ZW50IGluc3RhbmNlb2YgTW91c2VFdmVudCkge1xyXG4gICAgcG9pbnRlclBvc2l0aW9uLnggPSBldmVudC5jbGllbnRYO1xyXG4gICAgcG9pbnRlclBvc2l0aW9uLnkgPSBldmVudC5jbGllbnRZO1xyXG5cclxuICB9XHJcbiAgZWxzZSBpZiAoZXZlbnQgaW5zdGFuY2VvZiBUb3VjaEV2ZW50KSB7XHJcbiAgICBwb2ludGVyUG9zaXRpb24ueCA9IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WDtcclxuICAgIHBvaW50ZXJQb3NpdGlvbi55ID0gZXZlbnQudG91Y2hlc1swXS5jbGllbnRZO1xyXG4gIH1cclxuXHJcbiAgY2xpY2tfc3RhcnRfcG9zaXRpb24ueCA9IHBvaW50ZXJQb3NpdGlvbi54O1xyXG4gIGNsaWNrX3N0YXJ0X3Bvc2l0aW9uLnkgPSBwb2ludGVyUG9zaXRpb24ueTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZU1vdXNlVXAoZXZlbnQ6IE1vdXNlRXZlbnQgfCBUb3VjaEV2ZW50KSB7XHJcbiAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcclxuICBjbGlja2VkID0gZmFsc2U7XHJcblxyXG4gIHN3aXRjaCAocG9pbnRlcl9mdW5jdGlvbikge1xyXG4gICAgY2FzZSAnZmllbGQnOlxyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgJ2dyYXZpdHknOlxyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgJ3Rocm93JzpcclxuICAgICAgbGV0IGxhdW5jaF9kaXIgPSBjbGlja19zdGFydF9wb3NpdGlvbi5kaWZmZXJlbmNlKHBvaW50ZXJQb3NpdGlvbilcclxuICAgICAgbGF1bmNoX2Rpci5tdWx0aXBseShmcHMgLyA2MClcclxuICAgICAgcGFydGljbGVzLnB1c2gobmV3IFBhcnRpY2xlKGNsaWNrX3N0YXJ0X3Bvc2l0aW9uLmNsb25lKCksIDE1LCBsYXVuY2hfZGlyLCBnZXRSYW5kb21Db2xvcigpKSk7XHJcbiAgICAgIGJyZWFrO1xyXG5cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFJhbmRvbUNvbG9yKCk6IHsgcjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlciB9IHtcclxuICByZXR1cm4ge1xyXG4gICAgcjogTWF0aC5yYW5kb20oKSxcclxuICAgIGc6IE1hdGgucmFuZG9tKCksXHJcbiAgICBiOiBNYXRoLnJhbmRvbSgpXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVNb3ZlRXZlbnQoZXZlbnQ6IE1vdXNlRXZlbnQgfCBUb3VjaEV2ZW50KSB7XHJcbiAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcclxuICBpZiAoY2xpY2tlZCkge1xyXG4gICAgaWYgKGV2ZW50IGluc3RhbmNlb2YgTW91c2VFdmVudCkge1xyXG4gICAgICBwb2ludGVyUG9zaXRpb24ueCA9IGV2ZW50LmNsaWVudFg7XHJcbiAgICAgIHBvaW50ZXJQb3NpdGlvbi55ID0gZXZlbnQuY2xpZW50WTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGV2ZW50IGluc3RhbmNlb2YgVG91Y2hFdmVudCkge1xyXG4gICAgICBwb2ludGVyUG9zaXRpb24ueCA9IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WDtcclxuICAgICAgcG9pbnRlclBvc2l0aW9uLnkgPSBldmVudC50b3VjaGVzWzBdLmNsaWVudFk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3QXR0cmFjdG9ycygpIHtcclxuICBhdHRyYWN0b3JzLmZvckVhY2goKGF0dHJhY3RvcikgPT4ge1xyXG4gICAgYXR0cmFjdG9yLmFuaW1hdGUoKTtcclxuICB9KTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGFuaW1hdGUoKSB7XHJcbiAgdGljaygwLjUgLyBmcHMgKiA2MCk7XHJcbiAgY2xlYXJDYW52YXMoKTtcclxuICBkcmF3UGFydGljbGVzKCk7XHJcbiAgLy8gZHJhd0dyaWQoKTtcclxuICAvLyBkcmF3QXR0cmFjdG9ycygpO1xyXG4gIHN3aXRjaCAocG9pbnRlcl9mdW5jdGlvbikge1xyXG4gICAgY2FzZSAnZmllbGQnOlxyXG4gICAgICBkcmF3TGFzc28oKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICdncmF2aXR5JzpcclxuICAgICAgZHJhd0Fycm93KGNsaWNrX3N0YXJ0X3Bvc2l0aW9uLCBwb2ludGVyUG9zaXRpb24pXHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAndGhyb3cnOlxyXG4gICAgICBkcmF3VGFpbChjbGlja19zdGFydF9wb3NpdGlvbiwgcG9pbnRlclBvc2l0aW9uKVxyXG4gICAgICBicmVhaztcclxuXHJcbiAgfVxyXG5cclxuICBjb25zdCBtdWx0ID0gZnBzICogMC4wMTY2NjY7XHJcbiAgaWYgKGkgJSBNYXRoLmZsb29yKDIgKiBtdWx0KSA9PSAwICYmIHBhcnRpY2xlcy5sZW5ndGggPCBwYXJ0aWNsZUNvdW50ICYmIGkgPiAxMjApIHtcclxuICAgIHBhcnRpY2xlcy5wdXNoKG5ldyBQYXJ0aWNsZShuZXcgVmVjMkQoMjAwLCAyMDApLCAxMCwgbmV3IFZlYzJEKDIwMCAqIG11bHQsIC04MCAqIG11bHQpLCBnZXRSYW5kb21Db2xvcigpKSk7XHJcbiAgICBwYXJ0aWNsZXMucHVzaChuZXcgUGFydGljbGUobmV3IFZlYzJEKDIwMCwgMjYwKSwgMTAsIG5ldyBWZWMyRCgxODAgKiBtdWx0LCAtODAgKiBtdWx0KSwgZ2V0UmFuZG9tQ29sb3IoKSkpO1xyXG4gICAgcGFydGljbGVzLnB1c2gobmV3IFBhcnRpY2xlKG5ldyBWZWMyRCgyMDAsIDMyMCksIDEwLCBuZXcgVmVjMkQoMTcwICogbXVsdCwgLTgwICogbXVsdCksIGdldFJhbmRvbUNvbG9yKCkpKTtcclxuICAgIHBhcnRpY2xlcy5wdXNoKG5ldyBQYXJ0aWNsZShuZXcgVmVjMkQoMjAwLCAzODApLCAxMCwgbmV3IFZlYzJEKDE4MCAqIG11bHQsIC04MCAqIG11bHQpLCBnZXRSYW5kb21Db2xvcigpKSk7XHJcbiAgICBwYXJ0aWNsZXMucHVzaChuZXcgUGFydGljbGUobmV3IFZlYzJEKDIwMCwgNDQwKSwgMTAsIG5ldyBWZWMyRCgxNzAgKiBtdWx0LCAtODAgKiBtdWx0KSwgZ2V0UmFuZG9tQ29sb3IoKSkpO1xyXG4gICAgc2V0R2VvbWV0cnkoKTtcclxuICB9XHJcblxyXG4gIGkrKztcclxuXHJcblxyXG4gIGZyYW1lQ291bnQrKztcclxuICBpZiAoZnJhbWVDb3VudCAlIDEwID09PSAwKSB7XHJcbiAgICBmcHMgPSBjYWxjdWxhdGVGUFMoKTtcclxuICAgIGZwc0NvdW50ZXIuaW5uZXJUZXh0ID0gYEZQUzogJHtmcHN9YDtcclxuICAgIHBhcnRpY2xlQ291bnRlci5pbm5lclRleHQgPSBgUGFydGljbGVzOiAke3BhcnRpY2xlcy5sZW5ndGh9YDtcclxuICAgIGNvbGxpc2lvbkNvdW50ZXIuaW5uZXJUZXh0ID0gYENvbGxpc2lvbnM6ICR7bnVtYmVyX29mX2NvbGxpc2lvbnN9YDtcclxuICB9XHJcbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xyXG59XHJcblxyXG5sZXQgaSA9IDA7XHJcbmNvbnN0IG1haW5fYm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluX2NvbnRhaW5lcicpO1xyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB1cGRhdGVDYW52YXNTaXplKTtcclxubWFpbl9ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgaGFuZGxlTW91c2VEb3duKTtcclxubWFpbl9ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGhhbmRsZU1vdXNlVXApO1xyXG5tYWluX2JvZHkuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBoYW5kbGVNb3ZlRXZlbnQpO1xyXG5tYWluX2JvZHkuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgaGFuZGxlTW91c2VEb3duKTtcclxubWFpbl9ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCBoYW5kbGVNb3VzZVVwKTtcclxubWFpbl9ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgaGFuZGxlTW92ZUV2ZW50KTtcclxubWFpbl9ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICBjbG9zZU1lbnUoKTtcclxufSk7XHJcbmluaXRQYXJ0aWNsZVNoYWRlcigpO1xyXG5pbml0aWFsaXplR3JpZCgpO1xyXG5kcmF3R3JpZCgpO1xyXG5cclxuLy8gY29uc3QgbXVsdCA9IGZwcyAqIDAuMDE2NjY2O1xyXG4vLyBwYXJ0aWNsZXMucHVzaChuZXcgUGFydGljbGUobmV3IFZlYzJEKDIwMCwgMjAwKSwgMTUsIG5ldyBWZWMyRCgxMDAgKiBtdWx0LCAtMTUwICogbXVsdCksIGdldFJhbmRvbUNvbG9yKCkpKTtcclxuXHJcbi8vIGF0dHJhY3RvcnMucHVzaChuZXcgQXR0cmFjdG9yKG5ldyBWZWMyRCgzMDAsIDMwMCksIDIwMCwgNDAwLCB0cnVlLCAnYmxhY2snKSlcclxuLy8gYXR0cmFjdG9ycy5wdXNoKG5ldyBBdHRyYWN0b3IobmV3IFZlYzJEKDkwMCwgMzAwKSwgMjgwLCA0MDAsIHRydWUsICdwaW5rJykpXHJcbnJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbl9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9zY3JpcHQudHNcIik7XG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9NZW51TWFuYWdlci50c1wiKTtcbiJdLCJuYW1lcyI6WyJnbCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRDb250ZXh0IiwiY29uc29sZSIsImVycm9yIiwiZW5hYmxlIiwiQkxFTkQiLCJibGVuZEZ1bmMiLCJTUkNfQUxQSEEiLCJPTkVfTUlOVVNfU1JDX0FMUEhBIiwidmVydGV4U2hhZGVyIiwiY3JlYXRlU2hhZGVyIiwiVkVSVEVYX1NIQURFUiIsImZyYWdtZW50U2hhZGVyIiwiRlJBR01FTlRfU0hBREVSIiwicHJvZ3JhbSIsImNyZWF0ZVByb2dyYW0iLCJwb3NpdGlvbkF0dHJpYnV0ZUxvY2F0aW9uIiwiZ2V0QXR0cmliTG9jYXRpb24iLCJyZXNvbHV0aW9uVW5pZm9ybUxvY2F0aW9uIiwiZ2V0VW5pZm9ybUxvY2F0aW9uIiwiY29sb3JVbmlmb3JtTG9jYXRpb24iLCJ0cmFuc2xhdGlvbkxvY2F0aW9uIiwicmFkaXVzVW5pZm9ybUxvY2F0aW9uIiwidW5pZm9ybTJmIiwiY2FudmFzIiwid2lkdGgiLCJoZWlnaHQiLCJwb3NpdGlvbkJ1ZmZlciIsImNyZWF0ZUJ1ZmZlciIsInNldEdlb21ldHJ5IiwicGFydGljbGVzIiwiZm9yRWFjaCIsInBhcnRpY2xlIiwieCIsInkiLCJidWZmZXJEYXRhIiwiQVJSQVlfQlVGRkVSIiwiRmxvYXQzMkFycmF5IiwiU1RBVElDX0RSQVciLCJzZXRSZWN0YW5nbGUiLCJkcmF3UGFydGljbGVzIiwicmVzaXplQ2FudmFzVG9EaXNwbGF5U2l6ZSIsInZpZXdwb3J0IiwiY2xlYXJDb2xvciIsImNsZWFyIiwiQ09MT1JfQlVGRkVSX0JJVCIsInVzZVByb2dyYW0iLCJlbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSIsImJpbmRCdWZmZXIiLCJ2ZXJ0ZXhBdHRyaWJQb2ludGVyIiwiRkxPQVQiLCJwb3NfY3VyciIsInVuaWZvcm0zZiIsImNvbG9yIiwiciIsImciLCJiIiwidW5pZm9ybTFmIiwiZHJhd0FycmF5cyIsIlRSSUFOR0xFUyIsImRyYXdHcmlkIiwiYmFja19jdHgiLCJjbGVhclJlY3QiLCJmb3JlZ3JvdW5kX2NhbnZhcyIsInN0cm9rZVN0eWxlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImRvY3VtZW50RWxlbWVudCIsImdldFByb3BlcnR5VmFsdWUiLCJsaW5lV2lkdGgiLCJncmlkU2l6ZSIsImJlZ2luUGF0aCIsIm1vdmVUbyIsImxpbmVUbyIsInN0cm9rZSIsImRyYXdUYWlsIiwiZnJvbSIsInRvIiwiY2xpY2tlZCIsImRpc3RhbmNlIiwiZGlmZmVyZW5jZSIsInN0YXJ0UG9zIiwidmVjIiwicHJlZGljdGVkRG90IiwiaSIsImFjY2VsZXJhdGUiLCJncmF2aXR5IiwiYXBwbHlDb25zdHJhaW50IiwiYXBwbHlBdHRyYWN0b3JGb3JjZXMiLCJ1cGRhdGVQb3NpdGlvbiIsImRyYXdEb3QiLCJkcmF3UHJlZGljdGVkUGF0aCIsImNsb25lIiwiZGl2aWRlIiwiYW5nbGUiLCJNYXRoIiwiYXRhbjIiLCJuZXdfdG8iLCJjb3MiLCJzaW4iLCJkb3RYIiwiZG90WSIsImRvdFNpemUiLCJvcGFjaXR5IiwiY3R4IiwiYXJjIiwiUEkiLCJmaWxsU3R5bGUiLCJmaWxsIiwiY2xvc2VQYXRoIiwiZHJhd0xhc3NvIiwicG9pbnRlclBvc2l0aW9uIiwiZmllbGRTaXplIiwiZHJhd0Fycm93IiwiaGVhZGxlbiIsIm1lbnVfYnV0dG9uIiwibWVudV9lbGVtZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJvcGVuTWVudSIsImdldEF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsInN0eWxlIiwiY3Vyc29yIiwiZWxlbWVudCIsInNldFRpbWVvdXQiLCJkaXNwbGF5IiwiY2xvc2VNZW51IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwic3RvcFByb3BhZ2F0aW9uIiwicXVlcnlTZWxlY3RvciIsIm5ld1RoZW1lIiwicm9vdEVsZW0iLCJmaWVsZF9zaXplX3NsaWRlciIsImZpZWxkX3N0cmVuZ3RoX3NsaWRlciIsImdyYXZpdHlfc3RyZW5ndGhfc2xpZGVyIiwic3Vic3RlcHNfYW1vdW50X2VudHJ5IiwicGFydGljbGVzX2Ftb3VudF9lbnRyeSIsIm91dGxpbmVfY2hlY2tib3giLCJnZXRQb2ludGVyRnVuY3Rpb24iLCJyYWRpb0J1dHRvbnMiLCJnZXRFbGVtZW50c0J5TmFtZSIsImxlbmd0aCIsImNoZWNrZWQiLCJ2YWx1ZSIsIm9uaW5wdXQiLCJzZXRGaWVsZFNpemUiLCJwYXJzZUludCIsInNldEZpZWxkU3RyZW5ndGgiLCJzZXRHcmF2aXR5U3RyZW5ndGgiLCJzZXRTdWJzdGVwcyIsInNldFBhcnRpY2xlc051bSIsInNldERyYXdPdXRsaW5lIiwicG9zIiwicmFkaXVzIiwiYWNjIiwidGhpcyIsInBvc19wcmV2IiwiYWNjZWxlcmF0aW9uIiwidXBkYXRlQ2VsbCIsImZsb29yIiwiZHJhdyIsImR0IiwidmVsb2NpdHkiLCJhZGQiLCJtdWx0aXBseSIsImdyaWRQb3MiLCJncmlkQ2VsbCIsIlBhcnRpY2xlIiwidHlwZSIsInNvdXJjZSIsInNoYWRlciIsInNoYWRlclNvdXJjZSIsImNvbXBpbGVTaGFkZXIiLCJnZXRTaGFkZXJQYXJhbWV0ZXIiLCJDT01QSUxFX1NUQVRVUyIsImxvZyIsImdldFNoYWRlckluZm9Mb2ciLCJkZWxldGVTaGFkZXIiLCJhdHRhY2hTaGFkZXIiLCJsaW5rUHJvZ3JhbSIsImdldFByb2dyYW1QYXJhbWV0ZXIiLCJMSU5LX1NUQVRVUyIsImdldFByb2dyYW1JbmZvTG9nIiwiZGVsZXRlUHJvZ3JhbSIsImRpc3BsYXlXaWR0aCIsImNsaWVudFdpZHRoIiwiZGlzcGxheUhlaWdodCIsImNsaWVudEhlaWdodCIsIm5lZWRSZXNpemUiLCJpbml0UGFydGljbGVTaGFkZXIiLCJvdGhlciIsInNldCIsInN1YnRyYWN0Iiwic2NhbGFyIiwiZG90Iiwic3FydCIsInNxdWFyZWRMZW5ndGgiLCJWZWMyRCIsImdyaWQiLCJhdHRyYWN0b3JzIiwicGFydGljbGVDb3VudCIsIm51bWJlcl9vZl9jb2xsaXNpb25zIiwiY2xpY2tfc3RhcnRfcG9zaXRpb24iLCJwb2ludGVyX2Z1bmN0aW9uIiwiYmFja2dyb3VuZF9jYW52YXMiLCJ3ZWJnbF9jYW52YXMiLCJkcmF3T3V0bGluZSIsImZpZWxkU3RyZW5ndGgiLCJzdWJzdGVwc19hbW91bnQiLCJncmlkQ29sdW1ucyIsImNlaWwiLCJncmlkUm93cyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImZwcyIsImZwc0NvdW50ZXIiLCJjcmVhdGVFbGVtZW50IiwicG9zaXRpb24iLCJ0b3AiLCJsZWZ0IiwicGFydGljbGVDb3VudGVyIiwiY29sbGlzaW9uQ291bnRlciIsImluaXRpYWxpemVHcmlkIiwiaiIsInVwZGF0ZVBvc2l0aW9ucyIsInJlbW92ZUZyb21HcmlkIiwiY29sdW1uIiwicm93IiwicHVzaCIsImFkZFRvR3JpZCIsImFwcGx5RmllbGQiLCJmaWVsZFBvcyIsInB1bGxEaXJlY3Rpb24iLCJhdHRyYWN0b3IiLCJmb3JjZSIsInNvbHZlQ29sbGlzaW9ucyIsInRlbXBDb2xsaXNpb25EaXJlY3Rpb24iLCJzcXVhcmVkRGlzdGFuY2UiLCJyYWRpaVN1bSIsInBhcnRpY2xlMSIsIm5laWdoYm9yaW5nUGFydGljbGVzIiwiZ2V0TmVpZ2hib3JpbmdQYXJ0aWNsZXMiLCJwYXJ0aWNsZTIiLCJkZWx0YSIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImZyYW1lQ291bnQiLCJsYXN0VGltZSIsInBlcmZvcm1hbmNlIiwibm93IiwiaGFuZGxlTW91c2VEb3duIiwiTW91c2VFdmVudCIsImNsaWVudFgiLCJjbGllbnRZIiwiVG91Y2hFdmVudCIsInRvdWNoZXMiLCJoYW5kbGVNb3VzZVVwIiwibGF1bmNoX2RpciIsImdldFJhbmRvbUNvbG9yIiwicmFuZG9tIiwiaGFuZGxlTW92ZUV2ZW50IiwibWFpbl9ib2R5Iiwid2luZG93IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiYW5pbWF0ZSIsInN1Yl9zdGVwcyIsInN1Yl9kdCIsInRpY2siLCJtdWx0IiwiY3VycmVudFRpbWUiLCJ0aW1lRGlmZiIsInJvdW5kIiwiY2FsY3VsYXRlRlBTIiwiaW5uZXJUZXh0IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciXSwic291cmNlUm9vdCI6IiJ9